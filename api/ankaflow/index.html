
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://example.com/docs/api/ankaflow/">
      
      
        <link rel="prev" href="../ankaflow.models/">
      
      
        <link rel="next" href="../../demo/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19">
    
    
      
        <title>Duct API - AnkaFlow Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-KTHG2QG391"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-KTHG2QG391",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-KTHG2QG391",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ankaflow_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="AnkaFlow Documentation" class="md-header__button md-logo" aria-label="AnkaFlow Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AnkaFlow Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Duct API
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="AnkaFlow Documentation" class="md-nav__button md-logo" aria-label="AnkaFlow Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    AnkaFlow Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../browser-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Browser setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../custom-connection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom connection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../motherduck/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using with Motherduck
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../llm-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using LLM for SQL generation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ankaflow.models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pipeline API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Duct API
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Duct API
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ankaflow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;ankaflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.__all__" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;__all__
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.AsyncFlow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AsyncFlow
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" AsyncFlow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.AsyncFlow.log" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.AsyncFlow.logs" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.AsyncFlow.connect" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;connect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.AsyncFlow.df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.AsyncFlow.pull_df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;pull_df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.AsyncFlow.run" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.AsyncFlow.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.BigQueryConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BigQueryConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BigQueryConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.BigQueryConfig.credential_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;credential_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.BigQueryConfig.dataset" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.BigQueryConfig.project" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.BigQueryConfig.region" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;region
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.BucketConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BucketConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BucketConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.BucketConfig.bucket" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;bucket
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.BucketConfig.data_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;data_prefix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.BucketConfig.locator_wildcard" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;locator_wildcard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.BucketConfig.region" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;region
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.ClickhouseConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ClickhouseConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ClickhouseConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.ClickhouseConfig.blocksize" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;blocksize
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.ConnectionConfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ConnectionConfiguration
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ConnectionConfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.ConnectionConfiguration.bigquery" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;bigquery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.ConnectionConfiguration.clickhouse" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;clickhouse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.ConnectionConfiguration.gs" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;gs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.ConnectionConfiguration.llm" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;llm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.ConnectionConfiguration.local" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;local
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.ConnectionConfiguration.s3" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;s3
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.Flow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.Flow.df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.Flow.pull_df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;pull_df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.Flow.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.FlowContext" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FlowContext
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.FlowControl" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FlowControl
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.FlowError" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FlowError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.FlowRunError" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FlowRunError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.GSConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;GSConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" GSConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.GSConfig.credential_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;credential_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.GSConfig.hmac_key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;hmac_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.GSConfig.hmac_secret" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;hmac_secret
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.S3Config" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;S3Config
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" S3Config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.S3Config.access_key_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;access_key_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.S3Config.secret_access_key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;secret_access_key
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.Stages" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Stages
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Stages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.Stages.enumerate_steps" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;enumerate_steps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.Stages.load" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.Stages.steps" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.Variables" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Variables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.api" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;api
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" api">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.api.API" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;API
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.api.API.dt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;dt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.api.API.error" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.api.API.look" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;look
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.api.API.peek" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;peek
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.api.API.setvariable" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;setvariable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.api.API.sqltuple" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;sqltuple
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.cli" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;cli
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" cli">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.cli.resolve_yaml_path" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;resolve_yaml_path
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.connections" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;connections
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" connections">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.load_connection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;load_connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;bigquery
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" bigquery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery.BigQuery" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BigQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BigQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery.BigQuery.create_dataset" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;create_dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery.BigQuery.init" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery.BigQuery.locate" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;locate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery.BigQuery.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery.BigQuery.sink" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;sink
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery.BigQuery.sql" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;sql
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery.BigQuery.tap" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;tap
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;clickhouse
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" clickhouse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse.Clickhouse" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Clickhouse
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Clickhouse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse.Clickhouse.init" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse.Clickhouse.locate" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;locate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse.ClickhouseClient" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ClickhouseClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ClickhouseClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse.ClickhouseClient.connect" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;connect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse.ClickhouseClient.insert_dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;insert_dataframe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse.ClickhouseClient.query_df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;query_df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse.ClickhouseClient.stream_query" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;stream_query
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;connection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" connection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Connection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Connection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Connection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Connection.init" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Connection.ranking" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;ranking
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Connection.sink" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;sink
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Connection.sql" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;sql
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Connection.tap" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;tap
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Locator" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Locator
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Locator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Locator.locate" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;locate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Schema
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Schema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Schema.generate" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;generate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Schema.show" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;show
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.delta" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;delta
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" delta">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.delta.Deltatable" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Deltatable
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Deltatable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.delta.Deltatable.sink" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;sink
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" sink">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.delta.Deltatable.sink--strategy-matrix" class="md-nav__link">
    <span class="md-ellipsis">
      Strategy Matrix:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.delta.Deltatable.sql" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;sql
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.errors" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;errors
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" errors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.errors.ConnectionException" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ConnectionException
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.const" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;const
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.core" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;core
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" core">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.AsyncFlow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AsyncFlow
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" AsyncFlow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.AsyncFlow.log" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.AsyncFlow.logs" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.AsyncFlow.connect" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;connect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.AsyncFlow.df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.AsyncFlow.pull_df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;pull_df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.AsyncFlow.run" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.AsyncFlow.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.Flow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.Flow.df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.Flow.pull_df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;pull_df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.Flow.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.AsyncFlow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AsyncFlow
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" AsyncFlow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.AsyncFlow.log" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.AsyncFlow.logs" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.AsyncFlow.connect" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;connect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.AsyncFlow.df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.AsyncFlow.pull_df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;pull_df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.AsyncFlow.run" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.AsyncFlow.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.BaseStageHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BaseStageHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BaseStageHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.BaseStageHandler.execute" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.Flow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.Flow.df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.Flow.pull_df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;pull_df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.Flow.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.InternalStageHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;InternalStageHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" InternalStageHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.InternalStageHandler.execute" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.PipelineStageHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;PipelineStageHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" PipelineStageHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.PipelineStageHandler.execute" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.SQLStageHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SQLStageHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SQLStageHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.SQLStageHandler.execute" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.SinkStageHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SinkStageHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SinkStageHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.SinkStageHandler.execute" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.StageBlock" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;StageBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" StageBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.StageBlock.do" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;do
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.StageBlock.prepare" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;prepare
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.StageBlock.render" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;render
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.StageFactory" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;StageFactory
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" StageFactory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.StageFactory.get_handler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_handler
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.TapStageHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;TapStageHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" TapStageHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.TapStageHandler.execute" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.TransformStageHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;TransformStageHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" TransformStageHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.TransformStageHandler.execute" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.errors" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;errors
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.internal" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;internal
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" internal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;browser
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" browser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DDB
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" DDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.connect" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;connect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.delta_scan" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;delta_scan
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.get" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.inject_secrets" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;inject_secrets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.parquet_scan" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;parquet_scan
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.read_csv" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;read_csv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.read_json" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;read_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.read_parquet" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;read_parquet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.register" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.sql" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;sql
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.unregister" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;unregister
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DuckDBIORewriter" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DuckDBIORewriter
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" DuckDBIORewriter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DuckDBIORewriter.rewrite" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;rewrite
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.Relation" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Relation
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Relation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.Relation.arrow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;arrow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.Relation.df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;df
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.RemoteObject" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RemoteObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" RemoteObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.RemoteObject.fetch" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;fetch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.RemoteObject.upload" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;upload
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.duckdb" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;duckdb
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" duckdb">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.duckdb.Relation" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Relation
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Relation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.duckdb.Relation.raw" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;raw
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.macros" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;macros
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" macros">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.macros.Fn" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Fn
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Fn">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.macros.Fn.dt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;dt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.server" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;server
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.server.DDB" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DDB
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.models" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;models
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BigQueryConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BigQueryConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConfig.credential_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;credential_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConfig.dataset" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConfig.project" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConfig.region" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;region
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BigQueryConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BigQueryConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConnection.data_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;data_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConnection.key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConnection.partition" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;partition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConnection.schema_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;schema_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConnection.version" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BucketConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BucketConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BucketConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BucketConfig.bucket" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;bucket
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BucketConfig.data_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;data_prefix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BucketConfig.locator_wildcard" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;locator_wildcard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BucketConfig.region" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;region
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.CSVConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;CSVConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ClickhouseConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ClickhouseConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ClickhouseConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ClickhouseConfig.blocksize" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;blocksize
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ClickhouseConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ClickhouseConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ClickhouseConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ClickhouseConnection.key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ClickhouseConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ClickhouseConnection.version" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Column" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Column
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Column">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Column.name" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Column.type" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Columns" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Columns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Connection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Connection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Connection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Connection.config" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Connection.create_statement" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;create_statement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Connection.fields" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Connection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Connection.params" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Connection.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ConnectionConfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ConnectionConfiguration
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ConnectionConfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ConnectionConfiguration.bigquery" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;bigquery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ConnectionConfiguration.clickhouse" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;clickhouse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ConnectionConfiguration.gs" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;gs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ConnectionConfiguration.llm" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;llm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ConnectionConfiguration.local" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;local
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ConnectionConfiguration.s3" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;s3
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.CustomConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;CustomConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" CustomConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.CustomConnection.classname" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;classname
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.CustomConnection.module" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;module
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.CustomConnection.params" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.CustomConnection.load" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.DeltatableConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DeltatableConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" DeltatableConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.DeltatableConnection.data_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;data_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.DeltatableConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.DeltatableConnection.optimize" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;optimize
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" optimize">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.DeltatableConnection.optimize--deltatable" class="md-nav__link">
    <span class="md-ellipsis">
      Deltatable
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.DeltatableConnection.partition" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;partition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.DeltatableConnection.schema_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;schema_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.DeltatableConnection.writer_features" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;writer_features
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Dimension" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Dimension
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Dimension">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Dimension.load" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.FileConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FileConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.FlowContext" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FlowContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.GSConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;GSConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" GSConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.GSConfig.credential_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;credential_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.GSConfig.hmac_key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;hmac_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.GSConfig.hmac_secret" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;hmac_secret
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.JSONConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;JSONConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ParquetConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ParquetConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.PhysicalConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;PhysicalConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" PhysicalConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.PhysicalConnection.locator" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;locator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.PhysicalConnection.raw_dispatch" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;raw_dispatch
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.RestConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RestConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" RestConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.RestConnection.client" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.RestConnection.fields" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.RestConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.RestConnection.request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.RestConnection.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.S3Config" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;S3Config
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" S3Config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.S3Config.access_key_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;access_key_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.S3Config.secret_access_key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;secret_access_key
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.SQLGenConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SQLGenConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SQLGenConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.SQLGenConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.SQLGenConnection.variables" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;variables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Stage
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Stage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.connection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.context" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.explain" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;explain
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.fields" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" kind">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.kind--sink" class="md-nav__link">
    <span class="md-ellipsis">
      Sink
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.kind--pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      Pipeline
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.locator" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;locator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.log_level" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;log_level
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.name" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.on_error" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;on_error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.query" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.show" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;show
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.skip_if" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;skip_if
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.stages" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;stages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.throttle" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;throttle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stages" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Stages
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Stages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stages.enumerate_steps" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;enumerate_steps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stages.load" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stages.steps" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Variables" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Variables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.components" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;components
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.components.Column" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Column
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Column">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.components.Column.name" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.components.Column.type" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.components.Columns" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Columns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;configs
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" configs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BigQueryConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BigQueryConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BigQueryConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BigQueryConfig.credential_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;credential_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BigQueryConfig.dataset" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BigQueryConfig.project" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BigQueryConfig.region" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;region
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BucketConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BucketConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BucketConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BucketConfig.bucket" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;bucket
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BucketConfig.data_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;data_prefix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BucketConfig.locator_wildcard" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;locator_wildcard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BucketConfig.region" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;region
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ClickhouseConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ClickhouseConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ClickhouseConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ClickhouseConfig.blocksize" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;blocksize
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ConnectionConfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ConnectionConfiguration
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ConnectionConfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ConnectionConfiguration.bigquery" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;bigquery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ConnectionConfiguration.clickhouse" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;clickhouse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ConnectionConfiguration.gs" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;gs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ConnectionConfiguration.llm" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;llm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ConnectionConfiguration.local" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;local
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ConnectionConfiguration.s3" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;s3
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.DatabaseConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DatabaseConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" DatabaseConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.DatabaseConfig.cluster" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;cluster
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.DatabaseConfig.database" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.DatabaseConfig.host" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;host
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.DatabaseConfig.password" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.DatabaseConfig.port" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;port
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.DatabaseConfig.username" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;username
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.GSConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;GSConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" GSConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.GSConfig.credential_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;credential_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.GSConfig.hmac_key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;hmac_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.GSConfig.hmac_secret" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;hmac_secret
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.S3Config" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;S3Config
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" S3Config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.S3Config.access_key_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;access_key_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.S3Config.secret_access_key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;secret_access_key
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;connections
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" connections">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.BigQueryConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BigQueryConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BigQueryConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.BigQueryConnection.data_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;data_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.BigQueryConnection.key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.BigQueryConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.BigQueryConnection.partition" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;partition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.BigQueryConnection.schema_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;schema_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.BigQueryConnection.version" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.CSVConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;CSVConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.ClickhouseConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ClickhouseConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ClickhouseConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.ClickhouseConnection.key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.ClickhouseConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.ClickhouseConnection.version" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Connection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Connection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Connection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Connection.config" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Connection.create_statement" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;create_statement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Connection.fields" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Connection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Connection.params" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Connection.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.CustomConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;CustomConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" CustomConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.CustomConnection.classname" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;classname
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.CustomConnection.module" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;module
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.CustomConnection.params" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.CustomConnection.load" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.DeltatableConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DeltatableConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" DeltatableConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.DeltatableConnection.data_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;data_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.DeltatableConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.DeltatableConnection.optimize" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;optimize
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" optimize">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.DeltatableConnection.optimize--deltatable" class="md-nav__link">
    <span class="md-ellipsis">
      Deltatable
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.DeltatableConnection.partition" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;partition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.DeltatableConnection.schema_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;schema_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.DeltatableConnection.writer_features" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;writer_features
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Dimension" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Dimension
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Dimension">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Dimension.load" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.FileConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FileConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.JSONConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;JSONConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.ParquetConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ParquetConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.PhysicalConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;PhysicalConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" PhysicalConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.PhysicalConnection.locator" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;locator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.PhysicalConnection.raw_dispatch" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;raw_dispatch
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.RestConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RestConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" RestConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.RestConnection.client" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.RestConnection.fields" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.RestConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.RestConnection.request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.RestConnection.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.SQLGenConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SQLGenConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SQLGenConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.SQLGenConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.SQLGenConnection.variables" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;variables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.VariableConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;VariableConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.VersionedConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;VersionedConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" VersionedConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.VersionedConnection.key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.VersionedConnection.version" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;core
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" core">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.FlowContext" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FlowContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Stage
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Stage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.connection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.context" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.explain" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;explain
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.fields" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" kind">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.kind--sink" class="md-nav__link">
    <span class="md-ellipsis">
      Sink
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.kind--pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      Pipeline
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.locator" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;locator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.log_level" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;log_level
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.name" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.on_error" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;on_error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.query" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.show" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;show
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.skip_if" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;skip_if
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.stages" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;stages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.throttle" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;throttle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stages" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Stages
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Stages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stages.enumerate_steps" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;enumerate_steps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stages.load" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stages.steps" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Variables" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Variables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.enums" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;enums
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" enums">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.enums.AuthType" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AuthType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.enums.ContentType" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ContentType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.enums.DataType" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DataType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.enums.LogLevel" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;LogLevel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.enums.ModelType" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ModelType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.enums.ParameterDisposition" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ParameterDisposition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.enums.RequestMethod" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RequestMethod
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;llm
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" llm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;LLMConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" LLMConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMConfig.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMConfig.model" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMConfig.proxy" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;proxy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMKind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;LLMKind
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" LLMKind">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMKind.MOCK" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;MOCK
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMKind.OPENAI" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;OPENAI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMProxy" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;LLMProxy
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" LLMProxy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMProxy.client" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMProxy.request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;request
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;rest
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" rest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.BasicHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BasicHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BasicHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.BasicHandler.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Paginator" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Paginator
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Paginator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Paginator.increment" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;increment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Paginator.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Paginator.page_param" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;page_param
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Paginator.page_size" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;page_size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Paginator.param_locator" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;param_locator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Paginator.throttle" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;throttle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Paginator.total_records" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;total_records
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Request
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Request">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.body" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;body
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" body">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.body--example-with-looping" class="md-nav__link">
    <span class="md-ellipsis">
      Example with looping
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.content_type" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;content_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;endpoint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.errorhandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;errorhandler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.initial_backoff" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;initial_backoff
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.max_retries" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;max_retries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.method" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.query" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.response" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;response
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.ResponseHandlerTypes" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ResponseHandlerTypes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestAuth" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RestAuth
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" RestAuth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestAuth.method" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestAuth.values" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestAuth.coerce_to_stringdict" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;coerce_to_stringdict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestClientConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RestClientConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" RestClientConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestClientConfig.base_url" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;base_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestClientConfig.timeout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;timeout
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestErrorHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RestErrorHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" RestErrorHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestErrorHandler.condition" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;condition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestErrorHandler.error_status_codes" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;error_status_codes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestErrorHandler.message" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;message
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestResponse" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RestResponse
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" RestResponse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestResponse.content_type" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;content_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestResponse.locator" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;locator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.StatePoller" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;StatePoller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" StatePoller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.StatePoller.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.StatePoller.ready_status" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;ready_status
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.URLPoller" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;URLPoller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" URLPoller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.URLPoller.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.URLPoller.ready_status" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;ready_status
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.tests" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;tests
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Browser demo
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ankaflow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;ankaflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.__all__" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;__all__
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.AsyncFlow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AsyncFlow
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" AsyncFlow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.AsyncFlow.log" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.AsyncFlow.logs" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.AsyncFlow.connect" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;connect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.AsyncFlow.df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.AsyncFlow.pull_df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;pull_df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.AsyncFlow.run" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.AsyncFlow.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.BigQueryConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BigQueryConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BigQueryConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.BigQueryConfig.credential_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;credential_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.BigQueryConfig.dataset" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.BigQueryConfig.project" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.BigQueryConfig.region" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;region
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.BucketConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BucketConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BucketConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.BucketConfig.bucket" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;bucket
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.BucketConfig.data_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;data_prefix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.BucketConfig.locator_wildcard" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;locator_wildcard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.BucketConfig.region" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;region
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.ClickhouseConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ClickhouseConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ClickhouseConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.ClickhouseConfig.blocksize" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;blocksize
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.ConnectionConfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ConnectionConfiguration
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ConnectionConfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.ConnectionConfiguration.bigquery" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;bigquery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.ConnectionConfiguration.clickhouse" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;clickhouse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.ConnectionConfiguration.gs" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;gs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.ConnectionConfiguration.llm" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;llm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.ConnectionConfiguration.local" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;local
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.ConnectionConfiguration.s3" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;s3
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.Flow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.Flow.df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.Flow.pull_df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;pull_df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.Flow.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.FlowContext" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FlowContext
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.FlowControl" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FlowControl
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.FlowError" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FlowError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.FlowRunError" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FlowRunError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.GSConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;GSConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" GSConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.GSConfig.credential_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;credential_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.GSConfig.hmac_key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;hmac_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.GSConfig.hmac_secret" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;hmac_secret
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.S3Config" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;S3Config
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" S3Config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.S3Config.access_key_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;access_key_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.S3Config.secret_access_key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;secret_access_key
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.Stages" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Stages
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Stages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.Stages.enumerate_steps" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;enumerate_steps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.Stages.load" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.Stages.steps" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.Variables" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Variables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.api" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;api
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" api">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.api.API" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;API
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.api.API.dt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;dt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.api.API.error" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.api.API.look" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;look
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.api.API.peek" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;peek
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.api.API.setvariable" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;setvariable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.api.API.sqltuple" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;sqltuple
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.cli" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;cli
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" cli">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.cli.resolve_yaml_path" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;resolve_yaml_path
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.connections" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;connections
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" connections">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.load_connection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;load_connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;bigquery
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" bigquery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery.BigQuery" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BigQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BigQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery.BigQuery.create_dataset" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;create_dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery.BigQuery.init" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery.BigQuery.locate" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;locate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery.BigQuery.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery.BigQuery.sink" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;sink
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery.BigQuery.sql" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;sql
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.bigquery.BigQuery.tap" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;tap
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;clickhouse
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" clickhouse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse.Clickhouse" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Clickhouse
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Clickhouse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse.Clickhouse.init" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse.Clickhouse.locate" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;locate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse.ClickhouseClient" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ClickhouseClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ClickhouseClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse.ClickhouseClient.connect" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;connect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse.ClickhouseClient.insert_dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;insert_dataframe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse.ClickhouseClient.query_df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;query_df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.clickhouse.ClickhouseClient.stream_query" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;stream_query
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;connection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" connection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Connection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Connection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Connection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Connection.init" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Connection.ranking" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;ranking
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Connection.sink" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;sink
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Connection.sql" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;sql
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Connection.tap" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;tap
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Locator" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Locator
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Locator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Locator.locate" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;locate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Schema
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Schema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Schema.generate" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;generate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.connection.Schema.show" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;show
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.delta" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;delta
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" delta">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.delta.Deltatable" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Deltatable
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Deltatable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.delta.Deltatable.sink" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;sink
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" sink">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.delta.Deltatable.sink--strategy-matrix" class="md-nav__link">
    <span class="md-ellipsis">
      Strategy Matrix:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.delta.Deltatable.sql" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;sql
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.errors" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;errors
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" errors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.connections.errors.ConnectionException" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ConnectionException
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.const" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;const
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.core" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;core
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" core">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.AsyncFlow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AsyncFlow
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" AsyncFlow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.AsyncFlow.log" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.AsyncFlow.logs" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.AsyncFlow.connect" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;connect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.AsyncFlow.df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.AsyncFlow.pull_df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;pull_df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.AsyncFlow.run" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.AsyncFlow.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.Flow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.Flow.df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.Flow.pull_df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;pull_df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.Flow.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.AsyncFlow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AsyncFlow
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" AsyncFlow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.AsyncFlow.log" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.AsyncFlow.logs" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.AsyncFlow.connect" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;connect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.AsyncFlow.df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.AsyncFlow.pull_df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;pull_df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.AsyncFlow.run" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.AsyncFlow.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.BaseStageHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BaseStageHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BaseStageHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.BaseStageHandler.execute" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.Flow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.Flow.df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.Flow.pull_df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;pull_df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.Flow.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.InternalStageHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;InternalStageHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" InternalStageHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.InternalStageHandler.execute" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.PipelineStageHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;PipelineStageHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" PipelineStageHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.PipelineStageHandler.execute" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.SQLStageHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SQLStageHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SQLStageHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.SQLStageHandler.execute" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.SinkStageHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SinkStageHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SinkStageHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.SinkStageHandler.execute" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.StageBlock" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;StageBlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" StageBlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.StageBlock.do" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;do
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.StageBlock.prepare" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;prepare
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.StageBlock.render" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;render
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.StageFactory" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;StageFactory
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" StageFactory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.StageFactory.get_handler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_handler
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.TapStageHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;TapStageHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" TapStageHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.TapStageHandler.execute" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.TransformStageHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;TransformStageHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" TransformStageHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.core.flow.TransformStageHandler.execute" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.errors" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;errors
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.internal" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;internal
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" internal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;browser
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" browser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DDB
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" DDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.connect" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;connect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.delta_scan" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;delta_scan
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.get" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.inject_secrets" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;inject_secrets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.parquet_scan" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;parquet_scan
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.read_csv" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;read_csv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.read_json" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;read_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.read_parquet" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;read_parquet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.register" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.sql" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;sql
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DDB.unregister" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;unregister
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DuckDBIORewriter" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DuckDBIORewriter
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" DuckDBIORewriter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.DuckDBIORewriter.rewrite" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;rewrite
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.Relation" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Relation
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Relation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.Relation.arrow" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;arrow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.Relation.df" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;df
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.RemoteObject" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RemoteObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" RemoteObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.RemoteObject.fetch" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;fetch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.browser.RemoteObject.upload" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;upload
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.duckdb" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;duckdb
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" duckdb">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.duckdb.Relation" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Relation
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Relation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.duckdb.Relation.raw" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;raw
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.macros" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;macros
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" macros">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.macros.Fn" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Fn
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Fn">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.macros.Fn.dt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;dt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.server" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;server
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.internal.server.DDB" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DDB
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.models" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;models
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BigQueryConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BigQueryConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConfig.credential_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;credential_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConfig.dataset" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConfig.project" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConfig.region" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;region
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BigQueryConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BigQueryConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConnection.data_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;data_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConnection.key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConnection.partition" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;partition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConnection.schema_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;schema_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BigQueryConnection.version" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BucketConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BucketConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BucketConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BucketConfig.bucket" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;bucket
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BucketConfig.data_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;data_prefix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BucketConfig.locator_wildcard" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;locator_wildcard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.BucketConfig.region" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;region
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.CSVConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;CSVConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ClickhouseConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ClickhouseConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ClickhouseConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ClickhouseConfig.blocksize" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;blocksize
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ClickhouseConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ClickhouseConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ClickhouseConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ClickhouseConnection.key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ClickhouseConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ClickhouseConnection.version" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Column" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Column
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Column">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Column.name" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Column.type" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Columns" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Columns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Connection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Connection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Connection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Connection.config" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Connection.create_statement" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;create_statement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Connection.fields" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Connection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Connection.params" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Connection.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ConnectionConfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ConnectionConfiguration
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ConnectionConfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ConnectionConfiguration.bigquery" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;bigquery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ConnectionConfiguration.clickhouse" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;clickhouse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ConnectionConfiguration.gs" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;gs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ConnectionConfiguration.llm" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;llm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ConnectionConfiguration.local" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;local
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ConnectionConfiguration.s3" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;s3
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.CustomConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;CustomConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" CustomConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.CustomConnection.classname" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;classname
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.CustomConnection.module" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;module
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.CustomConnection.params" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.CustomConnection.load" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.DeltatableConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DeltatableConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" DeltatableConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.DeltatableConnection.data_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;data_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.DeltatableConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.DeltatableConnection.optimize" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;optimize
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" optimize">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.DeltatableConnection.optimize--deltatable" class="md-nav__link">
    <span class="md-ellipsis">
      Deltatable
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.DeltatableConnection.partition" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;partition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.DeltatableConnection.schema_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;schema_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.DeltatableConnection.writer_features" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;writer_features
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Dimension" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Dimension
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Dimension">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Dimension.load" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.FileConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FileConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.FlowContext" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FlowContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.GSConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;GSConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" GSConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.GSConfig.credential_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;credential_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.GSConfig.hmac_key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;hmac_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.GSConfig.hmac_secret" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;hmac_secret
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.JSONConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;JSONConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.ParquetConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ParquetConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.PhysicalConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;PhysicalConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" PhysicalConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.PhysicalConnection.locator" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;locator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.PhysicalConnection.raw_dispatch" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;raw_dispatch
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.RestConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RestConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" RestConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.RestConnection.client" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.RestConnection.fields" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.RestConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.RestConnection.request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.RestConnection.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.S3Config" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;S3Config
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" S3Config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.S3Config.access_key_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;access_key_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.S3Config.secret_access_key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;secret_access_key
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.SQLGenConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SQLGenConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SQLGenConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.SQLGenConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.SQLGenConnection.variables" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;variables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Stage
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Stage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.connection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.context" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.explain" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;explain
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.fields" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" kind">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.kind--sink" class="md-nav__link">
    <span class="md-ellipsis">
      Sink
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.kind--pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      Pipeline
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.locator" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;locator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.log_level" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;log_level
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.name" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.on_error" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;on_error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.query" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.show" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;show
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.skip_if" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;skip_if
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.stages" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;stages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stage.throttle" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;throttle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stages" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Stages
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Stages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stages.enumerate_steps" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;enumerate_steps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stages.load" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Stages.steps" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.Variables" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Variables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.components" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;components
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.components.Column" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Column
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Column">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.components.Column.name" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.components.Column.type" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.components.Columns" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Columns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;configs
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" configs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BigQueryConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BigQueryConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BigQueryConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BigQueryConfig.credential_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;credential_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BigQueryConfig.dataset" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BigQueryConfig.project" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BigQueryConfig.region" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;region
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BucketConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BucketConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BucketConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BucketConfig.bucket" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;bucket
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BucketConfig.data_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;data_prefix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BucketConfig.locator_wildcard" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;locator_wildcard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.BucketConfig.region" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;region
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ClickhouseConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ClickhouseConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ClickhouseConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ClickhouseConfig.blocksize" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;blocksize
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ConnectionConfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ConnectionConfiguration
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ConnectionConfiguration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ConnectionConfiguration.bigquery" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;bigquery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ConnectionConfiguration.clickhouse" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;clickhouse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ConnectionConfiguration.gs" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;gs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ConnectionConfiguration.llm" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;llm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ConnectionConfiguration.local" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;local
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.ConnectionConfiguration.s3" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;s3
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.DatabaseConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DatabaseConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" DatabaseConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.DatabaseConfig.cluster" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;cluster
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.DatabaseConfig.database" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.DatabaseConfig.host" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;host
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.DatabaseConfig.password" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.DatabaseConfig.port" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;port
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.DatabaseConfig.username" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;username
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.GSConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;GSConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" GSConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.GSConfig.credential_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;credential_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.GSConfig.hmac_key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;hmac_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.GSConfig.hmac_secret" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;hmac_secret
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.S3Config" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;S3Config
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" S3Config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.S3Config.access_key_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;access_key_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.configs.S3Config.secret_access_key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;secret_access_key
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;connections
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" connections">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.BigQueryConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BigQueryConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BigQueryConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.BigQueryConnection.data_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;data_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.BigQueryConnection.key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.BigQueryConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.BigQueryConnection.partition" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;partition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.BigQueryConnection.schema_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;schema_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.BigQueryConnection.version" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.CSVConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;CSVConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.ClickhouseConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ClickhouseConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ClickhouseConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.ClickhouseConnection.key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.ClickhouseConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.ClickhouseConnection.version" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Connection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Connection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Connection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Connection.config" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Connection.create_statement" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;create_statement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Connection.fields" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Connection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Connection.params" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Connection.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.CustomConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;CustomConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" CustomConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.CustomConnection.classname" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;classname
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.CustomConnection.module" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;module
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.CustomConnection.params" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.CustomConnection.load" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.DeltatableConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DeltatableConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" DeltatableConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.DeltatableConnection.data_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;data_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.DeltatableConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.DeltatableConnection.optimize" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;optimize
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" optimize">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.DeltatableConnection.optimize--deltatable" class="md-nav__link">
    <span class="md-ellipsis">
      Deltatable
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.DeltatableConnection.partition" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;partition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.DeltatableConnection.schema_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;schema_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.DeltatableConnection.writer_features" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;writer_features
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Dimension" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Dimension
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Dimension">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.Dimension.load" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.FileConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FileConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.JSONConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;JSONConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.ParquetConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ParquetConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.PhysicalConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;PhysicalConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" PhysicalConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.PhysicalConnection.locator" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;locator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.PhysicalConnection.raw_dispatch" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;raw_dispatch
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.RestConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RestConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" RestConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.RestConnection.client" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.RestConnection.fields" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.RestConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.RestConnection.request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.RestConnection.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.SQLGenConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SQLGenConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SQLGenConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.SQLGenConnection.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.SQLGenConnection.variables" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;variables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.VariableConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;VariableConnection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.VersionedConnection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;VersionedConnection
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" VersionedConnection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.VersionedConnection.key" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.connections.VersionedConnection.version" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;core
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" core">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.FlowContext" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FlowContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Stage
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Stage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.connection" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.context" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.explain" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;explain
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.fields" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" kind">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.kind--sink" class="md-nav__link">
    <span class="md-ellipsis">
      Sink
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.kind--pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      Pipeline
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.locator" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;locator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.log_level" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;log_level
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.name" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.on_error" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;on_error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.query" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.show" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;show
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.show_schema" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;show_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.skip_if" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;skip_if
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.stages" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;stages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stage.throttle" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;throttle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stages" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Stages
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Stages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stages.enumerate_steps" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;enumerate_steps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stages.load" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Stages.steps" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.core.Variables" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Variables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.enums" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;enums
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" enums">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.enums.AuthType" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AuthType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.enums.ContentType" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ContentType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.enums.DataType" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DataType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.enums.LogLevel" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;LogLevel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.enums.ModelType" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ModelType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.enums.ParameterDisposition" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ParameterDisposition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.enums.RequestMethod" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RequestMethod
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;llm
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" llm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;LLMConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" LLMConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMConfig.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMConfig.model" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMConfig.proxy" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;proxy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMKind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;LLMKind
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" LLMKind">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMKind.MOCK" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;MOCK
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMKind.OPENAI" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;OPENAI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMProxy" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;LLMProxy
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" LLMProxy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMProxy.client" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.llm.LLMProxy.request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;request
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;rest
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" rest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.BasicHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BasicHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BasicHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.BasicHandler.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Paginator" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Paginator
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Paginator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Paginator.increment" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;increment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Paginator.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Paginator.page_param" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;page_param
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Paginator.page_size" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;page_size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Paginator.param_locator" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;param_locator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Paginator.throttle" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;throttle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Paginator.total_records" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;total_records
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Request
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Request">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.body" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;body
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" body">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.body--example-with-looping" class="md-nav__link">
    <span class="md-ellipsis">
      Example with looping
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.content_type" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;content_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;endpoint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.errorhandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;errorhandler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.initial_backoff" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;initial_backoff
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.max_retries" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;max_retries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.method" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.query" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.Request.response" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;response
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.ResponseHandlerTypes" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ResponseHandlerTypes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestAuth" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RestAuth
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" RestAuth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestAuth.method" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestAuth.values" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestAuth.coerce_to_stringdict" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;coerce_to_stringdict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestClientConfig" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RestClientConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" RestClientConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestClientConfig.base_url" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;base_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestClientConfig.timeout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;timeout
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestErrorHandler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RestErrorHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" RestErrorHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestErrorHandler.condition" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;condition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestErrorHandler.error_status_codes" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;error_status_codes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestErrorHandler.message" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;message
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestResponse" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RestResponse
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" RestResponse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestResponse.content_type" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;content_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.RestResponse.locator" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;locator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.StatePoller" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;StatePoller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" StatePoller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.StatePoller.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.StatePoller.ready_status" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;ready_status
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.URLPoller" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;URLPoller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" URLPoller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.URLPoller.kind" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kind
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ankaflow.models.rest.URLPoller.ready_status" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;ready_status
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ankaflow.tests" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;tests
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="ankaflow_1">AnkaFlow<a class="headerlink" href="#ankaflow_1" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<a id="ankaflow"></a>
    <div class="doc doc-contents first">










  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h2 id="ankaflow.__all__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">__all__</span>


<a href="#ankaflow.__all__" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;Flow&quot;</span><span class="p">,</span>
    <span class="s2">&quot;AsyncFlow&quot;</span><span class="p">,</span>
    <span class="s2">&quot;FlowControl&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Stages&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ConnectionConfiguration&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Variables&quot;</span><span class="p">,</span>
    <span class="s2">&quot;FlowContext&quot;</span><span class="p">,</span>
    <span class="s2">&quot;FlowRunError&quot;</span><span class="p">,</span>
    <span class="s2">&quot;FlowError&quot;</span><span class="p">,</span>
    <span class="s2">&quot;S3Config&quot;</span><span class="p">,</span>
    <span class="s2">&quot;GSConfig&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ClickhouseConfig&quot;</span><span class="p">,</span>
    <span class="s2">&quot;BigQueryConfig&quot;</span><span class="p">,</span>
    <span class="s2">&quot;BucketConfig&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>



<div class="doc doc-object doc-class">



<h2 id="ankaflow.AsyncFlow" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AsyncFlow</span>


<a href="#ankaflow.AsyncFlow" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">AsyncFlow</span><span class="p">(</span>
    <span class="n">defs</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.Stages)" href="#ankaflow.models.Stages">Stages</a></span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></span><span class="p">,</span>
    <span class="n">default_connection</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.ConnectionConfiguration)" href="#ankaflow.models.ConnectionConfiguration">ConnectionConfiguration</a></span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Variables (ankaflow.models.Variables)" href="#ankaflow.models.Variables">Variables</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n"><span title="logging.Logger">Logger</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">conn</span><span class="p">:</span> <span class="n"><span title="ankaflow.internal.DDB">DDB</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">flow_control</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            FlowControl (ankaflow.core.policy.FlowControl)" href="#ankaflow.FlowControl">FlowControl</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_context</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Controls the flow of data based on the pipeline definition.</p>
<p>The stages are run in the defined order and can either fetch data
from a source (tap), transform via SQL, or store to a sink.</p>



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>defs</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.Stages)" href="#ankaflow.models.Stages">Stages</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of stages to be processed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dynamic context for query templates.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default_connection</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.ConnectionConfiguration)" href="#ankaflow.models.ConnectionConfiguration">ConnectionConfiguration</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration passed
to underlying storage or database.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>variables</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            Variables (ankaflow.models.Variables)" href="#ankaflow.models.Variables">Variables</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Variables for tap or prepare.
Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>logger</code>
            </td>
            <td>
                  <code><span title="logging.Logger">Logger</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Logger for show() requests.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>conn</code>
            </td>
            <td>
                  <code><span title="ankaflow.internal.DDB">DDB</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Existing DuckDB connection. If not set, a new
connection is created.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>flow_control</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            FlowControl (ankaflow.core.policy.FlowControl)" href="#ankaflow.FlowControl">FlowControl</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flow control configuration.
Defaults to FlowControl().</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>log_context</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Log context passed to each stage.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">defs</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Stages</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">FlowContext</span><span class="p">,</span>
    <span class="n">default_connection</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Variables</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">conn</span><span class="p">:</span> <span class="s2">&quot;DDB&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">flow_control</span><span class="p">:</span> <span class="s2">&quot;FlowControl&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_context</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        defs (m.Stages): List of stages to be processed.</span>
<span class="sd">        context (m.FlowContext): Dynamic context for query templates.</span>
<span class="sd">        default_connection (m.ConnectionConfiguration): Configuration passed</span>
<span class="sd">            to underlying storage or database.</span>
<span class="sd">        variables (m.Variables, optional): Variables for tap or prepare.</span>
<span class="sd">            Defaults to {}.</span>
<span class="sd">        logger (logging.Logger, optional): Logger for show() requests.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        conn (DDB, optional): Existing DuckDB connection. If not set, a new</span>
<span class="sd">            connection is created.</span>
<span class="sd">        flow_control (FlowControl, optional): Flow control configuration.</span>
<span class="sd">            Defaults to FlowControl().</span>
<span class="sd">        log_context (str, optional): Log context passed to each stage.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">defs</span> <span class="o">=</span> <span class="n">defs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">Variables</span><span class="p">()</span> <span class="k">if</span> <span class="n">variables</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">variables</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lastname</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">FlowContext</span> <span class="o">=</span> <span class="n">context</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">conn_opts</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span> <span class="o">=</span> <span class="n">default_connection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logger</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">flow_control</span> <span class="o">=</span> <span class="n">flow_control</span> <span class="ow">or</span> <span class="n">FlowControl</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_context</span> <span class="o">=</span> <span class="n">log_context</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;DDB&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">conn</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.AsyncFlow.log" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">log</span>


<a href="#ankaflow.AsyncFlow.log" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">log</span><span class="p">:</span> <span class="n"><span title="logging.Logger">Logger</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the logger.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.AsyncFlow.logs" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">logs</span>


<a href="#ankaflow.AsyncFlow.logs" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logs</span><span class="p">:</span> <span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the log buffer.</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="ankaflow.AsyncFlow.connect" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">connect</span>


<a href="#ankaflow.AsyncFlow.connect" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">connect</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Connects to the underlying database if not already connected.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connects to the underlying database if not already connected.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">idb</span> <span class="o">=</span> <span class="k">await</span> <span class="n">DDB</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conn_opts</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ankaflow.AsyncFlow.df" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">df</span>


<a href="#ankaflow.AsyncFlow.df" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">df</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns a dataframe from the last stage.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>pd.DataFrame: Data from the last stage.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">df</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a dataframe from the last stage.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pd.DataFrame: Data from the last stage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastname</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">coro</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;SELECT * FROM &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lastname</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">coro</span><span class="o">.</span><span class="n">df</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ankaflow.AsyncFlow.pull_df" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">pull_df</span>


<a href="#ankaflow.AsyncFlow.pull_df" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">pull_df</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Convenience method to pull the final dataframe.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>pd.DataFrame: Data from the last stage.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">pull_df</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convenience method to pull the final dataframe.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pd.DataFrame: Data from the last stage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ankaflow.AsyncFlow.run" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">run</span>


<a href="#ankaflow.AsyncFlow.run" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">run</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            AsyncFlow (ankaflow.core.flow.AsyncFlow)" href="#ankaflow.core.flow.AsyncFlow">AsyncFlow</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Runs the pipeline stages.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>AsyncFlow</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            AsyncFlow (ankaflow.core.flow.AsyncFlow)" href="#ankaflow.core.flow.AsyncFlow">AsyncFlow</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Self instance after running the pipeline.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;AsyncFlow&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Runs the pipeline stages.</span>

<span class="sd">    Returns:</span>
<span class="sd">        AsyncFlow: Self instance after running the pipeline.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

    <span class="n">vars_info</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline called with variables:</span><span class="se">\n</span><span class="si">{</span><span class="n">vars_info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">defs</span><span class="o">.</span><span class="n">steps</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;header&quot;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">log_level</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">log_level</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="n">log_ctx</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">log_context</span><span class="si">}</span><span class="s2">]&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_context</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">kind</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">log_ctx</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">stage</span> <span class="o">=</span> <span class="n">StageBlock</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="p">,</span>  <span class="c1"># type: ignore[assignment]</span>
                <span class="n">step</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">conn_opts</span><span class="p">,</span>
                <span class="n">variables</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span>
                <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">,</span>
                <span class="n">prevous_stage</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lastname</span><span class="p">,</span>  <span class="c1"># type: ignore[assignment]</span>
                <span class="n">log_context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">log_context</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastname</span> <span class="o">=</span> <span class="k">await</span> <span class="n">stage</span><span class="o">.</span><span class="n">do</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastname</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">dd</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ex</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> in </span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">on_error</span> <span class="o">==</span> <span class="n">FlowControl</span><span class="o">.</span><span class="n">ON_ERROR_FAIL</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_control</span><span class="o">.</span><span class="n">on_error</span> <span class="o">==</span> <span class="n">FlowControl</span><span class="o">.</span><span class="n">ON_ERROR_FAIL</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Pipeline failed at &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="si">{</span><span class="n">dd</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="n">end</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Run duration: </span><span class="si">{</span><span class="n">end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="n">e</span><span class="o">.</span><span class="n">FlowRunError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Failed at &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="si">{</span><span class="n">dd</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="si">{</span><span class="n">dd</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">throttle</span> <span class="ow">and</span> <span class="n">step</span><span class="o">.</span><span class="n">throttle</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Flow throttling </span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">throttle</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">)</span>
            <span class="k">await</span> <span class="n">sleep</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">throttle</span><span class="p">)</span>
    <span class="n">end</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Run duration: </span><span class="si">{</span><span class="n">end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ankaflow.AsyncFlow.show_schema" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">show_schema</span>


<a href="#ankaflow.AsyncFlow.show_schema" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">show_schema</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="ankaflow.models.core.SchemaItem">SchemaItem</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns schemas for all supported stages.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="ankaflow.models.core.SchemaItem">SchemaItem</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>t.List[m.models.SchemaItem]: List of schema items.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">show_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">SchemaItem</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns schemas for all supported stages.</span>

<span class="sd">    Returns:</span>
<span class="sd">        t.List[m.models.SchemaItem]: List of schema items.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">SchemaItem</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">defs</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">db</span> <span class="o">=</span> <span class="n">StageBlock</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="p">,</span>
                <span class="n">step</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">conn_opts</span><span class="p">,</span>
                <span class="n">variables</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span>
                <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">,</span>
                <span class="n">prevous_stage</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lastname</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">st</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">show_schema</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">st</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">items</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">SchemaItem</span><span class="p">):</span>
                <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unexpected schema item type&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">raise</span>
    <span class="k">return</span> <span class="n">items</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ankaflow.BigQueryConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BigQueryConfig</span>


<a href="#ankaflow.BigQueryConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Configuration for accessing BigQuery datasets.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.BigQueryConfig.credential_file" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">credential_file</span>


<a href="#ankaflow.BigQueryConfig.credential_file" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">credential_file</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Path to service account JSON credentials for BigQuery access.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.BigQueryConfig.dataset" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">dataset</span>


<a href="#ankaflow.BigQueryConfig.dataset" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">dataset</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>BigQuery dataset name.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.BigQueryConfig.project" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">project</span>


<a href="#ankaflow.BigQueryConfig.project" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">project</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>GCP project ID containing the BigQuery dataset.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.BigQueryConfig.region" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">region</span>


<a href="#ankaflow.BigQueryConfig.region" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">region</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>BigQuery region (e.g., "us-central1").</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ankaflow.BucketConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BucketConfig</span>


<a href="#ankaflow.BucketConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>












  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.BucketConfig.bucket" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">bucket</span>


<a href="#ankaflow.BucketConfig.bucket" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">bucket</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Bucket name eg. <code>s3://my-bucket</code>
or local absolute path eg. <code>/data/path</code></p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.BucketConfig.data_prefix" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">data_prefix</span>


<a href="#ankaflow.BucketConfig.data_prefix" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">data_prefix</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Prefix for data files: <code>s3://my-bucket/&lt;prefix&gt;</code> or
<code>/data/path/&lt;prefix&gt;</code></p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.BucketConfig.locator_wildcard" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">locator_wildcard</span>


<a href="#ankaflow.BucketConfig.locator_wildcard" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">locator_wildcard</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.Tuple">Tuple</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Regular expression and wildcard to modify <code>locator</code>.
Useful in cases when you sink data to <code>data-YYYY.parquet</code>
but want to read <code>data-*.parquet</code>.
Provide tuple with patten as first element and replacement
as second one. Example:</p>
<pre><code>('-\d{4}-', '*')
</code></pre>
<p>This will create wildcard for <code>data-YYYY-base.parquet</code> as
<code>data*base.parquet</code>.</p>
<table>
<thead>
<tr>
<th>Wildcard</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>*</code></td>
<td>matches any number of any characters (including none)</td>
</tr>
<tr>
<td><code>**</code></td>
<td>matches any number of subdirectories (including none)</td>
</tr>
<tr>
<td><code>[abc]</code></td>
<td>matches one character given in the bracket</td>
</tr>
<tr>
<td><code>[a-z]</code></td>
<td>matches one character from the range given in the bracket</td>
</tr>
</tbody>
</table>
<p>Wildcard is automatically applied in tap and show_schema operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.BucketConfig.region" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">region</span>


<a href="#ankaflow.BucketConfig.region" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">region</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ankaflow.ClickhouseConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ClickhouseConfig</span>


<a href="#ankaflow.ClickhouseConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            DatabaseConfig (ankaflow.models.configs.DatabaseConfig)" href="#ankaflow.models.configs.DatabaseConfig">DatabaseConfig</a></code></p>


        <p>Configuration for ClickHouse database, extending generic SQL config.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.ClickhouseConfig.blocksize" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">blocksize</span>


<a href="#ankaflow.ClickhouseConfig.blocksize" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">blocksize</span><span class="p">:</span> <span class="n"><span title="int">int</span></span> <span class="o">=</span> <span class="mi">50000</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Number of rows to process per block for batch operations.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ankaflow.ConnectionConfiguration" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ConnectionConfiguration</span>


<a href="#ankaflow.ConnectionConfiguration" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Top-level container for all connection configurations in a pipeline.</p>
<p>Includes default configuration blocks for supported sources and sinks like:
- Local file systems
- S3 and GCS buckets
- BigQuery datasets
- ClickHouse databases</p>
<p>These can be customized per pipeline or extended with new sources.</p>


<details class="example" open>
  <summary>Example</summary>
  <p>To support MySQL, you can define a new model like this:</p>
<pre><code class="language-python">class MySQLConfig(DatabaseConfig):
    pass  # You can add MySQL-specific fields here if needed

class ExtendedConnectionConfiguration(ConnectionConfiguration):
    mysql: MySQLConfig = PydanticField(default_factory=MySQLConfig)
</code></pre>
<p>This will allow you to specify MySQL connection settings in your YAML:</p>
<pre><code class="language-yaml">connection:
  kind: MySQL
  config:
    host: localhost
    port: 3306
    database: sales
    username: admin
    password: secret
</code></pre>
</details>










  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.ConnectionConfiguration.bigquery" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">bigquery</span>


<a href="#ankaflow.ConnectionConfiguration.bigquery" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">bigquery</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            BigQueryConfig (ankaflow.models.configs.BigQueryConfig)" href="#ankaflow.models.configs.BigQueryConfig">BigQueryConfig</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span>
    <span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            BigQueryConfig (ankaflow.models.configs.BigQueryConfig)" href="#ankaflow.models.configs.BigQueryConfig">BigQueryConfig</a></span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>BigQuery connection configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.ConnectionConfiguration.clickhouse" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">clickhouse</span>


<a href="#ankaflow.ConnectionConfiguration.clickhouse" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">clickhouse</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            ClickhouseConfig (ankaflow.models.configs.ClickhouseConfig)" href="#ankaflow.models.configs.ClickhouseConfig">ClickhouseConfig</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span>
    <span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            ClickhouseConfig (ankaflow.models.configs.ClickhouseConfig)" href="#ankaflow.models.configs.ClickhouseConfig">ClickhouseConfig</a></span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Language model configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.ConnectionConfiguration.gs" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">gs</span>


<a href="#ankaflow.ConnectionConfiguration.gs" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">gs</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            GSConfig (ankaflow.models.configs.GSConfig)" href="#ankaflow.models.configs.GSConfig">GSConfig</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            GSConfig (ankaflow.models.configs.GSConfig)" href="#ankaflow.models.configs.GSConfig">GSConfig</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Google Cloud Storage configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.ConnectionConfiguration.llm" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">llm</span>


<a href="#ankaflow.ConnectionConfiguration.llm" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">llm</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            LLMConfig (ankaflow.models.llm.LLMConfig)" href="#ankaflow.models.llm.LLMConfig">LLMConfig</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            LLMConfig (ankaflow.models.llm.LLMConfig)" href="#ankaflow.models.llm.LLMConfig">LLMConfig</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Language model configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.ConnectionConfiguration.local" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">local</span>


<a href="#ankaflow.ConnectionConfiguration.local" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">local</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            BucketConfig (ankaflow.models.configs.BucketConfig)" href="#ankaflow.models.configs.BucketConfig">BucketConfig</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            BucketConfig (ankaflow.models.configs.BucketConfig)" href="#ankaflow.models.configs.BucketConfig">BucketConfig</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Local file system configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.ConnectionConfiguration.s3" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">s3</span>


<a href="#ankaflow.ConnectionConfiguration.s3" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">s3</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            S3Config (ankaflow.models.configs.S3Config)" href="#ankaflow.models.configs.S3Config">S3Config</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            S3Config (ankaflow.models.configs.S3Config)" href="#ankaflow.models.configs.S3Config">S3Config</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>S3 cloud storage configuration.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ankaflow.Flow" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Flow</span>


<a href="#ankaflow.Flow" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">Flow</span><span class="p">(</span>
    <span class="n">defs</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.Stages)" href="#ankaflow.models.Stages">Stages</a></span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></span><span class="p">,</span>
    <span class="n">default_connection</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.ConnectionConfiguration)" href="#ankaflow.models.ConnectionConfiguration">ConnectionConfiguration</a></span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Variables (ankaflow.models.Variables)" href="#ankaflow.models.Variables">Variables</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n"><span title="logging.Logger">Logger</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">conn</span><span class="p">:</span> <span class="n"><span title="duckdb.DuckDBPyConnection">DuckDBPyConnection</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">flow_control</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            FlowControl (ankaflow.core.policy.FlowControl)" href="#ankaflow.FlowControl">FlowControl</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_context</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Flow controls the flow of data based on the pipeline definition.
The stages are run in the defined order and can either fetch data
from source (tap), transform via SQL statement, or store to sink.</p>
<p>This is the sync version and should be used in most cases.</p>



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>defs</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.Stages)" href="#ankaflow.models.Stages">Stages</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of stages to be processed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dynamic context that can be used
in query templates.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default_connection</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.ConnectionConfiguration)" href="#ankaflow.models.ConnectionConfiguration">ConnectionConfiguration</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration
passed to underlying storage or database
(s3 bucket, database connection string &amp;c).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>variables</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Any variables that can be referenced
by a tap or prepare. Ony data structures that can be passed
to pl.from_dicts() are supported in taps. Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>logger</code>
            </td>
            <td>
                  <code><span title="Logger">Logger</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If set then show() requests are logged.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>conn</code>
            </td>
            <td>
                  <code><span title="DuckDBPyConnection">DuckDBPyConnection</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Existing DuckDB connection. If not set
new connection will be created.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">defs</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Stages</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">FlowContext</span><span class="p">,</span>
    <span class="n">default_connection</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Variables</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">conn</span><span class="p">:</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyConnection</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">flow_control</span><span class="p">:</span> <span class="n">FlowControl</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_context</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        defs (Stages): List of stages to be processed.</span>
<span class="sd">        context (FlowContext): dynamic context that can be used</span>
<span class="sd">            in query templates.</span>
<span class="sd">        default_connection (ConnectionConfiguration): Configuration</span>
<span class="sd">            passed to underlying storage or database</span>
<span class="sd">            (s3 bucket, database connection string &amp;c).</span>
<span class="sd">        variables (dict, optional): Any variables that can be referenced</span>
<span class="sd">            by a tap or prepare. Ony data structures that can be passed</span>
<span class="sd">            to pl.from_dicts() are supported in taps. Defaults to {}.</span>
<span class="sd">        logger (Logger, optional): If set then show() requests are logged.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        conn (DuckDBPyConnection): Existing DuckDB connection. If not set</span>
<span class="sd">            new connection will be created.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">flow</span> <span class="o">=</span> <span class="n">AsyncFlow</span><span class="p">(</span>
        <span class="n">defs</span><span class="p">,</span>
        <span class="n">context</span><span class="p">,</span>
        <span class="n">default_connection</span><span class="p">,</span>
        <span class="n">variables</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">Variables</span><span class="p">()</span> <span class="k">if</span> <span class="n">variables</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">variables</span><span class="p">,</span>
        <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">,</span>
        <span class="n">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">,</span>
        <span class="n">flow_control</span><span class="o">=</span><span class="n">flow_control</span> <span class="ow">or</span> <span class="n">FlowControl</span><span class="p">(),</span>
        <span class="n">log_context</span><span class="o">=</span><span class="n">log_context</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="ankaflow.Flow.df" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">df</span>


<a href="#ankaflow.Flow.df" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">df</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns dataframe from the last stage</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">df</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns dataframe from the last stage&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">asyncio_run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flow</span><span class="o">.</span><span class="n">df</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ankaflow.Flow.pull_df" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">pull_df</span>


<a href="#ankaflow.Flow.pull_df" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">pull_df</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Convenience method to pull final dataframe</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>pl.DataFrame: data from last stage</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">pull_df</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convenience method to pull final dataframe</span>

<span class="sd">    Returns:</span>
<span class="sd">        pl.DataFrame: data from last stage</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">asyncio_run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flow</span><span class="o">.</span><span class="n">run</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">asyncio_run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flow</span><span class="o">.</span><span class="n">df</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ankaflow.Flow.show_schema" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">show_schema</span>


<a href="#ankaflow.Flow.show_schema" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">show_schema</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="ankaflow.models.core.SchemaItem">SchemaItem</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns schemas of all supported stages</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">show_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">SchemaItem</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns schemas of all supported stages</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">asyncio_run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flow</span><span class="o">.</span><span class="n">show_schema</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ankaflow.FlowContext" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">FlowContext</span>


<a href="#ankaflow.FlowContext" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="ankaflow.common.types.ImmutableMap">ImmutableMap</span></code></p>


        <p>Context dictionary can be used to supply arbitrary data
to pipeline that can be referenced in templates much
much like variables with the difference that they cannot
be modified at runtime.</p>
<p>Context can be initiated via dictionary:</p>
<p><code>context = FlowContext(**{'foo':'Bar'}])</code></p>
<p>Items can be reference using both bracket and dot notation:</p>
<p><code>context.foo == context['foo'] == 'Bar'</code></p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ankaflow.FlowControl" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">FlowControl</span>


<a href="#ankaflow.FlowControl" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">FlowControl</span><span class="p">(</span><span class="n">on_error</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;fail&#39;</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">









                  <details class="quote">
                    <summary>Source code in <code>ankaflow/core/policy.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">on_error</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">on_error</span> <span class="o">=</span> <span class="n">on_error</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ankaflow.FlowError" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">FlowError</span>


<a href="#ankaflow.FlowError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>










    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ankaflow.FlowRunError" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">FlowRunError</span>


<a href="#ankaflow.FlowRunError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            FlowError (ankaflow.errors.FlowError)" href="#ankaflow.FlowError">FlowError</a></code></p>










    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ankaflow.GSConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">GSConfig</span>


<a href="#ankaflow.GSConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            BucketConfig (ankaflow.models.configs.BucketConfig)" href="#ankaflow.models.configs.BucketConfig">BucketConfig</a></code></p>


        <p>Google Cloud Storage (GCS) configuration.</p>
<ul>
<li>HMAC credentials allow reading/writing Parquet, JSON, and CSV.</li>
<li>Delta table writes require a full service account credential file.</li>
</ul>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.GSConfig.credential_file" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">credential_file</span>


<a href="#ankaflow.GSConfig.credential_file" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">credential_file</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Path to GCP service account credential file (JSON).
Required for certain write operations (e.g., Delta tables).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.GSConfig.hmac_key" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">hmac_key</span>


<a href="#ankaflow.GSConfig.hmac_key" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">hmac_key</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>GCS HMAC key ID for authenticated access.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.GSConfig.hmac_secret" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">hmac_secret</span>


<a href="#ankaflow.GSConfig.hmac_secret" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">hmac_secret</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>GCS HMAC secret for authenticated access.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ankaflow.S3Config" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">S3Config</span>


<a href="#ankaflow.S3Config" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            BucketConfig (ankaflow.models.configs.BucketConfig)" href="#ankaflow.models.configs.BucketConfig">BucketConfig</a></code></p>


        <p>S3-specific bucket configuration including optional authentication.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.S3Config.access_key_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">access_key_id</span>


<a href="#ankaflow.S3Config.access_key_id" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">access_key_id</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>AWS access key ID for private S3 access.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="ankaflow.S3Config.secret_access_key" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">secret_access_key</span>


<a href="#ankaflow.S3Config.secret_access_key" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">secret_access_key</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>AWS secret access key for private S3 access.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ankaflow.Stages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Stages</span>


<a href="#ankaflow.Stages" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.RootModel">RootModel</span>[<span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a>]]</code></p>


        <p>A sequence of processing stages in a data pipeline.</p>
<p>Each <code>Datablock</code> in <code>root</code> represents one discrete step or transformation
in an end-to-end business workflow (e.g., tap, transform, sink, validate).</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="ankaflow.Stages.root">root</span></code></td>
            <td>
                  <code><span title="List">List</span>[<span title="Datablock">Datablock</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Ordered list of pipeline stages to execute.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="ankaflow.Stages.enumerate_steps" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">enumerate_steps</span>


<a href="#ankaflow.Stages.enumerate_steps" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">enumerate_steps</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Iterator">Iterator</span></span><span class="p">[</span><span class="n"><span title="tuple">tuple</span></span><span class="p">[</span><span class="n"><span title="int">int</span></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a></span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Yield each stage along with its 0-based position.</p>
<p>Use this when you need both the stage and its index for logging,
metrics, or conditional branching.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Iterator">Iterator</span>[<span title="tuple">tuple</span>[<span title="int">int</span>, <a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Iterator[Tuple[int, Datablock]]: Pairs of (index, stage).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/models/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">enumerate_steps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Stage</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Yield each stage along with its 0-based position.</span>

<span class="sd">    Use this when you need both the stage and its index for logging,</span>
<span class="sd">    metrics, or conditional branching.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Iterator[Tuple[int, Datablock]]: Pairs of (index, stage).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ankaflow.Stages.load" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">load</span>


<a href="#ankaflow.Stages.load" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load</span><span class="p">(</span><span class="n">source</span><span class="p">:</span> <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="pathlib.Path">Path</span></span><span class="p">,</span> <span class="n"><span title="typing.IO">IO</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">],</span> <span class="n"><span title="ankaflow.models.core.Loadable">Loadable</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.core.Stages)" href="#ankaflow.models.core.Stages">Stages</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Load a pipeline from YAML (path, YAML-string, file-like or Loadable).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>source</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="pathlib.Path">Path</span> | <span title="IO">IO</span>[<span title="str">str</span>] | <span title="ankaflow.models.core.Loadable">Loadable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>Path to a .yaml file</li>
<li>Raw YAML content</li>
<li>File-like object returning YAML</li>
<li>Any object with a <code>.load()</code> method returning Python data</li>
</ul>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Stages</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.core.Stages)" href="#ankaflow.models.core.Stages">Stages</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a validated <code>Stages</code> instance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/models/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">source</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">IO</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Loadable</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Stages&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a pipeline from YAML (path, YAML-string, file-like or Loadable).</span>

<span class="sd">    Args:</span>
<span class="sd">        source (str | Path | IO[str] | Loadable):</span>
<span class="sd">            - Path to a .yaml file</span>
<span class="sd">            - Raw YAML content</span>
<span class="sd">            - File-like object returning YAML</span>
<span class="sd">            - Any object with a `.load()` method returning Python data</span>

<span class="sd">    Returns:</span>
<span class="sd">        Stages: a validated `Stages` instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># 1) If it’s a loader-object, pull Python data directly</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">Loadable</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># 2) Read text for YAML parsing:</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">):</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">IO</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">source</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

        <span class="c1"># 3) First, try parsing as raw YAML</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">yaml</span><span class="o">.</span><span class="n">YAMLError</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># 4) Only if that parse returned a `str` we treat it as a filename</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">OSError</span><span class="p">,</span> <span class="n">yaml</span><span class="o">.</span><span class="n">YAMLError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Could not interpret </span><span class="si">{</span><span class="n">data</span><span class="si">!r}</span><span class="s2"> as YAML or file path&quot;</span>
                <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="c1"># 5) Validate final shape</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Expected a list of pipeline stages, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="c1"># 5) Finally, validate into our model</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ankaflow.Stages.steps" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">steps</span>


<a href="#ankaflow.Stages.steps" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">steps</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Iterator">Iterator</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Yield each stage in execution order.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Iterator">Iterator</span>[<a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Iterator[Datablock]: An iterator over the stages,</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Iterator">Iterator</span>[<a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>from first to last.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/models/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">steps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="n">Stage</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Yield each stage in execution order.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Iterator[Datablock]: An iterator over the stages,</span>
<span class="sd">        from first to last.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ankaflow.Variables" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Variables</span>


<a href="#ankaflow.Variables" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="dict">dict</span></code></p>


        <p>Variables is a <code>dict</code>-based collection
storing arbitrary data under keys. Variable can be populated via:</p>
<ul>
<li>Dictionary passed to pipeline:
  <code>Flow(defs, context, variables={'foo': 'bar'})</code></li>
<li>Sink operation:<pre><code>- kind: sink

    name: my_sink

    connection:

        kind: Variable

        locator: variable_name
</code></pre>
</li>
</ul>
<p>This step will place a list of records from preceding step in
  variables as <code>{'variable_name': t.List[dict]}</code></p>
<p>In most cases sainking to variable is not needed as all preceding stages
in a pipeline can be referenced via <code>name</code>. Sinking to variable is
useful when you need to share data with subpipeline.</p>
<p>Special variable is <code>loop_control</code> which is populated
dynamically from previous step and current stage type is pipeline.
In case previous step generates multiple records then the new pipeline
is called for each record, and control variable holds a <code>dict</code>
representing the current record.</p>









    </div>

</div>



<div class="doc doc-object doc-module">



<h2 id="ankaflow.api" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">api</span>


<a href="#ankaflow.api" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="ankaflow.api.API" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">API</span>


<a href="#ankaflow.api.API" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">












  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="ankaflow.api.API.dt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">dt</span>


<a href="#ankaflow.api.API.dt" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">dt</span><span class="p">(</span>
    <span class="n">datelike</span><span class="p">:</span> <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span>
        <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="ankaflow.api.API.int">int</span></span><span class="p">,</span> <span class="n"><span title="float">float</span></span><span class="p">,</span> <span class="n"><span title="datetime.date">date</span></span><span class="p">,</span> <span class="n"><span title="datetime.datetime">datetime</span></span><span class="p">,</span> <span class="n"><span title="arrow.Arrow">Arrow</span></span><span class="p">,</span> <span class="kc">None</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">tz</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">format</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">default</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Attempts to convert input object into Arrow.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tz</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>IANA timezone string If . Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>format</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If set use this format to parse input.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Use default timestamp if first attempt
fails. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Arrow</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Arrow object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">dt</span><span class="p">(</span>
    <span class="n">datelike</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">arrow</span><span class="o">.</span><span class="n">Arrow</span><span class="p">,</span> <span class="kc">None</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">tz</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">default</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Attempts to convert input object into Arrow.</span>

<span class="sd">    Args:</span>
<span class="sd">        datelike (t.Union[str, int, float, date, datetime, arrow.Arrow],</span>
<span class="sd">            optional): Object to be evaluated to Arrow. Defaults to None.</span>
<span class="sd">        tz (str, optional): IANA timezone string If . Defaults to None.</span>
<span class="sd">        format (str, optional): If set use this format to parse input.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        default (str, optional): Use default timestamp if first attempt</span>
<span class="sd">            fails. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Arrow: Arrow object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Handle various return types:</span>
    <span class="c1"># nan - when table exists but not data</span>
    <span class="c1"># nanosecond timestamp in bigquery</span>
    <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">datelike</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
        <span class="n">datelike</span> <span class="o">=</span> <span class="n">default</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">datelike</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">datelike</span> <span class="o">&gt;</span> <span class="mi">9999999999</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">datelike</span><span class="p">))</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">datelike</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">format</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">datelike</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">datelike</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">default</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">default</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span>
    <span class="k">if</span> <span class="n">tz</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="ankaflow.api.API.error" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">error</span>


<a href="#ankaflow.api.API.error" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">error</span><span class="p">(</span><span class="n">expression</span><span class="p">:</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Any">Any</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Raises an exception if input expression evaluates
to True.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>expression</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Expression to be evaluetd</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>message</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Message to include in exception</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ankaflow.api.UserGeneratedError">UserGeneratedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>t.Any: Expression</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">error</span><span class="p">(</span><span class="n">expression</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Raises an exception if input expression evaluates</span>
<span class="sd">    to True.</span>

<span class="sd">    Args:</span>
<span class="sd">        expression (t.Any): Expression to be evaluetd</span>
<span class="sd">        message (str): Message to include in exception</span>

<span class="sd">    Raises:</span>
<span class="sd">        UserGeneratedError: _description_</span>

<span class="sd">    Returns:</span>
<span class="sd">        t.Any: Expression</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">expression</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">UserGeneratedError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">expression</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="ankaflow.api.API.look" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">look</span>


<a href="#ankaflow.api.API.look" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">look</span><span class="p">(</span>
    <span class="n">lookup</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="n"><span title="typing.Any">Any</span></span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extracts value from given structure, or default value
if requested value not found.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lookup</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Lookup query</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Iterable object</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Default value to return.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>t.Union[str, None]: <em>description</em></p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">look</span><span class="p">(</span>
    <span class="n">lookup</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts value from given structure, or default value</span>
<span class="sd">    if requested value not found.</span>

<span class="sd">    Args:</span>
<span class="sd">        lookup (str): Lookup query</span>
<span class="sd">        data (t.Any): Iterable object</span>
<span class="sd">        default (t.Any, optional): Default value to return.</span>
<span class="sd">            Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        t.Union[str, None]: _description_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">found</span> <span class="o">=</span> <span class="n">jmespath</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">lookup</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">found</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">default</span>
    <span class="k">return</span> <span class="n">found</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="ankaflow.api.API.peek" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">peek</span>


<a href="#ankaflow.api.API.peek" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">peek</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns information about value type:
module.Class
Useful for debugging data obtained from
remote sources.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Any value</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><em>description</em></p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">peek</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns information about value type:</span>
<span class="sd">    module.Class</span>
<span class="sd">    Useful for debugging data obtained from</span>
<span class="sd">    remote sources.</span>

<span class="sd">    Args:</span>
<span class="sd">        value (Any): Any value</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: _description_</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__module__</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">m</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="ankaflow.api.API.setvariable" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">setvariable</span>


<a href="#ankaflow.api.API.setvariable" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">setvariable</span><span class="p">(</span><span class="n">collection</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Any">Any</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Attempts to assign value to a dictionary under the given key.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>collection</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary to use e.g. variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Key to store thalue to be storese value under</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>V</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>t.Any: Original value</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">setvariable</span><span class="p">(</span><span class="n">collection</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Attempts to assign value to a dictionary under the given key.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection (dict): Dictionary to use e.g. variables</span>
<span class="sd">        key (str): Key to store thalue to be storese value under</span>
<span class="sd">        value (t.Any): V</span>

<span class="sd">    Returns:</span>
<span class="sd">        t.Any: Original value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">collection</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="ankaflow.api.API.sqltuple" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">sqltuple</span>


<a href="#ankaflow.api.API.sqltuple" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">sqltuple</span><span class="p">(</span><span class="n">iterable</span><span class="p">:</span> <span class="n"><span title="typing.Iterable">Iterable</span></span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns SQL tuple literal from given iterable.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>iterable</code>
            </td>
            <td>
                  <code><span title="Iterable">Iterable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Any iterable.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>mode</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>"string"|"number". Defaults to "string".</p>
              </div>
            </td>
            <td>
                  <code>&#39;string&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="NotImplementedError">NotImplementedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>When unsupported mode is used</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SQL tuple literal</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">sqltuple</span><span class="p">(</span><span class="n">iterable</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Iterable</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;string&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns SQL tuple literal from given iterable.</span>

<span class="sd">    Args:</span>
<span class="sd">        iterable (Iterable): Any iterable.</span>
<span class="sd">        mode (str, optional): &quot;string&quot;|&quot;number&quot;. Defaults to &quot;string&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        NotImplementedError: When unsupported mode is used</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: SQL tuple literal</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;string&quot;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;&#39;,&#39;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;(&#39;</span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&#39;)&quot;</span>
    <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;number&quot;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;&#39;,&#39;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;(&#39;</span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&#39;)&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid mode: </span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="ankaflow.cli" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">cli</span>


<a href="#ankaflow.cli" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">










  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="ankaflow.cli.resolve_yaml_path" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">resolve_yaml_path</span>


<a href="#ankaflow.cli.resolve_yaml_path" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">resolve_yaml_path</span><span class="p">(</span><span class="n">path_arg</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="pathlib.Path">Path</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Resolve YAML path, remapping 'DEMO' to a relative demo file path.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/cli.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">resolve_yaml_path</span><span class="p">(</span><span class="n">path_arg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Resolve YAML path, remapping &#39;DEMO&#39; to a relative demo file path.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">path_arg</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;DEMO&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;yaml&quot;</span> <span class="o">/</span> <span class="s2">&quot;example.yaml&quot;</span>
    <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">path_arg</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="ankaflow.connections" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">connections</span>


<a href="#ankaflow.connections" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">










  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="ankaflow.connections.load_connection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">load_connection</span>


<a href="#ankaflow.connections.load_connection" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load_connection</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">:</span> <span class="n"><span title="typing.Type">Type</span></span><span class="p">[</span>
        <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span>
            <span class="n"><a class="autorefs autorefs-internal" title="            Connection (ankaflow.models.Connection)" href="#ankaflow.models.Connection">Connection</a></span><span class="p">,</span>
            <span class="n"><a class="autorefs autorefs-internal" title="            RestConnection (ankaflow.models.RestConnection)" href="#ankaflow.models.RestConnection">RestConnection</a></span><span class="p">,</span>
            <span class="n"><a class="autorefs autorefs-internal" title="            CustomConnection (ankaflow.models.CustomConnection)" href="#ankaflow.models.CustomConnection">CustomConnection</a></span><span class="p">,</span>
            <span class="n"><a class="autorefs autorefs-internal" title="            Dimension (ankaflow.models.Dimension)" href="#ankaflow.models.Dimension">Dimension</a></span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Type">Type</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Connection (ankaflow.connections.connection.Connection)" href="#ankaflow.connections.connection.Connection">Connection</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Load built-in connection or custom connection from module</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Connection name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>module</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If set then try to load from
given module. Defaults to None i.e. built-in connection.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/__init__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_connection</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span>
        <span class="n">t</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">Connection</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">RestConnection</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">CustomConnection</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">Dimension</span><span class="p">]</span>
    <span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">Connection</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load built-in connection or custom connection from module</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): Connection name</span>
<span class="sd">        module (str, optional): If set then try to load from</span>
<span class="sd">            given module. Defaults to None i.e. built-in connection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mth</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">mth</span><span class="p">):</span>
            <span class="n">loaded</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>  <span class="c1"># type: ignore</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">loaded</span><span class="p">,</span> <span class="n">Connection</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> is not a subclass of Connection&quot;</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="n">loaded</span>

        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">current_module</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">kind</span><span class="p">)</span>

    <span class="k">except</span> <span class="p">(</span><span class="ne">ImportError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NoConnectionError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Connection &#39;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">kind</span><span class="si">}</span><span class="s2">&#39; unavailable: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>


<div class="doc doc-object doc-module">



<h3 id="ankaflow.connections.bigquery" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">bigquery</span>


<a href="#ankaflow.connections.bigquery" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="ankaflow.connections.bigquery.BigQuery" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BigQuery</span>


<a href="#ankaflow.connections.bigquery.BigQuery" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">BigQuery</span><span class="p">(</span>
    <span class="n">duck</span><span class="p">:</span> <span class="n"><span title="ankaflow.internal.DDB">DDB</span></span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
    <span class="n">connection</span><span class="p">:</span> <span class="n"><span title="ankaflow.connections.connection.UnionConnection">UnionConnection</span></span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Variables (ankaflow.models.Variables)" href="#ankaflow.models.Variables">Variables</a></span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n"><span title="logging.Logger">Logger</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            Connection (ankaflow.connections.connection.Connection)" href="#ankaflow.connections.connection.Connection">Connection</a></code></p>









                  <details class="quote">
                    <summary>Source code in <code>ankaflow/connections/connection.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">duck</span><span class="p">:</span> <span class="n">DDB</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">connection</span><span class="p">:</span> <span class="n">UnionConnection</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">FlowContext</span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Variables</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># type: ignore[assignment]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">duck</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">fields</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span>
        <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span><span class="p">,</span> <span class="n">connection</span><span class="o">.</span><span class="n">config</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">conn</span> <span class="o">=</span> <span class="n">connection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span> <span class="o">=</span> <span class="n">context</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">variables</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logger</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">locator</span> <span class="o">=</span> <span class="n">Locator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">)</span>  <span class="c1"># type: ignore[assignment]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">schema_</span> <span class="o">=</span> <span class="n">Schema</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">logger</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">NullHandler</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.bigquery.BigQuery.create_dataset" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">create_dataset</span>


<a href="#ankaflow.connections.bigquery.BigQuery.create_dataset" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_dataset</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Creates dataset if it does not exist.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/bigquery.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates dataset if it does not exist.&quot;&quot;&quot;</span>
    <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_client</span><span class="p">()</span>
    <span class="n">dataset_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="o">.</span><span class="n">bigquery</span><span class="o">.</span><span class="n">project</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="o">.</span><span class="n">bigquery</span><span class="o">.</span><span class="n">dataset</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="o">.</span><span class="n">bigquery</span><span class="o">.</span><span class="n">region</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">location</span><span class="p">:</span>
            <span class="n">dataset</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">location</span>

        <span class="n">client</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Created dataset `</span><span class="si">{</span><span class="n">dataset_id</span><span class="si">}</span><span class="s2">` in `</span><span class="si">{</span><span class="n">location</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;default&#39;</span><span class="si">}</span><span class="s2">` region.&quot;</span>  <span class="c1"># noqa:E501</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="n">gex</span><span class="o">.</span><span class="n">Conflict</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Dataset `</span><span class="si">{</span><span class="n">dataset_id</span><span class="si">}</span><span class="s2">` already exists.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to create dataset `</span><span class="si">{</span><span class="n">dataset_id</span><span class="si">}</span><span class="s2">`: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.bigquery.BigQuery.init" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">init</span>


<a href="#ankaflow.connections.bigquery.BigQuery.init" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">init</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initializes internal configs and client.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/bigquery.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes internal configs and client.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">conn</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">BigQueryConnection</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">queryconfig</span> <span class="o">=</span> <span class="n">QueryJobConfig</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">loadconfig</span> <span class="o">=</span> <span class="n">LoadJobConfig</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_setup_configs</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.bigquery.BigQuery.locate" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">locate</span>


<a href="#ankaflow.connections.bigquery.BigQuery.locate" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">locate</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">use_wildcard</span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the fully qualified BigQuery table name using dot notation.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/bigquery.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">locate</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">use_wildcard</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the fully qualified BigQuery table name using dot notation.&quot;&quot;&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">locator</span>

    <span class="c1"># Normalize identifiers (remove quotes/backticks)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_bq_identifier</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="n">dataset</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_bq_identifier</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="o">.</span><span class="n">bigquery</span><span class="o">.</span><span class="n">dataset</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="o">.</span><span class="n">bigquery</span><span class="o">.</span><span class="n">dataset</span>
        <span class="k">else</span> <span class="kc">None</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">dataset</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dataset</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">name</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.bigquery.BigQuery.show_schema" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">show_schema</span>


<a href="#ankaflow.connections.bigquery.BigQuery.show_schema" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">show_schema</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            Columns (ankaflow.models.Columns)" href="#ankaflow.models.Columns">Columns</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Infers runtime schema from BigQuery data (via DuckDB) and returns as Fields.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/bigquery.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">show_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">m</span><span class="o">.</span><span class="n">Columns</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Infers runtime schema from BigQuery data (via DuckDB) and returns as Fields.&quot;&quot;&quot;</span>  <span class="c1"># noqa:E501</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema_</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">CatalogException</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="c1"># go to source</span>
    <span class="n">tmp_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;schema_df_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Step 1: Fetch 1 row from BigQuery</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">parse_one</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SELECT * FROM </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">locate</span><span class="p">()</span><span class="si">}</span><span class="s2"> LIMIT 1&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span>
            <span class="n">dialect</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dialect</span>
        <span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute_query_to_dataframe</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

        <span class="c1"># Step 2: Register in DuckDB</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">tmp_name</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>

        <span class="c1"># Step 3: Return inferred schema as m.Fields</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema_</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">tmp_name</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to infer schema: </span><span class="si">{</span><span class="n">err</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema_</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>

    <span class="k">finally</span><span class="p">:</span>
        <span class="c1"># Step 4: Always unregister temp table</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="n">tmp_name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.bigquery.BigQuery.sink" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">sink</span>


<a href="#ankaflow.connections.bigquery.BigQuery.sink" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">sink</span><span class="p">(</span><span class="n">from_name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Public entrypoint for writing DuckDB data to BigQuery.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/bigquery.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Public entrypoint for writing DuckDB data to BigQuery.&quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_load_config_from_modes</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sink_impl</span><span class="p">(</span><span class="n">from_name</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.bigquery.BigQuery.sql" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">sql</span>


<a href="#ankaflow.connections.bigquery.BigQuery.sql" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">sql</span><span class="p">(</span><span class="n">statement</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Any">Any</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Executes a BigQuery SQL statement and logs the result.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/bigquery.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">statement</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Executes a BigQuery SQL statement and logs the result.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">df</span><span class="p">:</span> <span class="n">DataFrame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute_query_to_dataframe</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SQL result:</span><span class="se">\n</span><span class="si">{</span><span class="n">print_df</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="n">all_rows</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SQL execution failed: </span><span class="si">{</span><span class="n">err</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.bigquery.BigQuery.tap" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">tap</span>


<a href="#ankaflow.connections.bigquery.BigQuery.tap" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">tap</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="n"><span title="int">int</span></span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Executes a BigQuery query and loads result into DuckDB.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/bigquery.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">tap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Executes a BigQuery query and loads result into DuckDB.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">query</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;BigQuery requires an explicit query — none was provided.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># TODO: may cause issues when running paraller</span>
    <span class="n">temp_name</span> <span class="o">=</span> <span class="s2">&quot;bigdf&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ranked_query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_query_with_ranking</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute_query_to_dataframe</span><span class="p">(</span><span class="n">ranked_query</span><span class="p">)</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_dataframe_to_duckdb</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">temp_name</span><span class="p">)</span>

        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            CREATE TABLE &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot; AS</span>
<span class="s2">            SELECT * FROM &quot;</span><span class="si">{</span><span class="n">temp_name</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;tap failed: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="n">temp_name</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">cleanup_ex</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Failed to unregister temp table &#39;</span><span class="si">{</span><span class="n">temp_name</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">cleanup_ex</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="ankaflow.connections.clickhouse" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">clickhouse</span>


<a href="#ankaflow.connections.clickhouse" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="ankaflow.connections.clickhouse.Clickhouse" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Clickhouse</span>


<a href="#ankaflow.connections.clickhouse.Clickhouse" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">Clickhouse</span><span class="p">(</span>
    <span class="n">duck</span><span class="p">:</span> <span class="n"><span title="ankaflow.internal.DDB">DDB</span></span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
    <span class="n">connection</span><span class="p">:</span> <span class="n"><span title="ankaflow.connections.connection.UnionConnection">UnionConnection</span></span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Variables (ankaflow.models.Variables)" href="#ankaflow.models.Variables">Variables</a></span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n"><span title="logging.Logger">Logger</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            Connection (ankaflow.connections.connection.Connection)" href="#ankaflow.connections.connection.Connection">Connection</a></code></p>









                  <details class="quote">
                    <summary>Source code in <code>ankaflow/connections/connection.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">duck</span><span class="p">:</span> <span class="n">DDB</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">connection</span><span class="p">:</span> <span class="n">UnionConnection</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">FlowContext</span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Variables</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># type: ignore[assignment]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">duck</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">fields</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span>
        <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span><span class="p">,</span> <span class="n">connection</span><span class="o">.</span><span class="n">config</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">conn</span> <span class="o">=</span> <span class="n">connection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span> <span class="o">=</span> <span class="n">context</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">variables</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logger</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">locator</span> <span class="o">=</span> <span class="n">Locator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">)</span>  <span class="c1"># type: ignore[assignment]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">schema_</span> <span class="o">=</span> <span class="n">Schema</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">logger</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">NullHandler</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.clickhouse.Clickhouse.init" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">init</span>


<a href="#ankaflow.connections.clickhouse.Clickhouse.init" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">init</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initializes connection-specific defaults.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/clickhouse.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes connection-specific defaults.&quot;&quot;&quot;</span>
    <span class="c1"># Created by decorator</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ClickhouseClient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ch</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Client</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">ClickhouseClient</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_blocksize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="o">.</span><span class="n">clickhouse</span><span class="o">.</span><span class="n">blocksize</span> <span class="ow">or</span> <span class="n">DEFAULT_STREAM_BLOCK</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">progress</span> <span class="o">=</span> <span class="n">ProgressLogger</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.clickhouse.Clickhouse.locate" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">locate</span>


<a href="#ankaflow.connections.clickhouse.Clickhouse.locate" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">locate</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">use_wildcard</span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the fully-qualified table reference with validation.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Table name override (unused).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>use_wildcard</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Placeholder flag (unused).</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Fully-qualified table name.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If locator format is invalid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/clickhouse.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">locate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">use_wildcard</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the fully-qualified table reference with validation.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (Optional[str]): Table name override (unused).</span>
<span class="sd">        use_wildcard (bool): Placeholder flag (unused).</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Fully-qualified table name.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If locator format is invalid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">locator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">locator</span>
    <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">locator</span><span class="p">:</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="n">locator</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid locator format: </span><span class="si">{</span><span class="n">locator</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="o">.</span><span class="n">clickhouse</span><span class="o">.</span><span class="n">database</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Locator &#39;</span><span class="si">{</span><span class="n">locator</span><span class="si">}</span><span class="s2">&#39; must not include a database prefix when &#39;database&#39; is set.&quot;</span>  <span class="c1"># noqa:E501</span>
            <span class="p">)</span>
        <span class="n">database</span><span class="p">,</span> <span class="n">table</span> <span class="o">=</span> <span class="n">parts</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="o">.</span><span class="n">clickhouse</span><span class="o">.</span><span class="n">database</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Locator &#39;</span><span class="si">{</span><span class="n">locator</span><span class="si">}</span><span class="s2">&#39; must include a database prefix when &#39;database&#39; is not set.&quot;</span>  <span class="c1"># noqa:E501</span>
            <span class="p">)</span>
        <span class="n">database</span><span class="p">,</span> <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="o">.</span><span class="n">clickhouse</span><span class="o">.</span><span class="n">database</span><span class="p">,</span> <span class="n">locator</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">database</span><span class="si">}</span><span class="s1">&quot;.&quot;</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s1">&quot;&#39;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.connections.clickhouse.ClickhouseClient" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ClickhouseClient</span>


<a href="#ankaflow.connections.clickhouse.ClickhouseClient" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">ClickhouseClient</span><span class="p">(</span><span class="n">cfg</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.ConnectionConfiguration)" href="#ankaflow.models.ConnectionConfiguration">ConnectionConfiguration</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Initializes a Clickhouse client wrapper.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>cfg</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.ConnectionConfiguration)" href="#ankaflow.models.ConnectionConfiguration">ConnectionConfiguration</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Connection configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/connections/clickhouse.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cfg</span><span class="p">:</span> <span class="s2">&quot;m.ConnectionConfiguration&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes a Clickhouse client wrapper.</span>

<span class="sd">    Args:</span>
<span class="sd">        cfg (m.ConnectionConfiguration): Connection configuration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cfg</span> <span class="o">=</span> <span class="n">cfg</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.clickhouse.ClickhouseClient.connect" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">connect</span>


<a href="#ankaflow.connections.clickhouse.ClickhouseClient.connect" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">connect</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Iterator">Iterator</span></span><span class="p">[</span><span class="n"><span title="clickhouse_driver.Client">Client</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Context-managed connection that disconnects cleanly.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/clickhouse.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@contextlib</span><span class="o">.</span><span class="n">contextmanager</span>
<span class="k">def</span><span class="w"> </span><span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="n">Client</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Context-managed connection that disconnects cleanly.&quot;&quot;&quot;</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="o">.</span><span class="n">clickhouse</span><span class="o">.</span><span class="n">host</span><span class="p">,</span>
        <span class="n">port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="o">.</span><span class="n">clickhouse</span><span class="o">.</span><span class="n">port</span><span class="p">,</span>
        <span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="o">.</span><span class="n">clickhouse</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="o">.</span><span class="n">clickhouse</span><span class="o">.</span><span class="n">password</span><span class="p">,</span>
        <span class="n">database</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="o">.</span><span class="n">clickhouse</span><span class="o">.</span><span class="n">database</span><span class="p">,</span>
        <span class="n">send_receive_timeout</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">client</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">client</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.clickhouse.ClickhouseClient.insert_dataframe" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">insert_dataframe</span>


<a href="#ankaflow.connections.clickhouse.ClickhouseClient.insert_dataframe" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">insert_dataframe</span><span class="p">(</span>
    <span class="n">client</span><span class="p">:</span> <span class="n"><span title="clickhouse_driver.Client">Client</span></span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Any">Any</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Inserts a DataFrame into Clickhouse using the given query.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/clickhouse.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">insert_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">Client</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Inserts a DataFrame into Clickhouse using the given query.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">client</span><span class="o">.</span><span class="n">insert_dataframe</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">settings</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;use_numpy&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.clickhouse.ClickhouseClient.query_df" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">query_df</span>


<a href="#ankaflow.connections.clickhouse.ClickhouseClient.query_df" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">query_df</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n"><span title="clickhouse_driver.Client">Client</span></span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Executes a SELECT query and returns a DataFrame.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/clickhouse.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">query_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">Client</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Executes a SELECT query and returns a DataFrame.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">client</span><span class="o">.</span><span class="n">query_dataframe</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">settings</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;use_numpy&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.clickhouse.ClickhouseClient.stream_query" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">stream_query</span>


<a href="#ankaflow.connections.clickhouse.ClickhouseClient.stream_query" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">stream_query</span><span class="p">(</span>
    <span class="n">client</span><span class="p">:</span> <span class="n"><span title="clickhouse_driver.Client">Client</span></span><span class="p">,</span>
    <span class="n">query</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
    <span class="n">block_size</span><span class="p">:</span> <span class="n"><span title="int">int</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Generator">Generator</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Streams ClickHouse query results.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>client</code>
            </td>
            <td>
                  <code><span title="clickhouse_driver.Client">Client</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A live Clickhouse connection.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>query</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SQL query.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>block_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional server-side row block size.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Yields:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Generator">Generator</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>row blocks from ClickHouse.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/clickhouse.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">stream_query</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">Client</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">block_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Generator</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Streams ClickHouse query results.</span>

<span class="sd">    Args:</span>
<span class="sd">        client (Client): A live Clickhouse connection.</span>
<span class="sd">        query (str): SQL query.</span>
<span class="sd">        block_size (int): Optional server-side row block size.</span>

<span class="sd">    Yields:</span>
<span class="sd">        row blocks from ClickHouse.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">block_size</span><span class="p">:</span>
        <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;max_block_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block_size</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">execute_iter</span><span class="p">(</span>
        <span class="n">query</span><span class="p">,</span> <span class="n">with_column_types</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">settings</span><span class="o">=</span><span class="n">settings</span>
    <span class="p">):</span>
        <span class="k">yield</span> <span class="n">row</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="ankaflow.connections.connection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">connection</span>


<a href="#ankaflow.connections.connection" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="ankaflow.connections.connection.Connection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Connection</span>


<a href="#ankaflow.connections.connection.Connection" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">Connection</span><span class="p">(</span>
    <span class="n">duck</span><span class="p">:</span> <span class="n"><span title="ankaflow.internal.DDB">DDB</span></span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
    <span class="n">connection</span><span class="p">:</span> <span class="n"><span title="ankaflow.connections.connection.UnionConnection">UnionConnection</span></span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Variables (ankaflow.models.Variables)" href="#ankaflow.models.Variables">Variables</a></span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n"><span title="logging.Logger">Logger</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Base class for connections such as Deltatable or parquet.</p>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/connections/connection.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">duck</span><span class="p">:</span> <span class="n">DDB</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">connection</span><span class="p">:</span> <span class="n">UnionConnection</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">FlowContext</span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Variables</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># type: ignore[assignment]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">duck</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">fields</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span>
        <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span><span class="p">,</span> <span class="n">connection</span><span class="o">.</span><span class="n">config</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">conn</span> <span class="o">=</span> <span class="n">connection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span> <span class="o">=</span> <span class="n">context</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">variables</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logger</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">locator</span> <span class="o">=</span> <span class="n">Locator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">)</span>  <span class="c1"># type: ignore[assignment]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">schema_</span> <span class="o">=</span> <span class="n">Schema</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">logger</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">NullHandler</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.connection.Connection.init" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">init</span>


<a href="#ankaflow.connections.connection.Connection.init" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">init</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Additional initialization called from within
<strong>init</strong>.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/connection.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Additional initialization called from within</span>
<span class="sd">    __init__.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.connection.Connection.ranking" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">ranking</span>


<a href="#ankaflow.connections.connection.Connection.ranking" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">ranking</span><span class="p">(</span>
    <span class="n">selectable</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n">validate_simple</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tuple">tuple</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Injects row ranking logic to deduplicate records based on versioning.</p>
<p>If the connection defines a <code>version</code> and <code>key</code>, modifies the query
to include a <code>ROW_NUMBER() OVER (...) AS __rank__</code> column and wraps it
in a subquery that can be filtered using <code>WHERE __rank__ = 1</code>.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[str, str]: Transformed SQL query and the WHERE clause if applicable.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/connection.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">ranking</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">selectable</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">validate_simple</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Injects row ranking logic to deduplicate records based on versioning.</span>

<span class="sd">    If the connection defines a `version` and `key`, modifies the query</span>
<span class="sd">    to include a `ROW_NUMBER() OVER (...) AS __rank__` column and wraps it</span>
<span class="sd">    in a subquery that can be filtered using `WHERE __rank__ = 1`.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[str, str]: Transformed SQL query and the WHERE clause if applicable.</span>
<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa: E501</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="p">,</span> <span class="n">VersionedConnection</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">query</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
    <span class="n">apply_ranking</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">version</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>

    <span class="c1"># Validate before building</span>
    <span class="n">validate_simple_query</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">apply_ranking</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">build_ranked_query</span><span class="p">(</span>
        <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span>
        <span class="n">selectable</span><span class="o">=</span><span class="n">selectable</span><span class="p">,</span>
        <span class="n">version</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
        <span class="n">keys</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">key</span><span class="p">,</span>
        <span class="n">dialect</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dialect</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.connection.Connection.sink" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">sink</span>


<a href="#ankaflow.connections.connection.Connection.sink" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">sink</span><span class="p">(</span><span class="n">from_name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Sink or store data from given <code>name</code> (typically previous stage)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="string">string</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>table name to use as source</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/connection.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sink or store data from given `name` (typically previous stage)</span>

<span class="sd">    Args:</span>
<span class="sd">        name (string): table name to use as source</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Store object must be implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.connection.Connection.sql" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">sql</span>


<a href="#ankaflow.connections.connection.Connection.sql" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">sql</span><span class="p">(</span><span class="n">statement</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Any">Any</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Execute raw sql using the specified connection (if supported).</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/connection.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">statement</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Execute raw sql using the specified connection (if supported).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;SQL execution not available&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.connection.Connection.tap" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">tap</span>


<a href="#ankaflow.connections.connection.Connection.tap" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">tap</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="n"><span title="int">int</span></span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Implements loading from source storage.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>limit</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reduce the number of rows returned.
Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/connection.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">tap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Implements loading from source storage.</span>

<span class="sd">    Args:</span>
<span class="sd">        limit (int, optional): Reduce the number of rows returned.</span>
<span class="sd">            Defaults to 0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Store object must be implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.connections.connection.Locator" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Locator</span>


<a href="#ankaflow.connections.connection.Locator" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">Locator</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.configs.ConnectionConfiguration)" href="#ankaflow.models.configs.ConnectionConfiguration">ConnectionConfiguration</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Initializes the Locator with connection configuration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.configs.ConnectionConfiguration)" href="#ankaflow.models.configs.ConnectionConfiguration">ConnectionConfiguration</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Config with bucket, prefix, etc.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/connections/connection.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">ConnectionConfiguration</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the Locator with connection configuration.</span>

<span class="sd">    Args:</span>
<span class="sd">        config (ConnectionConfiguration): Config with bucket, prefix, etc.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cfg</span> <span class="o">=</span> <span class="n">config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">resolver</span> <span class="o">=</span> <span class="n">ConfigResolver</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.connection.Locator.locate" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">locate</span>


<a href="#ankaflow.connections.connection.Locator.locate" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">locate</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n">use_wildcard</span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="ankaflow.common.path.CommonPath">CommonPath</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Resolves a full path using bucket, prefix, and optional wildcard substitution.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Relative or absolute path string.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>use_wildcard</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to apply wildcard regex substitution.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>CommonPath</code></td>            <td>
                  <code><span title="ankaflow.common.path.CommonPath">CommonPath</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A fully resolved path.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/connection.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">locate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">use_wildcard</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CommonPath</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Resolves a full path using bucket, prefix, and optional wildcard substitution.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): Relative or absolute path string.</span>
<span class="sd">        use_wildcard (bool): Whether to apply wildcard regex substitution.</span>

<span class="sd">    Returns:</span>
<span class="sd">        CommonPath: A fully resolved path.</span>
<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa: E501</span>
    <span class="k">if</span> <span class="n">use_wildcard</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">wildcard</span><span class="p">:</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wildcard</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">wildcard</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">name</span><span class="p">)</span>

    <span class="n">name_path</span> <span class="o">=</span> <span class="n">PathFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="c1"># Rule: Absolute remote path must remain as is</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name_path</span><span class="p">,</span> <span class="n">RemotePath</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">name_path</span>

    <span class="c1"># Rule: root must exist and be absolute</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">bucket</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Root not specified&quot;</span><span class="p">)</span>
    <span class="n">root_path</span> <span class="o">=</span> <span class="n">PathFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bucket</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">root_path</span><span class="o">.</span><span class="n">is_absolute</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Root must be absolute&quot;</span><span class="p">)</span>

    <span class="c1"># Rule: absolute name path directly under root</span>
    <span class="k">if</span> <span class="n">name_path</span><span class="o">.</span><span class="n">is_absolute</span><span class="p">():</span>
        <span class="n">name_path</span> <span class="o">=</span> <span class="n">PathFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">name_path</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">root_path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="o">*</span><span class="n">name_path</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span>

    <span class="c1"># Rule: If name path is relative, it must be under bucket/prefix/.</span>
    <span class="c1"># Normalize the prefix by stripping any leading slashes.</span>
    <span class="n">prefix_str</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>

    <span class="n">prefix_path_obj</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">prefix_str</span><span class="p">:</span>
        <span class="n">prefix_path_obj</span> <span class="o">=</span> <span class="n">PathFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">prefix_str</span><span class="p">)</span>
        <span class="c1"># Guard 1: Ensure prefix is relative</span>
        <span class="k">if</span> <span class="n">prefix_path_obj</span><span class="o">.</span><span class="n">is_absolute</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configured data_prefix &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="si">}</span><span class="s2">&#39; must be a relative path.&quot;</span><span class="p">)</span>  <span class="c1"># noqa: E501</span>
        <span class="c1"># Guard 2: Prevent prefix from &#39;sneaking out&#39; of root (via &#39;..&#39;)</span>
        <span class="c1"># This is a basic check.A more comprehensive check might</span>
        <span class="c1"># involve full path resolution and comparison, but typically,</span>
        <span class="c1"># preventing &#39;..&#39; at the prefix level is sufficient</span>
        <span class="c1"># if the Path object&#39;s joinpath handles it correctly.</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">part</span> <span class="o">==</span> <span class="s2">&quot;..&quot;</span> <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">prefix_path_obj</span><span class="o">.</span><span class="n">parts</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configured data_prefix &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="si">}</span><span class="s2">&#39; cannot contain &#39;..&#39; segments.&quot;</span><span class="p">)</span>  <span class="c1"># noqa: E501</span>

    <span class="c1"># Build the full prefix path: root_path + prefix_str parts</span>
    <span class="c1"># If no prefix_str, prefix_path will just be root_path.</span>
    <span class="n">prefix_path</span> <span class="o">=</span> <span class="n">root_path</span>
    <span class="k">if</span> <span class="n">prefix_path_obj</span><span class="p">:</span>
        <span class="n">prefix_path</span> <span class="o">=</span> <span class="n">root_path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="o">*</span><span class="n">prefix_path_obj</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span>

    <span class="c1"># Join with prefix (already includes root)</span>
    <span class="k">return</span> <span class="n">prefix_path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="o">*</span><span class="n">name_path</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.connections.connection.Schema" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Schema</span>


<a href="#ankaflow.connections.connection.Schema" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">Schema</span><span class="p">(</span><span class="n">duck</span><span class="p">:</span> <span class="n"><span title="ankaflow.internal.DDB">DDB</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Class for working with table schemas</p>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/connections/connection.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">duck</span><span class="p">:</span> <span class="n">DDB</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">duck</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">schema_</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore[assignment]</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.connection.Schema.generate" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">generate</span>


<a href="#ankaflow.connections.connection.Schema.generate" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">generate</span><span class="p">(</span>
    <span class="n">table</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Columns (ankaflow.models.Columns)" href="#ankaflow.models.Columns">Columns</a></span><span class="p">,</span> <span class="n">exists_ok</span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Generates CREATE TABLE statement from schema.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Table name to create</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>schema</code>
            </td>
            <td>
                  <code><span title="ankaflow.models.Fields">Fields</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of fields (names and dtypes)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exists_ok</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If true then create statement
includes <code>IF NOT EXISTS</code>. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>CREATE statement</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/connection.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Columns</span><span class="p">,</span> <span class="n">exists_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates CREATE TABLE statement from schema.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): Table name to create</span>
<span class="sd">        schema (m.Fields): List of fields (names and dtypes)</span>
<span class="sd">        exists_ok (bool, optional): If true then create statement</span>
<span class="sd">            includes `IF NOT EXISTS`. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: CREATE statement</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cols</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
        <span class="n">cols</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Column</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">type</span><span class="p">))</span>  <span class="c1"># type: ignore[assignment]</span>
    <span class="n">creator</span> <span class="o">=</span> <span class="n">PostgreSQLQuery</span><span class="p">()</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">exists_ok</span><span class="p">:</span>
        <span class="n">creator</span> <span class="o">=</span> <span class="n">creator</span><span class="o">.</span><span class="n">if_not_exists</span><span class="p">()</span>
    <span class="n">creator</span> <span class="o">=</span> <span class="n">creator</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="o">*</span><span class="n">cols</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">creator</span><span class="o">.</span><span class="n">get_sql</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.connection.Schema.show" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">show</span>


<a href="#ankaflow.connections.connection.Schema.show" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">show</span><span class="p">(</span><span class="n">table</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            Columns (ankaflow.models.Columns)" href="#ankaflow.models.Columns">Columns</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the schema of a table as a validated Fields model.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>table</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the DuckDB table/view.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="            Columns (ankaflow.models.Columns)" href="#ankaflow.models.Columns">Columns</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>m.Fields: List of validated fields.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/connection.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">m</span><span class="o">.</span><span class="n">Columns</span><span class="p">:</span>
    <span class="c1"># OK, refactored. Do not touch</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the schema of a table as a validated Fields model.</span>

<span class="sd">    Args:</span>
<span class="sd">        table (str): The name of the DuckDB table/view.</span>

<span class="sd">    Returns:</span>
<span class="sd">        m.Fields: List of validated fields.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">query</span><span class="p">:</span>
        <span class="n">qry</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;DESCRIBE </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">qry</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;DESCRIBE &quot;</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s1">&quot;&#39;</span>
    <span class="n">rel</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="n">qry</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="k">await</span> <span class="n">rel</span><span class="o">.</span><span class="n">df</span><span class="p">()</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;column_name&quot;</span><span class="p">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;column_type&quot;</span><span class="p">:</span> <span class="s2">&quot;type&quot;</span><span class="p">})</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">m</span><span class="o">.</span><span class="n">Column</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;records&quot;</span><span class="p">)</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">Columns</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="ankaflow.connections.delta" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">delta</span>


<a href="#ankaflow.connections.delta" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="ankaflow.connections.delta.Deltatable" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Deltatable</span>


<a href="#ankaflow.connections.delta.Deltatable" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">Deltatable</span><span class="p">(</span>
    <span class="n">duck</span><span class="p">:</span> <span class="n"><span title="ankaflow.internal.DDB">DDB</span></span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
    <span class="n">connection</span><span class="p">:</span> <span class="n"><span title="ankaflow.connections.connection.UnionConnection">UnionConnection</span></span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Variables (ankaflow.models.Variables)" href="#ankaflow.models.Variables">Variables</a></span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n"><span title="logging.Logger">Logger</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            Connection (ankaflow.connections.connection.Connection)" href="#ankaflow.connections.connection.Connection">Connection</a></code></p>









                  <details class="quote">
                    <summary>Source code in <code>ankaflow/connections/connection.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">duck</span><span class="p">:</span> <span class="n">DDB</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">connection</span><span class="p">:</span> <span class="n">UnionConnection</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">FlowContext</span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Variables</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># type: ignore[assignment]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">duck</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">fields</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span>
        <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span><span class="p">,</span> <span class="n">connection</span><span class="o">.</span><span class="n">config</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">conn</span> <span class="o">=</span> <span class="n">connection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span> <span class="o">=</span> <span class="n">context</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">variables</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logger</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">locator</span> <span class="o">=</span> <span class="n">Locator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">)</span>  <span class="c1"># type: ignore[assignment]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">schema_</span> <span class="o">=</span> <span class="n">Schema</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">logger</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">NullHandler</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.delta.Deltatable.sink" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">sink</span>


<a href="#ankaflow.connections.delta.Deltatable.sink" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">sink</span><span class="p">(</span><span class="n">from_name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>DeltaTable sink behavior is driven by available schema and data:</p>
<h6 id="ankaflow.connections.delta.Deltatable.sink--strategy-matrix">Strategy Matrix:<a class="headerlink" href="#ankaflow.connections.delta.Deltatable.sink--strategy-matrix" title="Permanent link">&para;</a></h6>
<table>
<thead>
<tr>
<th>Schema (conn.fields)</th>
<th>Data Available</th>
<th>Resulting Strategy</th>
</tr>
</thead>
<tbody>
<tr>
<td>No</td>
<td>No</td>
<td>SKIP → no action</td>
</tr>
<tr>
<td>Yes</td>
<td>No</td>
<td>CREATE → define schema</td>
</tr>
<tr>
<td>Yes</td>
<td>Yes</td>
<td>WRITE → create &amp; write</td>
</tr>
<tr>
<td>No</td>
<td>Yes</td>
<td>WRITE → infer &amp; write</td>
</tr>
<tr>
<td>--------------------------------------------------------------------</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>When table already exists (is_deltatable):
- CREATE → skip creation, write only if data present
- WRITE  → directly append/merge data to table</p>
<p>Optimizations (vacuum/compact) applied if self.conn.optimize is set.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/delta.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    DeltaTable sink behavior is driven by available schema and data:</span>

<span class="sd">    Strategy Matrix:</span>
<span class="sd">    --------------------------------------------------------------------</span>
<span class="sd">    | Schema (conn.fields) | Data Available | Resulting Strategy       |</span>
<span class="sd">    |----------------------|----------------|--------------------------|</span>
<span class="sd">    | No                   | No             | SKIP → no action         |</span>
<span class="sd">    | Yes                  | No             | CREATE → define schema   |</span>
<span class="sd">    | Yes                  | Yes            | WRITE → create &amp; write   |</span>
<span class="sd">    | No                   | Yes            | WRITE → infer &amp; write    |</span>
<span class="sd">    --------------------------------------------------------------------</span>

<span class="sd">    When table already exists (is_deltatable):</span>
<span class="sd">    - CREATE → skip creation, write only if data present</span>
<span class="sd">    - WRITE  → directly append/merge data to table</span>

<span class="sd">    Optimizations (vacuum/compact) applied if self.conn.optimize is set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">locate</span><span class="p">()</span>
    <span class="n">view</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_temp_view</span><span class="p">(</span><span class="n">from_name</span><span class="p">)</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count_rows</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>  <span class="c1"># NEW</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_view</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>  <span class="c1"># Arrow</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_drop_view</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>

    <span class="n">strategy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_strategy</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">strategy</span> <span class="o">==</span> <span class="n">SinkStrategy</span><span class="o">.</span><span class="n">SKIP</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: No schema or data to insert.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">schema</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_infer_schema</span><span class="p">(</span>
        <span class="n">data</span> <span class="k">if</span> <span class="n">strategy</span> <span class="o">==</span> <span class="n">SinkStrategy</span><span class="o">.</span><span class="n">WRITE</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="p">)</span>
    <span class="n">arrow_out</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_arrow</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
    <span class="n">arrow_out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cast_dict_to_string</span><span class="p">(</span><span class="n">arrow_out</span><span class="p">)</span>

    <span class="n">is_delta</span> <span class="o">=</span> <span class="n">dl</span><span class="o">.</span><span class="n">DeltaTable</span><span class="o">.</span><span class="n">is_deltatable</span><span class="p">(</span>
        <span class="n">uri</span><span class="p">,</span> <span class="n">storage_options</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">delta_opts</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">strategy</span> <span class="o">==</span> <span class="n">SinkStrategy</span><span class="o">.</span><span class="n">CREATE</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_delta</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_deltatable</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rows</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_deltatable</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">arrow_out</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">strategy</span> <span class="o">==</span> <span class="n">SinkStrategy</span><span class="o">.</span><span class="n">WRITE</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_deltatable</span><span class="p">(</span>
            <span class="n">uri</span><span class="p">,</span> <span class="n">arrow_out</span><span class="p">,</span> <span class="n">create_flag</span><span class="o">=</span><span class="ow">not</span> <span class="n">is_delta</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Written </span><span class="si">{</span><span class="n">rows</span><span class="si">}</span><span class="s2"> records to </span><span class="si">{</span><span class="s1">&#39;existing&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">is_delta</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;new&#39;</span><span class="si">}</span><span class="s2"> Delta table&quot;</span>  <span class="c1"># noqa:E501</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">optimize</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maybe_optimize</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">DeltaError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span><span class="o">.</span><span class="n">ConnectionException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Optimize failed: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.connections.delta.Deltatable.sql" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">sql</span>


<a href="#ankaflow.connections.delta.Deltatable.sql" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">sql</span><span class="p">(</span><span class="n">statement</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Executes a limited subset of SQL-like operations on a Delta table.</p>
<p>Supported commands:
- DROP Deltatable
- TRUNCATE Deltatable
- OPTIMIZE Deltatable [COMPACT][VACUUM] [AGE=<int>[d|h]][DRY_RUN] [CLEANUP]</p>
<p>All other statements raise an error.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/connections/delta.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">statement</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes a limited subset of SQL-like operations on a Delta table.</span>

<span class="sd">    Supported commands:</span>
<span class="sd">    - DROP Deltatable</span>
<span class="sd">    - TRUNCATE Deltatable</span>
<span class="sd">    - OPTIMIZE Deltatable [COMPACT] [VACUUM] [AGE=&lt;int&gt;[d|h]] [DRY_RUN] [CLEANUP]</span>

<span class="sd">    All other statements raise an error.</span>
<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa: E501</span>
    <span class="n">tokens</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">casefold</span><span class="p">()</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">shlex</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">statement</span><span class="p">)]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">tokens</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid Delta SQL command: </span><span class="si">{</span><span class="n">statement</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">tokens</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;drop&quot;</span><span class="p">,</span> <span class="s2">&quot;deltatable&quot;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_drop_deltatable</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">tokens</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;truncate&quot;</span><span class="p">,</span> <span class="s2">&quot;deltatable&quot;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_truncate_deltatable</span><span class="p">()</span>
    <span class="k">elif</span> <span class="p">(</span>
        <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span>
        <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;optimize&quot;</span>
        <span class="ow">and</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;deltatable&quot;</span>
    <span class="p">):</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sql_optimize</span><span class="p">(</span>
            <span class="n">statement</span>
        <span class="p">)</span>  <span class="c1"># pass original for parsing</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid Delta SQL command: </span><span class="si">{</span><span class="n">statement</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="ankaflow.connections.errors" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">errors</span>


<a href="#ankaflow.connections.errors" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="ankaflow.connections.errors.ConnectionException" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ConnectionException</span>


<a href="#ankaflow.connections.errors.ConnectionException" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>


        <p>Base class for connection errors with optional message redaction.</p>









    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="ankaflow.const" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">const</span>


<a href="#ankaflow.const" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">










  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="ankaflow.core" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">core</span>


<a href="#ankaflow.core" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="ankaflow.core.AsyncFlow" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AsyncFlow</span>


<a href="#ankaflow.core.AsyncFlow" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">AsyncFlow</span><span class="p">(</span>
    <span class="n">defs</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.Stages)" href="#ankaflow.models.Stages">Stages</a></span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></span><span class="p">,</span>
    <span class="n">default_connection</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.ConnectionConfiguration)" href="#ankaflow.models.ConnectionConfiguration">ConnectionConfiguration</a></span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Variables (ankaflow.models.Variables)" href="#ankaflow.models.Variables">Variables</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n"><span title="logging.Logger">Logger</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">conn</span><span class="p">:</span> <span class="n"><span title="ankaflow.internal.DDB">DDB</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">flow_control</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            FlowControl (ankaflow.core.policy.FlowControl)" href="#ankaflow.FlowControl">FlowControl</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_context</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Controls the flow of data based on the pipeline definition.</p>
<p>The stages are run in the defined order and can either fetch data
from a source (tap), transform via SQL, or store to a sink.</p>



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>defs</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.Stages)" href="#ankaflow.models.Stages">Stages</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of stages to be processed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dynamic context for query templates.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default_connection</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.ConnectionConfiguration)" href="#ankaflow.models.ConnectionConfiguration">ConnectionConfiguration</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration passed
to underlying storage or database.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>variables</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            Variables (ankaflow.models.Variables)" href="#ankaflow.models.Variables">Variables</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Variables for tap or prepare.
Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>logger</code>
            </td>
            <td>
                  <code><span title="logging.Logger">Logger</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Logger for show() requests.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>conn</code>
            </td>
            <td>
                  <code><span title="ankaflow.internal.DDB">DDB</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Existing DuckDB connection. If not set, a new
connection is created.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>flow_control</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            FlowControl (ankaflow.core.policy.FlowControl)" href="#ankaflow.FlowControl">FlowControl</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flow control configuration.
Defaults to FlowControl().</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>log_context</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Log context passed to each stage.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">defs</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Stages</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">FlowContext</span><span class="p">,</span>
    <span class="n">default_connection</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Variables</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">conn</span><span class="p">:</span> <span class="s2">&quot;DDB&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">flow_control</span><span class="p">:</span> <span class="s2">&quot;FlowControl&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_context</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        defs (m.Stages): List of stages to be processed.</span>
<span class="sd">        context (m.FlowContext): Dynamic context for query templates.</span>
<span class="sd">        default_connection (m.ConnectionConfiguration): Configuration passed</span>
<span class="sd">            to underlying storage or database.</span>
<span class="sd">        variables (m.Variables, optional): Variables for tap or prepare.</span>
<span class="sd">            Defaults to {}.</span>
<span class="sd">        logger (logging.Logger, optional): Logger for show() requests.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        conn (DDB, optional): Existing DuckDB connection. If not set, a new</span>
<span class="sd">            connection is created.</span>
<span class="sd">        flow_control (FlowControl, optional): Flow control configuration.</span>
<span class="sd">            Defaults to FlowControl().</span>
<span class="sd">        log_context (str, optional): Log context passed to each stage.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">defs</span> <span class="o">=</span> <span class="n">defs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">Variables</span><span class="p">()</span> <span class="k">if</span> <span class="n">variables</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">variables</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lastname</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">FlowContext</span> <span class="o">=</span> <span class="n">context</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">conn_opts</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span> <span class="o">=</span> <span class="n">default_connection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logger</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">flow_control</span> <span class="o">=</span> <span class="n">flow_control</span> <span class="ow">or</span> <span class="n">FlowControl</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_context</span> <span class="o">=</span> <span class="n">log_context</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;DDB&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">conn</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.core.AsyncFlow.log" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">log</span>


<a href="#ankaflow.core.AsyncFlow.log" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">log</span><span class="p">:</span> <span class="n"><span title="logging.Logger">Logger</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the logger.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.core.AsyncFlow.logs" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">logs</span>


<a href="#ankaflow.core.AsyncFlow.logs" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logs</span><span class="p">:</span> <span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the log buffer.</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h4 id="ankaflow.core.AsyncFlow.connect" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">connect</span>


<a href="#ankaflow.core.AsyncFlow.connect" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">connect</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Connects to the underlying database if not already connected.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connects to the underlying database if not already connected.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">idb</span> <span class="o">=</span> <span class="k">await</span> <span class="n">DDB</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conn_opts</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="ankaflow.core.AsyncFlow.df" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">df</span>


<a href="#ankaflow.core.AsyncFlow.df" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">df</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns a dataframe from the last stage.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>pd.DataFrame: Data from the last stage.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">df</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a dataframe from the last stage.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pd.DataFrame: Data from the last stage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastname</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">coro</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;SELECT * FROM &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lastname</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">coro</span><span class="o">.</span><span class="n">df</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="ankaflow.core.AsyncFlow.pull_df" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">pull_df</span>


<a href="#ankaflow.core.AsyncFlow.pull_df" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">pull_df</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Convenience method to pull the final dataframe.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>pd.DataFrame: Data from the last stage.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">pull_df</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convenience method to pull the final dataframe.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pd.DataFrame: Data from the last stage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="ankaflow.core.AsyncFlow.run" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">run</span>


<a href="#ankaflow.core.AsyncFlow.run" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">run</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            AsyncFlow (ankaflow.core.flow.AsyncFlow)" href="#ankaflow.core.flow.AsyncFlow">AsyncFlow</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Runs the pipeline stages.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>AsyncFlow</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            AsyncFlow (ankaflow.core.flow.AsyncFlow)" href="#ankaflow.core.flow.AsyncFlow">AsyncFlow</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Self instance after running the pipeline.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;AsyncFlow&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Runs the pipeline stages.</span>

<span class="sd">    Returns:</span>
<span class="sd">        AsyncFlow: Self instance after running the pipeline.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

    <span class="n">vars_info</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline called with variables:</span><span class="se">\n</span><span class="si">{</span><span class="n">vars_info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">defs</span><span class="o">.</span><span class="n">steps</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;header&quot;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">log_level</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">log_level</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="n">log_ctx</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">log_context</span><span class="si">}</span><span class="s2">]&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_context</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">kind</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">log_ctx</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">stage</span> <span class="o">=</span> <span class="n">StageBlock</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="p">,</span>  <span class="c1"># type: ignore[assignment]</span>
                <span class="n">step</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">conn_opts</span><span class="p">,</span>
                <span class="n">variables</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span>
                <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">,</span>
                <span class="n">prevous_stage</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lastname</span><span class="p">,</span>  <span class="c1"># type: ignore[assignment]</span>
                <span class="n">log_context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">log_context</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastname</span> <span class="o">=</span> <span class="k">await</span> <span class="n">stage</span><span class="o">.</span><span class="n">do</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastname</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">dd</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ex</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> in </span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">on_error</span> <span class="o">==</span> <span class="n">FlowControl</span><span class="o">.</span><span class="n">ON_ERROR_FAIL</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_control</span><span class="o">.</span><span class="n">on_error</span> <span class="o">==</span> <span class="n">FlowControl</span><span class="o">.</span><span class="n">ON_ERROR_FAIL</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Pipeline failed at &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="si">{</span><span class="n">dd</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="n">end</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Run duration: </span><span class="si">{</span><span class="n">end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="n">e</span><span class="o">.</span><span class="n">FlowRunError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Failed at &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="si">{</span><span class="n">dd</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="si">{</span><span class="n">dd</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">throttle</span> <span class="ow">and</span> <span class="n">step</span><span class="o">.</span><span class="n">throttle</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Flow throttling </span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">throttle</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">)</span>
            <span class="k">await</span> <span class="n">sleep</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">throttle</span><span class="p">)</span>
    <span class="n">end</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Run duration: </span><span class="si">{</span><span class="n">end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="ankaflow.core.AsyncFlow.show_schema" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">show_schema</span>


<a href="#ankaflow.core.AsyncFlow.show_schema" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">show_schema</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="ankaflow.models.core.SchemaItem">SchemaItem</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns schemas for all supported stages.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="ankaflow.models.core.SchemaItem">SchemaItem</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>t.List[m.models.SchemaItem]: List of schema items.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">show_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">SchemaItem</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns schemas for all supported stages.</span>

<span class="sd">    Returns:</span>
<span class="sd">        t.List[m.models.SchemaItem]: List of schema items.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">SchemaItem</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">defs</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">db</span> <span class="o">=</span> <span class="n">StageBlock</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="p">,</span>
                <span class="n">step</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">conn_opts</span><span class="p">,</span>
                <span class="n">variables</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span>
                <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">,</span>
                <span class="n">prevous_stage</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lastname</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">st</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">show_schema</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">st</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">items</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">SchemaItem</span><span class="p">):</span>
                <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unexpected schema item type&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">raise</span>
    <span class="k">return</span> <span class="n">items</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.core.Flow" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Flow</span>


<a href="#ankaflow.core.Flow" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">Flow</span><span class="p">(</span>
    <span class="n">defs</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.Stages)" href="#ankaflow.models.Stages">Stages</a></span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></span><span class="p">,</span>
    <span class="n">default_connection</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.ConnectionConfiguration)" href="#ankaflow.models.ConnectionConfiguration">ConnectionConfiguration</a></span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Variables (ankaflow.models.Variables)" href="#ankaflow.models.Variables">Variables</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n"><span title="logging.Logger">Logger</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">conn</span><span class="p">:</span> <span class="n"><span title="duckdb.DuckDBPyConnection">DuckDBPyConnection</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">flow_control</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            FlowControl (ankaflow.core.policy.FlowControl)" href="#ankaflow.FlowControl">FlowControl</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_context</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Flow controls the flow of data based on the pipeline definition.
The stages are run in the defined order and can either fetch data
from source (tap), transform via SQL statement, or store to sink.</p>
<p>This is the sync version and should be used in most cases.</p>



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>defs</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.Stages)" href="#ankaflow.models.Stages">Stages</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of stages to be processed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dynamic context that can be used
in query templates.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default_connection</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.ConnectionConfiguration)" href="#ankaflow.models.ConnectionConfiguration">ConnectionConfiguration</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration
passed to underlying storage or database
(s3 bucket, database connection string &amp;c).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>variables</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Any variables that can be referenced
by a tap or prepare. Ony data structures that can be passed
to pl.from_dicts() are supported in taps. Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>logger</code>
            </td>
            <td>
                  <code><span title="Logger">Logger</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If set then show() requests are logged.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>conn</code>
            </td>
            <td>
                  <code><span title="DuckDBPyConnection">DuckDBPyConnection</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Existing DuckDB connection. If not set
new connection will be created.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">defs</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Stages</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">FlowContext</span><span class="p">,</span>
    <span class="n">default_connection</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Variables</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">conn</span><span class="p">:</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyConnection</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">flow_control</span><span class="p">:</span> <span class="n">FlowControl</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_context</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        defs (Stages): List of stages to be processed.</span>
<span class="sd">        context (FlowContext): dynamic context that can be used</span>
<span class="sd">            in query templates.</span>
<span class="sd">        default_connection (ConnectionConfiguration): Configuration</span>
<span class="sd">            passed to underlying storage or database</span>
<span class="sd">            (s3 bucket, database connection string &amp;c).</span>
<span class="sd">        variables (dict, optional): Any variables that can be referenced</span>
<span class="sd">            by a tap or prepare. Ony data structures that can be passed</span>
<span class="sd">            to pl.from_dicts() are supported in taps. Defaults to {}.</span>
<span class="sd">        logger (Logger, optional): If set then show() requests are logged.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        conn (DuckDBPyConnection): Existing DuckDB connection. If not set</span>
<span class="sd">            new connection will be created.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">flow</span> <span class="o">=</span> <span class="n">AsyncFlow</span><span class="p">(</span>
        <span class="n">defs</span><span class="p">,</span>
        <span class="n">context</span><span class="p">,</span>
        <span class="n">default_connection</span><span class="p">,</span>
        <span class="n">variables</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">Variables</span><span class="p">()</span> <span class="k">if</span> <span class="n">variables</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">variables</span><span class="p">,</span>
        <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">,</span>
        <span class="n">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">,</span>
        <span class="n">flow_control</span><span class="o">=</span><span class="n">flow_control</span> <span class="ow">or</span> <span class="n">FlowControl</span><span class="p">(),</span>
        <span class="n">log_context</span><span class="o">=</span><span class="n">log_context</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="ankaflow.core.Flow.df" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">df</span>


<a href="#ankaflow.core.Flow.df" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">df</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns dataframe from the last stage</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">df</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns dataframe from the last stage&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">asyncio_run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flow</span><span class="o">.</span><span class="n">df</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="ankaflow.core.Flow.pull_df" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">pull_df</span>


<a href="#ankaflow.core.Flow.pull_df" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">pull_df</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Convenience method to pull final dataframe</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>pl.DataFrame: data from last stage</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">pull_df</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convenience method to pull final dataframe</span>

<span class="sd">    Returns:</span>
<span class="sd">        pl.DataFrame: data from last stage</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">asyncio_run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flow</span><span class="o">.</span><span class="n">run</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">asyncio_run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flow</span><span class="o">.</span><span class="n">df</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="ankaflow.core.Flow.show_schema" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">show_schema</span>


<a href="#ankaflow.core.Flow.show_schema" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">show_schema</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="ankaflow.models.core.SchemaItem">SchemaItem</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns schemas of all supported stages</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">show_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">SchemaItem</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns schemas of all supported stages</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">asyncio_run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flow</span><span class="o">.</span><span class="n">show_schema</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>



<div class="doc doc-object doc-module">



<h3 id="ankaflow.core.flow" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">flow</span>


<a href="#ankaflow.core.flow" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="ankaflow.core.flow.AsyncFlow" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AsyncFlow</span>


<a href="#ankaflow.core.flow.AsyncFlow" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">AsyncFlow</span><span class="p">(</span>
    <span class="n">defs</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.Stages)" href="#ankaflow.models.Stages">Stages</a></span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></span><span class="p">,</span>
    <span class="n">default_connection</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.ConnectionConfiguration)" href="#ankaflow.models.ConnectionConfiguration">ConnectionConfiguration</a></span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Variables (ankaflow.models.Variables)" href="#ankaflow.models.Variables">Variables</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n"><span title="logging.Logger">Logger</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">conn</span><span class="p">:</span> <span class="n"><span title="ankaflow.internal.DDB">DDB</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">flow_control</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            FlowControl (ankaflow.core.policy.FlowControl)" href="#ankaflow.FlowControl">FlowControl</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_context</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Controls the flow of data based on the pipeline definition.</p>
<p>The stages are run in the defined order and can either fetch data
from a source (tap), transform via SQL, or store to a sink.</p>



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>defs</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.Stages)" href="#ankaflow.models.Stages">Stages</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of stages to be processed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dynamic context for query templates.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default_connection</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.ConnectionConfiguration)" href="#ankaflow.models.ConnectionConfiguration">ConnectionConfiguration</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration passed
to underlying storage or database.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>variables</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            Variables (ankaflow.models.Variables)" href="#ankaflow.models.Variables">Variables</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Variables for tap or prepare.
Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>logger</code>
            </td>
            <td>
                  <code><span title="logging.Logger">Logger</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Logger for show() requests.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>conn</code>
            </td>
            <td>
                  <code><span title="ankaflow.internal.DDB">DDB</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Existing DuckDB connection. If not set, a new
connection is created.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>flow_control</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            FlowControl (ankaflow.core.policy.FlowControl)" href="#ankaflow.FlowControl">FlowControl</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flow control configuration.
Defaults to FlowControl().</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>log_context</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Log context passed to each stage.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">defs</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Stages</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">FlowContext</span><span class="p">,</span>
    <span class="n">default_connection</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Variables</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">conn</span><span class="p">:</span> <span class="s2">&quot;DDB&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">flow_control</span><span class="p">:</span> <span class="s2">&quot;FlowControl&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_context</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        defs (m.Stages): List of stages to be processed.</span>
<span class="sd">        context (m.FlowContext): Dynamic context for query templates.</span>
<span class="sd">        default_connection (m.ConnectionConfiguration): Configuration passed</span>
<span class="sd">            to underlying storage or database.</span>
<span class="sd">        variables (m.Variables, optional): Variables for tap or prepare.</span>
<span class="sd">            Defaults to {}.</span>
<span class="sd">        logger (logging.Logger, optional): Logger for show() requests.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        conn (DDB, optional): Existing DuckDB connection. If not set, a new</span>
<span class="sd">            connection is created.</span>
<span class="sd">        flow_control (FlowControl, optional): Flow control configuration.</span>
<span class="sd">            Defaults to FlowControl().</span>
<span class="sd">        log_context (str, optional): Log context passed to each stage.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">defs</span> <span class="o">=</span> <span class="n">defs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">Variables</span><span class="p">()</span> <span class="k">if</span> <span class="n">variables</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">variables</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lastname</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">FlowContext</span> <span class="o">=</span> <span class="n">context</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">conn_opts</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span> <span class="o">=</span> <span class="n">default_connection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logger</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">flow_control</span> <span class="o">=</span> <span class="n">flow_control</span> <span class="ow">or</span> <span class="n">FlowControl</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_context</span> <span class="o">=</span> <span class="n">log_context</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;DDB&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">conn</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.core.flow.AsyncFlow.log" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">log</span>


<a href="#ankaflow.core.flow.AsyncFlow.log" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">log</span><span class="p">:</span> <span class="n"><span title="logging.Logger">Logger</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the logger.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.core.flow.AsyncFlow.logs" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">logs</span>


<a href="#ankaflow.core.flow.AsyncFlow.logs" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logs</span><span class="p">:</span> <span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the log buffer.</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.AsyncFlow.connect" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">connect</span>


<a href="#ankaflow.core.flow.AsyncFlow.connect" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">connect</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Connects to the underlying database if not already connected.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connects to the underlying database if not already connected.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">idb</span> <span class="o">=</span> <span class="k">await</span> <span class="n">DDB</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conn_opts</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.AsyncFlow.df" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">df</span>


<a href="#ankaflow.core.flow.AsyncFlow.df" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">df</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns a dataframe from the last stage.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>pd.DataFrame: Data from the last stage.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">df</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a dataframe from the last stage.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pd.DataFrame: Data from the last stage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastname</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">coro</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;SELECT * FROM &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lastname</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">coro</span><span class="o">.</span><span class="n">df</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.AsyncFlow.pull_df" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">pull_df</span>


<a href="#ankaflow.core.flow.AsyncFlow.pull_df" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">pull_df</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Convenience method to pull the final dataframe.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>pd.DataFrame: Data from the last stage.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">pull_df</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convenience method to pull the final dataframe.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pd.DataFrame: Data from the last stage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.AsyncFlow.run" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">run</span>


<a href="#ankaflow.core.flow.AsyncFlow.run" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">run</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            AsyncFlow (ankaflow.core.flow.AsyncFlow)" href="#ankaflow.core.flow.AsyncFlow">AsyncFlow</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Runs the pipeline stages.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>AsyncFlow</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            AsyncFlow (ankaflow.core.flow.AsyncFlow)" href="#ankaflow.core.flow.AsyncFlow">AsyncFlow</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Self instance after running the pipeline.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;AsyncFlow&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Runs the pipeline stages.</span>

<span class="sd">    Returns:</span>
<span class="sd">        AsyncFlow: Self instance after running the pipeline.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

    <span class="n">vars_info</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline called with variables:</span><span class="se">\n</span><span class="si">{</span><span class="n">vars_info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">defs</span><span class="o">.</span><span class="n">steps</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;header&quot;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">log_level</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">log_level</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="n">log_ctx</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">log_context</span><span class="si">}</span><span class="s2">]&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_context</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">kind</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">log_ctx</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">stage</span> <span class="o">=</span> <span class="n">StageBlock</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="p">,</span>  <span class="c1"># type: ignore[assignment]</span>
                <span class="n">step</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">conn_opts</span><span class="p">,</span>
                <span class="n">variables</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span>
                <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">,</span>
                <span class="n">prevous_stage</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lastname</span><span class="p">,</span>  <span class="c1"># type: ignore[assignment]</span>
                <span class="n">log_context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">log_context</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastname</span> <span class="o">=</span> <span class="k">await</span> <span class="n">stage</span><span class="o">.</span><span class="n">do</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastname</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">dd</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ex</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> in </span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">on_error</span> <span class="o">==</span> <span class="n">FlowControl</span><span class="o">.</span><span class="n">ON_ERROR_FAIL</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_control</span><span class="o">.</span><span class="n">on_error</span> <span class="o">==</span> <span class="n">FlowControl</span><span class="o">.</span><span class="n">ON_ERROR_FAIL</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Pipeline failed at &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="si">{</span><span class="n">dd</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="n">end</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Run duration: </span><span class="si">{</span><span class="n">end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="n">e</span><span class="o">.</span><span class="n">FlowRunError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Failed at &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="si">{</span><span class="n">dd</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="si">{</span><span class="n">dd</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">throttle</span> <span class="ow">and</span> <span class="n">step</span><span class="o">.</span><span class="n">throttle</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Flow throttling </span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">throttle</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">)</span>
            <span class="k">await</span> <span class="n">sleep</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">throttle</span><span class="p">)</span>
    <span class="n">end</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Run duration: </span><span class="si">{</span><span class="n">end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.AsyncFlow.show_schema" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">show_schema</span>


<a href="#ankaflow.core.flow.AsyncFlow.show_schema" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">show_schema</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="ankaflow.models.core.SchemaItem">SchemaItem</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns schemas for all supported stages.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="ankaflow.models.core.SchemaItem">SchemaItem</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>t.List[m.models.SchemaItem]: List of schema items.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">show_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">SchemaItem</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns schemas for all supported stages.</span>

<span class="sd">    Returns:</span>
<span class="sd">        t.List[m.models.SchemaItem]: List of schema items.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">SchemaItem</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">defs</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">db</span> <span class="o">=</span> <span class="n">StageBlock</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="p">,</span>
                <span class="n">step</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">conn_opts</span><span class="p">,</span>
                <span class="n">variables</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span>
                <span class="n">logger</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">,</span>
                <span class="n">prevous_stage</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lastname</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">st</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">show_schema</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">st</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">items</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">SchemaItem</span><span class="p">):</span>
                <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unexpected schema item type&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">raise</span>
    <span class="k">return</span> <span class="n">items</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.core.flow.BaseStageHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BaseStageHandler</span>


<a href="#ankaflow.core.flow.BaseStageHandler" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">BaseStageHandler</span><span class="p">(</span><span class="n">block</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            StageBlock (ankaflow.core.flow.StageBlock)" href="#ankaflow.core.flow.StageBlock">StageBlock</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Abstract base class for stage execution handlers.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="ankaflow.core.flow.BaseStageHandler.datablock">datablock</span></code></td>
            <td>
                  <code><span title="Datablock">Datablock</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The datablock instance holding execution context.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>block</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            StageBlock (ankaflow.core.flow.StageBlock)" href="#ankaflow.core.flow.StageBlock">StageBlock</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The stage to be executed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block</span><span class="p">:</span> <span class="s2">&quot;StageBlock&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        block (StageBlock): The stage to be executed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">block</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">defs</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">defs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">log</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_connection</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">default_connection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">idb</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">idb</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">ctx</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">vars</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">Connection</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.BaseStageHandler.execute" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">execute</span>


<a href="#ankaflow.core.flow.BaseStageHandler.execute" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">execute</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Executes the stage.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>t.Union[str, None]: Result of the stage execution.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Executes the stage.</span>

<span class="sd">    Returns:</span>
<span class="sd">        t.Union[str, None]: Result of the stage execution.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Must implement execute() in subclass.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.core.flow.Flow" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Flow</span>


<a href="#ankaflow.core.flow.Flow" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">Flow</span><span class="p">(</span>
    <span class="n">defs</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.Stages)" href="#ankaflow.models.Stages">Stages</a></span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></span><span class="p">,</span>
    <span class="n">default_connection</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.ConnectionConfiguration)" href="#ankaflow.models.ConnectionConfiguration">ConnectionConfiguration</a></span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Variables (ankaflow.models.Variables)" href="#ankaflow.models.Variables">Variables</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n"><span title="logging.Logger">Logger</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">conn</span><span class="p">:</span> <span class="n"><span title="duckdb.DuckDBPyConnection">DuckDBPyConnection</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">flow_control</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            FlowControl (ankaflow.core.policy.FlowControl)" href="#ankaflow.FlowControl">FlowControl</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_context</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Flow controls the flow of data based on the pipeline definition.
The stages are run in the defined order and can either fetch data
from source (tap), transform via SQL statement, or store to sink.</p>
<p>This is the sync version and should be used in most cases.</p>



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>defs</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.Stages)" href="#ankaflow.models.Stages">Stages</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of stages to be processed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dynamic context that can be used
in query templates.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default_connection</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.ConnectionConfiguration)" href="#ankaflow.models.ConnectionConfiguration">ConnectionConfiguration</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration
passed to underlying storage or database
(s3 bucket, database connection string &amp;c).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>variables</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Any variables that can be referenced
by a tap or prepare. Ony data structures that can be passed
to pl.from_dicts() are supported in taps. Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>logger</code>
            </td>
            <td>
                  <code><span title="Logger">Logger</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If set then show() requests are logged.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>conn</code>
            </td>
            <td>
                  <code><span title="DuckDBPyConnection">DuckDBPyConnection</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Existing DuckDB connection. If not set
new connection will be created.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">defs</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Stages</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">FlowContext</span><span class="p">,</span>
    <span class="n">default_connection</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Variables</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">conn</span><span class="p">:</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyConnection</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">flow_control</span><span class="p">:</span> <span class="n">FlowControl</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_context</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        defs (Stages): List of stages to be processed.</span>
<span class="sd">        context (FlowContext): dynamic context that can be used</span>
<span class="sd">            in query templates.</span>
<span class="sd">        default_connection (ConnectionConfiguration): Configuration</span>
<span class="sd">            passed to underlying storage or database</span>
<span class="sd">            (s3 bucket, database connection string &amp;c).</span>
<span class="sd">        variables (dict, optional): Any variables that can be referenced</span>
<span class="sd">            by a tap or prepare. Ony data structures that can be passed</span>
<span class="sd">            to pl.from_dicts() are supported in taps. Defaults to {}.</span>
<span class="sd">        logger (Logger, optional): If set then show() requests are logged.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        conn (DuckDBPyConnection): Existing DuckDB connection. If not set</span>
<span class="sd">            new connection will be created.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">flow</span> <span class="o">=</span> <span class="n">AsyncFlow</span><span class="p">(</span>
        <span class="n">defs</span><span class="p">,</span>
        <span class="n">context</span><span class="p">,</span>
        <span class="n">default_connection</span><span class="p">,</span>
        <span class="n">variables</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">Variables</span><span class="p">()</span> <span class="k">if</span> <span class="n">variables</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">variables</span><span class="p">,</span>
        <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">,</span>
        <span class="n">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">,</span>
        <span class="n">flow_control</span><span class="o">=</span><span class="n">flow_control</span> <span class="ow">or</span> <span class="n">FlowControl</span><span class="p">(),</span>
        <span class="n">log_context</span><span class="o">=</span><span class="n">log_context</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.Flow.df" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">df</span>


<a href="#ankaflow.core.flow.Flow.df" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">df</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns dataframe from the last stage</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">df</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns dataframe from the last stage&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">asyncio_run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flow</span><span class="o">.</span><span class="n">df</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.Flow.pull_df" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">pull_df</span>


<a href="#ankaflow.core.flow.Flow.pull_df" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">pull_df</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Convenience method to pull final dataframe</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>pl.DataFrame: data from last stage</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">pull_df</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convenience method to pull final dataframe</span>

<span class="sd">    Returns:</span>
<span class="sd">        pl.DataFrame: data from last stage</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">asyncio_run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flow</span><span class="o">.</span><span class="n">run</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">asyncio_run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flow</span><span class="o">.</span><span class="n">df</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.Flow.show_schema" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">show_schema</span>


<a href="#ankaflow.core.flow.Flow.show_schema" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">show_schema</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="ankaflow.models.core.SchemaItem">SchemaItem</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns schemas of all supported stages</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">show_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">SchemaItem</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns schemas of all supported stages</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">asyncio_run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flow</span><span class="o">.</span><span class="n">show_schema</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.core.flow.InternalStageHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">InternalStageHandler</span>


<a href="#ankaflow.core.flow.InternalStageHandler" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">InternalStageHandler</span><span class="p">(</span><span class="n">block</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            StageBlock (ankaflow.core.flow.StageBlock)" href="#ankaflow.core.flow.StageBlock">StageBlock</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            BaseStageHandler (ankaflow.core.flow.BaseStageHandler)" href="#ankaflow.core.flow.BaseStageHandler">BaseStageHandler</a></code></p>


        <p>Handles execution for internal stages.</p>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block</span><span class="p">:</span> <span class="s2">&quot;StageBlock&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        block (StageBlock): The stage to be executed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">block</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">defs</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">defs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">log</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_connection</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">default_connection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">idb</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">idb</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">ctx</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">vars</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">Connection</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.InternalStageHandler.execute" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">execute</span>


<a href="#ankaflow.core.flow.InternalStageHandler.execute" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">execute</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Executes an internal stage.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>t.Union[str, None]: Name of the created table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes an internal stage.</span>

<span class="sd">    Returns:</span>
<span class="sd">        t.Union[str, None]: Name of the created table.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">src</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">defs</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">name</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">src</span><span class="o">.</span><span class="n">show</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="k">await</span> <span class="n">resp</span><span class="o">.</span><span class="n">df</span><span class="p">()</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;_tmp_</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;CREATE TABLE &quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot; AS SELECT * FROM &quot;_tmp_</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot;&#39;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_show</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">show</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="n">dd</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">src</span><span class="o">.</span><span class="n">kind</span><span class="si">}</span><span class="s2"> &gt; </span><span class="si">{</span><span class="n">src</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="s2">Nothing to show&quot;</span><span class="p">)</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">name</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.core.flow.PipelineStageHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">PipelineStageHandler</span>


<a href="#ankaflow.core.flow.PipelineStageHandler" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">PipelineStageHandler</span><span class="p">(</span><span class="n">block</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            StageBlock (ankaflow.core.flow.StageBlock)" href="#ankaflow.core.flow.StageBlock">StageBlock</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            BaseStageHandler (ankaflow.core.flow.BaseStageHandler)" href="#ankaflow.core.flow.BaseStageHandler">BaseStageHandler</a></code></p>


        <p>Handles execution for pipeline stages, including loop implementation.</p>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block</span><span class="p">:</span> <span class="s2">&quot;StageBlock&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        block (StageBlock): The stage to be executed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">block</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">defs</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">defs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">log</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_connection</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">default_connection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">idb</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">idb</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">ctx</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">vars</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">Connection</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.PipelineStageHandler.execute" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">execute</span>


<a href="#ankaflow.core.flow.PipelineStageHandler.execute" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">execute</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Executes a pipeline stage.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>t.Union[str, None]: Result of the pipeline stage execution.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes a pipeline stage.</span>

<span class="sd">    Returns:</span>
<span class="sd">        t.Union[str, None]: Result of the pipeline stage execution.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">db</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">block</span>
    <span class="k">if</span> <span class="n">db</span><span class="o">.</span><span class="n">prev</span><span class="p">:</span>
        <span class="c1"># Pipeline looping over previous stage results</span>
        <span class="n">rel</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">idb</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;SELECT * FROM &quot;</span><span class="si">{</span><span class="n">db</span><span class="o">.</span><span class="n">prev</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="k">await</span> <span class="n">rel</span><span class="o">.</span><span class="n">df</span><span class="p">()</span>
        <span class="n">items</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;records&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="c1"># Create new variables for each loop iteration</span>
            <span class="n">db</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="s2">&quot;loop_control&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
            <span class="c1"># Create a deep copy of the definitions for re-rendering</span>
            <span class="n">local_copy</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">defs</span><span class="o">.</span><span class="n">model_copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># &lt;- Pydantic 2-safe</span>
            <span class="n">local</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">local_copy</span><span class="p">)</span>
            <span class="c1"># local: m.Datablock = db.prepare(deepcopy(db.defs))</span>
            <span class="k">if</span> <span class="nb">bool</span><span class="p">(</span><span class="n">local</span><span class="o">.</span><span class="n">skip_if</span><span class="p">):</span>
                <span class="n">db</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Skip </span><span class="si">{</span><span class="n">local</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="n">flow</span> <span class="o">=</span> <span class="n">AsyncFlow</span><span class="p">(</span>
                <span class="n">local</span><span class="o">.</span><span class="n">stages</span><span class="p">,</span>
                <span class="n">db</span><span class="o">.</span><span class="n">ctx</span><span class="p">,</span>
                <span class="n">db</span><span class="o">.</span><span class="n">default_connection</span><span class="p">,</span>
                <span class="n">variables</span><span class="o">=</span><span class="n">db</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span>
                <span class="n">logger</span><span class="o">=</span><span class="n">db</span><span class="o">.</span><span class="n">log</span><span class="p">,</span>
                <span class="n">conn</span><span class="o">=</span><span class="n">db</span><span class="o">.</span><span class="n">idb</span><span class="p">,</span>
                <span class="n">log_context</span><span class="o">=</span><span class="n">item</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">flow</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                <span class="n">db</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                    <span class="n">print_error</span><span class="p">(</span>
                        <span class="s2">&quot;Failure in flow&quot;</span><span class="p">,</span>
                        <span class="n">err</span><span class="p">,</span>
                        <span class="s2">&quot;Current control variable:&quot;</span><span class="p">,</span>
                        <span class="n">item</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="k">raise</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="n">db</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;loop_control&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Pipeline with no loop</span>
        <span class="n">step</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">defs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">bool</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">skip_if</span><span class="p">):</span>
            <span class="n">db</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Skip </span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">flow</span> <span class="o">=</span> <span class="n">AsyncFlow</span><span class="p">(</span>
            <span class="n">step</span><span class="o">.</span><span class="n">stages</span><span class="p">,</span>
            <span class="n">db</span><span class="o">.</span><span class="n">ctx</span><span class="p">,</span>
            <span class="n">db</span><span class="o">.</span><span class="n">default_connection</span><span class="p">,</span>
            <span class="n">variables</span><span class="o">=</span><span class="n">db</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span>
            <span class="n">logger</span><span class="o">=</span><span class="n">db</span><span class="o">.</span><span class="n">log</span><span class="p">,</span>
            <span class="n">conn</span><span class="o">=</span><span class="n">db</span><span class="o">.</span><span class="n">idb</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="n">flow</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.core.flow.SQLStageHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">SQLStageHandler</span>


<a href="#ankaflow.core.flow.SQLStageHandler" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">SQLStageHandler</span><span class="p">(</span><span class="n">block</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            StageBlock (ankaflow.core.flow.StageBlock)" href="#ankaflow.core.flow.StageBlock">StageBlock</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            BaseStageHandler (ankaflow.core.flow.BaseStageHandler)" href="#ankaflow.core.flow.BaseStageHandler">BaseStageHandler</a></code></p>


        <p>Handles execution for SQL stages.</p>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block</span><span class="p">:</span> <span class="s2">&quot;StageBlock&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        block (StageBlock): The stage to be executed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">block</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">defs</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">defs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">log</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_connection</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">default_connection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">idb</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">idb</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">ctx</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">vars</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">Connection</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.SQLStageHandler.execute" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">execute</span>


<a href="#ankaflow.core.flow.SQLStageHandler.execute" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">execute</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Executes an SQL stage.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>t.Union[str, None]: Name of the target object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes an SQL stage.</span>

<span class="sd">    Returns:</span>
<span class="sd">        t.Union[str, None]: Name of the target object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">src</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">defs</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">name</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="o">.</span><span class="n">inject_secrets</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">src</span><span class="o">.</span><span class="n">show</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_show</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">show</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">name</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.core.flow.SinkStageHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">SinkStageHandler</span>


<a href="#ankaflow.core.flow.SinkStageHandler" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">SinkStageHandler</span><span class="p">(</span><span class="n">block</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            StageBlock (ankaflow.core.flow.StageBlock)" href="#ankaflow.core.flow.StageBlock">StageBlock</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            BaseStageHandler (ankaflow.core.flow.BaseStageHandler)" href="#ankaflow.core.flow.BaseStageHandler">BaseStageHandler</a></code></p>


        <p>Handles execution for sink stages.</p>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block</span><span class="p">:</span> <span class="s2">&quot;StageBlock&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        block (StageBlock): The stage to be executed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">block</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">defs</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">defs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">log</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_connection</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">default_connection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">idb</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">idb</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">ctx</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">vars</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">Connection</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.SinkStageHandler.execute" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">execute</span>


<a href="#ankaflow.core.flow.SinkStageHandler.execute" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">execute</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Executes a sink stage.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>t.Union[str, None]: None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes a sink stage.</span>

<span class="sd">    Returns:</span>
<span class="sd">        t.Union[str, None]: None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">src</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">defs</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="o">.</span><span class="n">inject_secrets</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">src</span><span class="o">.</span><span class="n">query</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">sink</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">sink</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">block</span><span class="o">.</span><span class="n">prev</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">src</span><span class="o">.</span><span class="n">show</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="n">dd</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">src</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">kind</span><span class="si">}</span><span class="s2"> &gt; </span><span class="si">{</span><span class="n">src</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="si">{</span><span class="n">src</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">locator</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.core.flow.StageBlock" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">StageBlock</span>


<a href="#ankaflow.core.flow.StageBlock" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">StageBlock</span><span class="p">(</span>
    <span class="n">conn</span><span class="p">:</span> <span class="n"><span title="ankaflow.internal.DDB">DDB</span></span><span class="p">,</span>
    <span class="n">defs</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.Stage)" href="#ankaflow.models.Stage">Stage</a></span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></span><span class="p">,</span>
    <span class="n">default_connection</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.ConnectionConfiguration)" href="#ankaflow.models.ConnectionConfiguration">ConnectionConfiguration</a></span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Variables (ankaflow.models.Variables)" href="#ankaflow.models.Variables">Variables</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="logging.Logger">Logger</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">prevous_stage</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_context</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Executable piece of a pipeline.</p>



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>conn</code>
            </td>
            <td>
                  <code><span title="ankaflow.internal.DDB">DDB</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DuckDB connection.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>defs</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.Stage)" href="#ankaflow.models.Stage">Stage</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Stage definition.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>context</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.FlowContext)" href="#ankaflow.models.FlowContext">FlowContext</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Context object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default_connection</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.ConnectionConfiguration)" href="#ankaflow.models.ConnectionConfiguration">ConnectionConfiguration</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Global persistent
connection configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>variables</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            Variables (ankaflow.models.Variables)" href="#ankaflow.models.Variables">Variables</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Any variables passed to pipeline.
Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>logger</code>
            </td>
            <td>
                  <code><span title="logging.Logger">Logger</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If set then messages are sent to
this logger. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prevous_stage</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reference to previous stage, used in
sink to obtain data from. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>log_context</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional logging context.
Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">conn</span><span class="p">:</span> <span class="s2">&quot;DDB&quot;</span><span class="p">,</span>
    <span class="n">defs</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Stage</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">FlowContext</span><span class="p">,</span>
    <span class="n">default_connection</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">ConnectionConfiguration</span><span class="p">,</span>
    <span class="n">variables</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">Variables</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">prevous_stage</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log_context</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        conn (DDB): DuckDB connection.</span>
<span class="sd">        defs (m.Stage): Stage definition.</span>
<span class="sd">        context (m.FlowContext): Context object.</span>
<span class="sd">        default_connection (m.ConnectionConfiguration): Global persistent</span>
<span class="sd">            connection configuration.</span>
<span class="sd">        variables (m.Variables, optional): Any variables passed to pipeline.</span>
<span class="sd">            Defaults to {}.</span>
<span class="sd">        logger (logging.Logger, optional): If set then messages are sent to</span>
<span class="sd">            this logger. Defaults to None.</span>
<span class="sd">        prevous_stage (str, optional): Reference to previous stage, used in</span>
<span class="sd">            sink to obtain data from. Defaults to None.</span>
<span class="sd">        log_context (str, optional): Additional logging context.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">idb</span> <span class="o">=</span> <span class="n">conn</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logger</span> <span class="ow">or</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">Variables</span><span class="p">()</span> <span class="k">if</span> <span class="n">variables</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">variables</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_connection</span> <span class="o">=</span> <span class="n">default_connection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span> <span class="o">=</span> <span class="n">context</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">defs</span> <span class="o">=</span> <span class="n">defs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">prev</span> <span class="o">=</span> <span class="n">prevous_stage</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_context</span> <span class="o">=</span> <span class="n">log_context</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.StageBlock.do" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">do</span>


<a href="#ankaflow.core.flow.StageBlock.do" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">do</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Executes the current block.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>t.Union[str, None]: Executed block name.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">do</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes the current block.</span>

<span class="sd">    Returns:</span>
<span class="sd">        t.Union[str, None]: Executed block name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">defs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">defs</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">defs</span><span class="o">.</span><span class="n">skip_if</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Skip &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">defs</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">handler</span> <span class="o">=</span> <span class="k">await</span> <span class="n">StageFactory</span><span class="o">.</span><span class="n">get_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">handler</span><span class="o">.</span><span class="n">_init_connection</span><span class="p">()</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">handler</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.StageBlock.prepare" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">prepare</span>


<a href="#ankaflow.core.flow.StageBlock.prepare" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">prepare</span><span class="p">(</span><span class="n">src</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.Stage)" href="#ankaflow.models.Stage">Stage</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.Stage)" href="#ankaflow.models.Stage">Stage</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Prepare dynamic variables in the block.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>src</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.Stage)" href="#ankaflow.models.Stage">Stage</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current block.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.Stage)" href="#ankaflow.models.Stage">Stage</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>m.Datablock: Block with variables evaluated.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">prepare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Stage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">m</span><span class="o">.</span><span class="n">Stage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Prepare dynamic variables in the block.</span>

<span class="sd">    Args:</span>
<span class="sd">        src (m.Stage): Current block.</span>

<span class="sd">    Returns:</span>
<span class="sd">        m.Datablock: Block with variables evaluated.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">renderer</span> <span class="o">=</span> <span class="n">Renderer</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ctx</span><span class="p">,</span> <span class="n">API</span><span class="o">=</span><span class="n">API</span><span class="p">,</span> <span class="n">variables</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">src</span><span class="o">.</span><span class="n">skip_if</span><span class="p">:</span>
        <span class="n">src</span><span class="o">.</span><span class="n">skip_if</span> <span class="o">=</span> <span class="n">string_to_bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">skip_if</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">src</span><span class="o">.</span><span class="n">query</span><span class="p">:</span>
        <span class="n">src</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">src</span><span class="o">.</span><span class="n">connection</span><span class="p">:</span>
        <span class="n">src</span><span class="o">.</span><span class="n">connection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">connection</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">src</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.StageBlock.render" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">render</span>


<a href="#ankaflow.core.flow.StageBlock.render" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">render</span><span class="p">(</span><span class="n">templ</span><span class="p">:</span> <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="pydantic.BaseModel">BaseModel</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Evaluates a template string using context and API.</p>


<details class="available-variables-in-the-template" open>
  <summary>Available variables in the template</summary>
  <ul>
<li>context: Context object.</li>
<li>API: API object.</li>
<li>variables: Variables dictionary.</li>
</ul>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>templ</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="ankaflow.models.BaseModel">BaseModel</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Template containing variables.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Evaluated query string.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">templ</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Evaluates a template string using context and API.</span>

<span class="sd">    Available variables in the template:</span>
<span class="sd">      - context: Context object.</span>
<span class="sd">      - API: API object.</span>
<span class="sd">      - variables: Variables dictionary.</span>

<span class="sd">    Args:</span>
<span class="sd">        templ (t.Union[str, m.BaseModel]): Template containing variables.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Evaluated query string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">templ</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
            <span class="bp">cls</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">templ</span><span class="p">)</span>
            <span class="n">templ</span> <span class="o">=</span> <span class="n">templ</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore[assignment]</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">renderer</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">templ</span><span class="p">)</span>  <span class="c1"># type: ignore[assignment]</span>
        <span class="k">if</span> <span class="bp">cls</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>  <span class="c1"># type: ignore</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">templ</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">raise</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.core.flow.StageFactory" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">StageFactory</span>


<a href="#ankaflow.core.flow.StageFactory" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">


        <p>Factory to obtain the appropriate stage handler based on stage kind.</p>











  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.StageFactory.get_handler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">get_handler</span>


<a href="#ankaflow.core.flow.StageFactory.get_handler" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_handler</span><span class="p">(</span><span class="n">block</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            StageBlock (ankaflow.core.flow.StageBlock)" href="#ankaflow.core.flow.StageBlock">StageBlock</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            BaseStageHandler (ankaflow.core.flow.BaseStageHandler)" href="#ankaflow.core.flow.BaseStageHandler">BaseStageHandler</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Creates a stage handler instance.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>block</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            StageBlock (ankaflow.core.flow.StageBlock)" href="#ankaflow.core.flow.StageBlock">StageBlock</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The datablock instance.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>BaseStageHandler</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            BaseStageHandler (ankaflow.core.flow.BaseStageHandler)" href="#ankaflow.core.flow.BaseStageHandler">BaseStageHandler</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The corresponding stage handler.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_handler</span><span class="p">(</span><span class="n">block</span><span class="p">:</span> <span class="s2">&quot;StageBlock&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseStageHandler</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a stage handler instance.</span>

<span class="sd">    Args:</span>
<span class="sd">       block (&quot;StageBlock&quot;): The datablock instance.</span>

<span class="sd">    Returns:</span>
<span class="sd">        BaseStageHandler: The corresponding stage handler.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">kind</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">defs</span><span class="o">.</span><span class="n">kind</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">hndlr</span> <span class="o">=</span> <span class="n">StageFactory</span><span class="o">.</span><span class="n">HANDLERS</span><span class="p">[</span><span class="n">kind</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">hndlr</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown stage kind: </span><span class="si">{</span><span class="n">kind</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.core.flow.TapStageHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">TapStageHandler</span>


<a href="#ankaflow.core.flow.TapStageHandler" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">TapStageHandler</span><span class="p">(</span><span class="n">block</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            StageBlock (ankaflow.core.flow.StageBlock)" href="#ankaflow.core.flow.StageBlock">StageBlock</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            BaseStageHandler (ankaflow.core.flow.BaseStageHandler)" href="#ankaflow.core.flow.BaseStageHandler">BaseStageHandler</a></code></p>


        <p>Handles execution for source stages.</p>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block</span><span class="p">:</span> <span class="s2">&quot;StageBlock&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        block (StageBlock): The stage to be executed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">block</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">defs</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">defs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">log</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_connection</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">default_connection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">idb</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">idb</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">ctx</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">vars</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">Connection</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.TapStageHandler.execute" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">execute</span>


<a href="#ankaflow.core.flow.TapStageHandler.execute" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">execute</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Executes a source stage.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>t.Union[str, None]: Name of the created source table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes a source stage.</span>

<span class="sd">    Returns:</span>
<span class="sd">        t.Union[str, None]: Name of the created source table.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">src</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">defs</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">name</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="o">.</span><span class="n">inject_secrets</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">tap</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="n">src</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;DROP TABLE IF EXISTS &quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="k">raise</span>
    <span class="k">if</span> <span class="n">src</span><span class="o">.</span><span class="n">show_schema</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">show_schema</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">fields</span><span class="o">.</span><span class="n">print</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot show schema: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">src</span><span class="o">.</span><span class="n">show</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_show</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">show</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">name</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.core.flow.TransformStageHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">TransformStageHandler</span>


<a href="#ankaflow.core.flow.TransformStageHandler" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">TransformStageHandler</span><span class="p">(</span><span class="n">block</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            StageBlock (ankaflow.core.flow.StageBlock)" href="#ankaflow.core.flow.StageBlock">StageBlock</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            BaseStageHandler (ankaflow.core.flow.BaseStageHandler)" href="#ankaflow.core.flow.BaseStageHandler">BaseStageHandler</a></code></p>


        <p>Handles execution for transform stages.</p>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block</span><span class="p">:</span> <span class="s2">&quot;StageBlock&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        block (StageBlock): The stage to be executed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">block</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">defs</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">defs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">log</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_connection</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">default_connection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">idb</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">idb</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ctx</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">ctx</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">vars</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">Connection</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.core.flow.TransformStageHandler.execute" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">execute</span>


<a href="#ankaflow.core.flow.TransformStageHandler.execute" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">execute</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Executes a transform stage.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>t.Union[str, None]: Name of the created view.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/core/flow.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes a transform stage.</span>

<span class="sd">    Returns:</span>
<span class="sd">        t.Union[str, None]: Name of the created view.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">src</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">defs</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">name</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;CREATE OR REPLACE VIEW &quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot; as </span><span class="si">{</span><span class="n">src</span><span class="o">.</span><span class="n">query</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">src</span><span class="o">.</span><span class="n">show_schema</span><span class="p">:</span>
        <span class="n">sch</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">Schema</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">idb</span><span class="p">)</span>
        <span class="n">fields</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">Columns</span> <span class="o">=</span> <span class="k">await</span> <span class="n">sch</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema of &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">fields</span><span class="o">.</span><span class="n">print</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">src</span><span class="o">.</span><span class="n">show</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_show</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">show</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">name</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="ankaflow.errors" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">errors</span>


<a href="#ankaflow.errors" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">










  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="ankaflow.internal" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">internal</span>


<a href="#ankaflow.internal" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">










  <div class="doc doc-children">











<div class="doc doc-object doc-module">



<h3 id="ankaflow.internal.browser" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">browser</span>


<a href="#ankaflow.internal.browser" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="ankaflow.internal.browser.DDB" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">DDB</span>


<a href="#ankaflow.internal.browser.DDB" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">DDB</span><span class="p">(</span>
    <span class="n">connection_options</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.configs.ConnectionConfiguration)" href="#ankaflow.models.configs.ConnectionConfiguration">ConnectionConfiguration</a></span><span class="p">,</span>
    <span class="n">persisted</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Initializes the DuckDB browser-bound client.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>connection_options</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.configs.ConnectionConfiguration)" href="#ankaflow.models.configs.ConnectionConfiguration">ConnectionConfiguration</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Connection settings.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">connection_options</span><span class="p">:</span> <span class="n">ConnectionConfiguration</span><span class="p">,</span>
    <span class="n">persisted</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the DuckDB browser-bound client.</span>

<span class="sd">    Args:</span>
<span class="sd">        connection_options (ConnectionConfiguration): Connection settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">conn_opts</span> <span class="o">=</span> <span class="n">connection_options</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">secrets</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">BucketConfig</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fs</span> <span class="o">=</span> <span class="n">FileSystem</span><span class="p">(</span><span class="s2">&quot;/tmp&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remote</span> <span class="o">=</span> <span class="n">RemoteObject</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">secrets</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyConnection</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dbname</span> <span class="o">=</span> <span class="n">persisted</span> <span class="ow">or</span> <span class="s2">&quot;:memory:&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">unsupported_functions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;delta_scan&quot;</span><span class="p">,</span> <span class="s2">&quot;postgres_scan&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_init_secrets</span><span class="p">(</span><span class="n">connection_options</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.internal.browser.DDB.connect" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">connect</span>


<a href="#ankaflow.internal.browser.DDB.connect" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">connect</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            DDB (ankaflow.internal.browser.DDB)" href="#ankaflow.internal.browser.DDB">DDB</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Establishes a DuckDB connection and initializes context.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DDB&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Establishes a DuckDB connection and initializes context.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dbname</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_settings</span><span class="p">()</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_functions</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.internal.browser.DDB.delta_scan" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">delta_scan</span>


<a href="#ankaflow.internal.browser.DDB.delta_scan" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">delta_scan</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Stub for unsupported delta_scan.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delta_scan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stub for unsupported delta_scan.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
        <span class="s2">&quot;delta_scan is not supported in browser environment&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.internal.browser.DDB.get" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">get</span>


<a href="#ankaflow.internal.browser.DDB.get" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="duckdb.DuckDBPyConnection">DuckDBPyConnection</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the internal DuckDB connection object.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyConnection</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the internal DuckDB connection object.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.internal.browser.DDB.inject_secrets" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">inject_secrets</span>


<a href="#ankaflow.internal.browser.DDB.inject_secrets" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">inject_secrets</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n">connection_options</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.configs.ConnectionConfiguration)" href="#ankaflow.models.configs.ConnectionConfiguration">ConnectionConfiguration</a></span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Injects secret configuration dynamically.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Secret identifier.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>connection_options</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.configs.ConnectionConfiguration)" href="#ankaflow.models.configs.ConnectionConfiguration">ConnectionConfiguration</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration details.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">inject_secrets</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">connection_options</span><span class="p">:</span> <span class="n">ConnectionConfiguration</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Injects secret configuration dynamically.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): Secret identifier.</span>
<span class="sd">        connection_options (ConnectionConfiguration): Configuration details.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_init_secrets</span><span class="p">(</span><span class="n">connection_options</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.internal.browser.DDB.parquet_scan" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">parquet_scan</span>


<a href="#ankaflow.internal.browser.DDB.parquet_scan" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">parquet_scan</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Stub for unsupported parquet_scan.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">parquet_scan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stub for unsupported parquet_scan.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;parquet_scan is not yet implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.internal.browser.DDB.read_csv" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">read_csv</span>


<a href="#ankaflow.internal.browser.DDB.read_csv" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">read_csv</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n">read_opts</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="duckdb.DuckDBPyRelation">DuckDBPyRelation</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Reads CSV data into a DuckDB table.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>File path or URL.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>table</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Target table name.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>read_opts</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Options passed to DuckDB read_csv().</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="duckdb.DuckDBPyRelation">DuckDBPyRelation</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>duckdb.DuckDBPyRelation: The resulting table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">read_csv</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">read_opts</span><span class="p">:</span> <span class="nb">dict</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyRelation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reads CSV data into a DuckDB table.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (str): File path or URL.</span>
<span class="sd">        table (str): Target table name.</span>
<span class="sd">        read_opts (dict): Options passed to DuckDB read_csv().</span>

<span class="sd">    Returns:</span>
<span class="sd">        duckdb.DuckDBPyRelation: The resulting table.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tbl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">read_opts</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;INSERT INTO </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2"> FROM tbl;&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">CatalogException</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CREATE TABLE </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2"> AS FROM tbl;&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tbl</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.internal.browser.DDB.read_json" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">read_json</span>


<a href="#ankaflow.internal.browser.DDB.read_json" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">read_json</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n">read_opts</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="duckdb.DuckDBPyRelation">DuckDBPyRelation</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Reads JSON data into a DuckDB table.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>File path or URL.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>table</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Target table name.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>read_opts</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Options passed to DuckDB read_json().</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="duckdb.DuckDBPyRelation">DuckDBPyRelation</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>duckdb.DuckDBPyRelation: The resulting table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">read_json</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">read_opts</span><span class="p">:</span> <span class="nb">dict</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyRelation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reads JSON data into a DuckDB table.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (str): File path or URL.</span>
<span class="sd">        table (str): Target table name.</span>
<span class="sd">        read_opts (dict): Options passed to DuckDB read_json().</span>

<span class="sd">    Returns:</span>
<span class="sd">        duckdb.DuckDBPyRelation: The resulting table.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tbl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">read_opts</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;INSERT INTO </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2"> FROM tbl;&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">CatalogException</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CREATE TABLE </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2"> AS FROM tbl;&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tbl</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.internal.browser.DDB.read_parquet" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">read_parquet</span>


<a href="#ankaflow.internal.browser.DDB.read_parquet" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">read_parquet</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n">read_opts</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="duckdb.DuckDBPyRelation">DuckDBPyRelation</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Reads Parquet data into a DuckDB table.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>File path or URL.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>table</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Target table name.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>read_opts</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Options passed to DuckDB read_parquet().</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="duckdb.DuckDBPyRelation">DuckDBPyRelation</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>duckdb.DuckDBPyRelation: The resulting table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">read_parquet</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">read_opts</span><span class="p">:</span> <span class="nb">dict</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyRelation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reads Parquet data into a DuckDB table.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (str): File path or URL.</span>
<span class="sd">        table (str): Target table name.</span>
<span class="sd">        read_opts (dict): Options passed to DuckDB read_parquet().</span>

<span class="sd">    Returns:</span>
<span class="sd">        duckdb.DuckDBPyRelation: The resulting table.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tbl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">read_opts</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;INSERT INTO </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2"> FROM tbl;&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">CatalogException</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CREATE TABLE </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2"> AS FROM tbl;&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tbl</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.internal.browser.DDB.register" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">register</span>


<a href="#ankaflow.internal.browser.DDB.register" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">register</span><span class="p">(</span><span class="n">view_name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Registers a Python object as a DuckDB view.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>view_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>View name.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>object</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Python object to register.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Registers a Python object as a DuckDB view.</span>

<span class="sd">    Args:</span>
<span class="sd">        view_name (str): View name.</span>
<span class="sd">        object: Python object to register.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">view_name</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.internal.browser.DDB.sql" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">sql</span>


<a href="#ankaflow.internal.browser.DDB.sql" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">sql</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            Relation (ankaflow.internal.browser.Relation)" href="#ankaflow.internal.browser.Relation">Relation</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Executes a DuckDB SQL query after intercepting remote I/O references.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>query</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SQL string.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Relation</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            Relation (ankaflow.internal.browser.Relation)" href="#ankaflow.internal.browser.Relation">Relation</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resulting relation object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Relation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes a DuckDB SQL query after intercepting remote I/O references.</span>

<span class="sd">    Args:</span>
<span class="sd">        query (str): SQL string.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Relation: Resulting relation object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_for_unsupported</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="c1"># query = await self._process_io_calls(query)</span>
    <span class="n">rewriter</span> <span class="o">=</span> <span class="n">DuckDBIORewriter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">remote</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fs</span><span class="p">)</span>
    <span class="n">query</span> <span class="o">=</span> <span class="k">await</span> <span class="n">rewriter</span><span class="o">.</span><span class="n">rewrite</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Relation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="n">query</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.internal.browser.DDB.unregister" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">unregister</span>


<a href="#ankaflow.internal.browser.DDB.unregister" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">unregister</span><span class="p">(</span><span class="n">view_name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Unregisters a DuckDB view.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>view_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>View name to remove.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">unregister</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Unregisters a DuckDB view.</span>

<span class="sd">    Args:</span>
<span class="sd">        view_name (str): View name to remove.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="n">view_name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.internal.browser.DuckDBIORewriter" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">DuckDBIORewriter</span>


<a href="#ankaflow.internal.browser.DuckDBIORewriter" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">DuckDBIORewriter</span><span class="p">(</span>
    <span class="n">remote</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            RemoteObject (ankaflow.internal.browser.RemoteObject)" href="#ankaflow.internal.browser.RemoteObject">RemoteObject</a></span><span class="p">,</span> <span class="n">filesystem</span><span class="p">:</span> <span class="n"><span title="ankaflow.common.filesystem.FileSystem">FileSystem</span></span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Intercepts and rewrites DuckDB read() calls that reference remote paths.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>scope</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>scope of the current rewrite (stage name)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>remote</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            RemoteObject (ankaflow.internal.browser.RemoteObject)" href="#ankaflow.internal.browser.RemoteObject">RemoteObject</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Remote downloader/uploader.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filesystem</code>
            </td>
            <td>
                  <code><span title="ankaflow.common.filesystem.FileSystem">FileSystem</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Local filesystem to store fetched content.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">remote</span><span class="p">:</span> <span class="s2">&quot;RemoteObject&quot;</span><span class="p">,</span> <span class="n">filesystem</span><span class="p">:</span> <span class="n">FileSystem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Intercepts and rewrites DuckDB read() calls that reference remote paths.</span>

<span class="sd">    Args:</span>
<span class="sd">        scope (str): scope of the current rewrite (stage name)</span>
<span class="sd">        remote (RemoteObject): Remote downloader/uploader.</span>
<span class="sd">        filesystem (FileSystem): Local filesystem to store fetched content.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remote</span> <span class="o">=</span> <span class="n">remote</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fs</span><span class="p">:</span> <span class="n">FileSystem</span> <span class="o">=</span> <span class="n">filesystem</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.internal.browser.DuckDBIORewriter.rewrite" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">rewrite</span>


<a href="#ankaflow.internal.browser.DuckDBIORewriter.rewrite" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">rewrite</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Rewrites read_*() calls with remote URIs to local paths.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>query</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The SQL query string.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The rewritten query.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="NotImplementedError">NotImplementedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>For globs or multi-file remote reads.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">rewrite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Rewrites read_*() calls with remote URIs to local paths.</span>

<span class="sd">    Args:</span>
<span class="sd">        query (str): The SQL query string.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The rewritten query.</span>

<span class="sd">    Raises:</span>
<span class="sd">        NotImplementedError: For globs or multi-file remote reads.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pattern</span> <span class="o">=</span> <span class="p">(</span>
        <span class="sa">r</span><span class="s2">&quot;read_(parquet|csv|json)(_auto)?\s*\(\s*(\[.*?\]|&#39;.*?&#39;|</span><span class="se">\&quot;</span><span class="s2">.*?</span><span class="se">\&quot;</span><span class="s2">)&quot;</span>  <span class="c1"># noqa:E501</span>
    <span class="p">)</span>
    <span class="n">matches</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">arg_str</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">:</span>
        <span class="n">paths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_paths</span><span class="p">(</span><span class="n">arg_str</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">path_str</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">PathFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">path_str</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">RemotePath</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">is_glob</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                        <span class="s2">&quot;Remote globs are not supported.&quot;</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">paths</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                        <span class="s2">&quot;Multiple remote files are not supported.&quot;</span>
                    <span class="p">)</span>

                <span class="n">local_path</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rewrite_remote_to_local</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                <span class="n">query</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">path_str</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">local_path</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">query</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.internal.browser.Relation" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Relation</span>


<a href="#ankaflow.internal.browser.Relation" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">Relation</span><span class="p">(</span><span class="n">relation</span><span class="p">:</span> <span class="n"><span title="duckdb.DuckDBPyRelation">DuckDBPyRelation</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Wraps a DuckDBPyRelation for async compatibility.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>relation</code>
            </td>
            <td>
                  <code><span title="duckdb.DuckDBPyRelation">DuckDBPyRelation</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DuckDB relation object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relation</span><span class="p">:</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyRelation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wraps a DuckDBPyRelation for async compatibility.</span>

<span class="sd">    Args:</span>
<span class="sd">        relation (duckdb.DuckDBPyRelation): DuckDB relation object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">rel</span> <span class="o">=</span> <span class="n">relation</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.internal.browser.Relation.arrow" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">arrow</span>


<a href="#ankaflow.internal.browser.Relation.arrow" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">arrow</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the relation as Arrow table.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">arrow</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the relation as Arrow table.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rel</span><span class="o">.</span><span class="n">arrow</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.internal.browser.Relation.df" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">df</span>


<a href="#ankaflow.internal.browser.Relation.df" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">df</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the relation as a pandas DataFrame.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">df</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the relation as a pandas DataFrame.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rel</span><span class="o">.</span><span class="n">df</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.internal.browser.RemoteObject" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">RemoteObject</span>


<a href="#ankaflow.internal.browser.RemoteObject" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">RemoteObject</span><span class="p">(</span><span class="n">secrets</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span><span class="p">,</span> <span class="n">fs</span><span class="p">:</span> <span class="n"><span title="ankaflow.common.filesystem.FileSystem">FileSystem</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Initializes a RemoteObject handler.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>secrets</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Credentials or connection metadata.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fs</code>
            </td>
            <td>
                  <code><span title="ankaflow.common.filesystem.FileSystem">FileSystem</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>File system handler to save fetched content.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>








                  <details class="quote">
                    <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">secrets</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">fs</span><span class="p">:</span> <span class="n">FileSystem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes a RemoteObject handler.</span>

<span class="sd">    Args:</span>
<span class="sd">        secrets (dict): Credentials or connection metadata.</span>
<span class="sd">        fs (FileSystem): File system handler to save fetched content.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">secrets</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">BucketConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">secrets</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fs</span> <span class="o">=</span> <span class="n">fs</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.internal.browser.RemoteObject.fetch" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">fetch</span>


<a href="#ankaflow.internal.browser.RemoteObject.fetch" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">fetch</span><span class="p">(</span><span class="n">remote_path</span><span class="p">:</span> <span class="n"><span title="ankaflow.common.path.RemotePath">RemotePath</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="bytes">bytes</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Downloads the content at the remote path.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>remote_path</code>
            </td>
            <td>
                  <code><span title="ankaflow.common.path.RemotePath">RemotePath</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The remote object URI.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bytes</code></td>            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Content fetched from the remote URL.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="IOError">IOError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If fetch fails due to network or CORS.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">fetch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">remote_path</span><span class="p">:</span> <span class="n">RemotePath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Downloads the content at the remote path.</span>

<span class="sd">    Args:</span>
<span class="sd">        remote_path (RemotePath): The remote object URI.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bytes: Content fetched from the remote URL.</span>

<span class="sd">    Raises:</span>
<span class="sd">        IOError: If fetch fails due to network or CORS.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># secrets dict stores anchor for each bucket.</span>
    <span class="n">secret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">secrets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">remote_path</span><span class="o">.</span><span class="n">anchor</span><span class="p">,</span> <span class="n">BucketConfig</span><span class="p">())</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">remote_path</span><span class="o">.</span><span class="n">get_endpoint</span><span class="p">(</span><span class="n">secret</span><span class="o">.</span><span class="n">region</span><span class="p">)</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pyfetch</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Fetch failed: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">statusText</span><span class="si">}</span><span class="s2"> for </span><span class="si">{</span><span class="n">remote_path</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># noqa:E501 # type: ignore</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">bytes</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Failed fetch - possible CORS or network issue: </span><span class="si">{</span><span class="n">remote_path</span><span class="si">}</span><span class="s2"> =&gt; </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># noqa:E501</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.internal.browser.RemoteObject.upload" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">upload</span>


<a href="#ankaflow.internal.browser.RemoteObject.upload" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">upload</span><span class="p">(</span><span class="n">remote_path</span><span class="p">:</span> <span class="n"><span title="ankaflow.common.path.RemotePath">RemotePath</span></span><span class="p">,</span> <span class="n">local_file</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Uploads a local file to a remote path (stub).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>remote_path</code>
            </td>
            <td>
                  <code><span title="ankaflow.common.path.RemotePath">RemotePath</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Destination remote URI.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>local_file</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the local file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="NotImplementedError">NotImplementedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/internal/browser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">remote_path</span><span class="p">:</span> <span class="n">RemotePath</span><span class="p">,</span> <span class="n">local_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Uploads a local file to a remote path (stub).</span>

<span class="sd">    Args:</span>
<span class="sd">        remote_path (RemotePath): Destination remote URI.</span>
<span class="sd">        local_file (str): Path to the local file.</span>

<span class="sd">    Raises:</span>
<span class="sd">        NotImplementedError: Always.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Upload stub: </span><span class="si">{</span><span class="n">local_file</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">remote_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Upload not implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="ankaflow.internal.duckdb" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">duckdb</span>


<a href="#ankaflow.internal.duckdb" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="ankaflow.internal.duckdb.Relation" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Relation</span>


<a href="#ankaflow.internal.duckdb.Relation" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Relation is an async shim
similar to DuckDBPyRelation object</p>











  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.internal.duckdb.Relation.raw" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">raw</span>


<a href="#ankaflow.internal.duckdb.Relation.raw" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">raw</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="duckdb.DuckDBPyRelation">DuckDBPyRelation</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Exposes underlying native DuckDBPyRelation with full api.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="duckdb.DuckDBPyRelation">DuckDBPyRelation</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DuckDBPyRelation</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/internal/duckdb.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">raw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DuckDBPyRelation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Exposes underlying native DuckDBPyRelation with full api.</span>

<span class="sd">    Returns:</span>
<span class="sd">        DuckDBPyRelation</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="ankaflow.internal.macros" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">macros</span>


<a href="#ankaflow.internal.macros" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="ankaflow.internal.macros.Fn" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Fn</span>


<a href="#ankaflow.internal.macros.Fn" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">


        <p>Miscellaneous utility and convenience macros (UDFs)</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.internal.macros.Fn.dt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">dt</span>


<a href="#ankaflow.internal.macros.Fn.dt" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">dt</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">    (a, fail_on_error := FALSE) AS</span><span class="se">\n</span><span class="s2">    CASE</span><span class="se">\n</span><span class="s2">        -- Case 1: ISO string with optional timezone → strip and cast</span><span class="se">\n</span><span class="s2">        WHEN TRY_CAST(REGEXP_REPLACE(CAST(a AS TEXT), &#39;(Z|[+-][0-9]</span><span class="si">{2}</span><span class="s2">:[0-9]</span><span class="si">{2}</span><span class="s2">)$&#39;, &#39;&#39;) AS TIMESTAMP) IS NOT NULL</span><span class="se">\n</span><span class="s2">            THEN CAST(REGEXP_REPLACE(CAST(a AS TEXT), &#39;(Z|[+-][0-9]</span><span class="si">{2}</span><span class="s2">:[0-9]</span><span class="si">{2}</span><span class="s2">)$&#39;, &#39;&#39;) AS TIMESTAMP)</span><span class="se">\n\n</span><span class="s2">        -- Case 2: Standard timestamp string</span><span class="se">\n</span><span class="s2">        WHEN TRY_CAST(a AS TIMESTAMP) IS NOT NULL</span><span class="se">\n</span><span class="s2">            THEN CAST(a AS TIMESTAMP)</span><span class="se">\n\n</span><span class="s2">        -- Case 3: ISO-style date</span><span class="se">\n</span><span class="s2">        WHEN TRY_CAST(a AS DATE) IS NOT NULL</span><span class="se">\n</span><span class="s2">            THEN CAST(a AS TIMESTAMP)</span><span class="se">\n\n</span><span class="s2">        -- Case 4: Unix time in seconds (int or float)</span><span class="se">\n</span><span class="s2">        WHEN TRY_CAST(a AS DOUBLE) IS NOT NULL</span><span class="se">\n</span><span class="s2">            AND CAST(a AS TEXT) ~ &#39;^[0-9]+(</span><span class="se">\\</span><span class="s2">.[0-9]+)?$&#39;</span><span class="se">\n</span><span class="s2">            AND TRY_CAST(CAST(a AS DOUBLE) AS BIGINT) BETWEEN 1000000000 AND 9999999999</span><span class="se">\n</span><span class="s2">        THEN make_timestamp(CAST(CAST(a AS DOUBLE) * 1000000 AS BIGINT))  -- seconds → microseconds</span><span class="se">\n\n\n</span><span class="s2">        -- Case 5: nanoseconds (length &gt; 15)</span><span class="se">\n</span><span class="s2">        WHEN TRY_CAST(a AS BIGINT) IS NOT NULL</span><span class="se">\n</span><span class="s2">            AND CAST(a AS TEXT) ~ &#39;^[0-9]+$&#39;</span><span class="se">\n</span><span class="s2">            AND LENGTH(CAST(a AS TEXT)) &gt; 15</span><span class="se">\n</span><span class="s2">            THEN make_timestamp(CAST(TRY_CAST(a AS BIGINT) / 1000 AS BIGINT))</span><span class="se">\n\n</span><span class="s2">        -- Case 6: milliseconds</span><span class="se">\n</span><span class="s2">        WHEN TRY_CAST(a AS BIGINT) IS NOT NULL</span><span class="se">\n</span><span class="s2">            AND CAST(a AS TEXT) ~ &#39;^[0-9]+$&#39;</span><span class="se">\n</span><span class="s2">            THEN make_timestamp(CAST(TRY_CAST(a AS BIGINT) * 1000 AS BIGINT))</span><span class="se">\n\n</span><span class="s2">        -- Case 7: Explicit fail for other strings</span><span class="se">\n</span><span class="s2">        WHEN TYPEOF(a) = &#39;VARCHAR&#39; AND LENGTH(CAST(a AS TEXT)) &gt; 1 AND fail_on_error = TRUE</span><span class="se">\n</span><span class="s2">            THEN CAST(&#39;Unsupported format - use Fn.dt(value, pattern)&#39; AS TIMESTAMP)</span><span class="se">\n\n</span><span class="s2">        -- Fallback</span><span class="se">\n</span><span class="s2">        ELSE make_timestamp(0)</span><span class="se">\n</span><span class="s2">    END,</span><span class="se">\n</span><span class="s2">    (value, pattern) AS (</span><span class="se">\n</span><span class="s2">            SELECT * FROM query(</span><span class="se">\n</span><span class="s2">                concat(</span><span class="se">\n</span><span class="s2">                    &#39;SELECT STRPTIME(&#39;&#39;&#39;,</span><span class="se">\n\n</span><span class="s2">                    -- Strip TZ suffix from value</span><span class="se">\n</span><span class="s2">                    REGEXP_REPLACE(value, &#39;(Z|[+-][0-9]</span><span class="si">{2}</span><span class="s2">:[0-9]</span><span class="si">{2}</span><span class="s2">|[A-Za-z/_]+)$&#39;, &#39;&#39;),</span><span class="se">\n\n</span><span class="s2">                    &#39;&#39;&#39;,&#39;&#39;&#39;,</span><span class="se">\n\n</span><span class="s2">                    -- Auto-detect and convert human-readable patterns</span><span class="se">\n</span><span class="s2">                    CASE</span><span class="se">\n</span><span class="s2">                        WHEN POSITION(&#39;%&#39; IN pattern) &gt; 0 THEN</span><span class="se">\n</span><span class="s2">                            REGEXP_REPLACE(REGEXP_REPLACE(pattern, &#39;%z&#39;, &#39;&#39;), &#39;%Z&#39;, &#39;&#39;)</span><span class="se">\n</span><span class="s2">                        ELSE</span><span class="se">\n</span><span class="s2">                            REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(</span><span class="se">\n</span><span class="s2">                                pattern,</span><span class="se">\n</span><span class="s2">                                &#39;YYYY&#39;, &#39;%Y&#39;),</span><span class="se">\n</span><span class="s2">                                &#39;MM&#39;, &#39;%m&#39;),</span><span class="se">\n</span><span class="s2">                                &#39;DD&#39;, &#39;</span><span class="si">%d</span><span class="s2">&#39;),</span><span class="se">\n</span><span class="s2">                                &#39;HH&#39;, &#39;%H&#39;),</span><span class="se">\n</span><span class="s2">                                &#39;mm&#39;, &#39;%M&#39;),</span><span class="se">\n</span><span class="s2">                                &#39;ss&#39;, &#39;%S&#39;)</span><span class="se">\n</span><span class="s2">                    END,</span><span class="se">\n\n</span><span class="s2">                    &#39;&#39;&#39;)&#39;</span><span class="se">\n</span><span class="s2">                )</span><span class="se">\n</span><span class="s2">            )</span><span class="se">\n</span><span class="s2">        );</span><span class="se">\n</span><span class="s2">    &quot;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>dt macro provides robust datetime parsing and normalization.</p>
<p>Overload (a):
    Accepts any input value and attempts to convert it to a TIMESTAMP.
    - Supports TIMESTAMP_NS, TIMESTAMP, DATE, and BIGINT (UNIX ms).
    - Automatically strips time zone suffixes (Z or ±HH:MM) from strings.
    - Fails with a descriptive error if input is unrecognized.</p>
<p>Overload (value, pattern):
    Dynamically parses a string using STRPTIME.
    - Strips unsupported time zone suffixes (Z or ±HH:MM) from input.
    - Removes %z and %Z from format string, as DuckDB does not interpret timezones.
    - Uses query() to compile a literal SQL expression for parsing.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A DuckDB TIMESTAMP or a hard failure on invalid input.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>






  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="ankaflow.internal.server" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">server</span>


<a href="#ankaflow.internal.server" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="ankaflow.internal.server.DDB" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">DDB</span>


<a href="#ankaflow.internal.server.DDB" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">DDB</span><span class="p">(</span>
    <span class="n">connection_options</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.configs.ConnectionConfiguration)" href="#ankaflow.models.configs.ConnectionConfiguration">ConnectionConfiguration</a></span><span class="p">,</span>
    <span class="n">persisted</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">









                  <details class="quote">
                    <summary>Source code in <code>ankaflow/internal/server.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">connection_options</span><span class="p">:</span> <span class="n">ConnectionConfiguration</span><span class="p">,</span>
    <span class="n">persisted</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dbname</span> <span class="o">=</span> <span class="n">persisted</span> <span class="ow">or</span> <span class="s2">&quot;:memory:&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">conn_opts</span> <span class="o">=</span> <span class="n">connection_options</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">:</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyConnection</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="ankaflow.models" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">models</span>


<a href="#ankaflow.models" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.BigQueryConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BigQueryConfig</span>


<a href="#ankaflow.models.BigQueryConfig" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Configuration for accessing BigQuery datasets.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.BigQueryConfig.credential_file" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">credential_file</span>


<a href="#ankaflow.models.BigQueryConfig.credential_file" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">credential_file</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Path to service account JSON credentials for BigQuery access.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.BigQueryConfig.dataset" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">dataset</span>


<a href="#ankaflow.models.BigQueryConfig.dataset" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">dataset</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>BigQuery dataset name.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.BigQueryConfig.project" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">project</span>


<a href="#ankaflow.models.BigQueryConfig.project" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">project</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>GCP project ID containing the BigQuery dataset.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.BigQueryConfig.region" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">region</span>


<a href="#ankaflow.models.BigQueryConfig.region" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">region</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>BigQuery region (e.g., "us-central1").</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.BigQueryConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BigQueryConnection</span>


<a href="#ankaflow.models.BigQueryConnection" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            PhysicalConnection (ankaflow.models.connections.PhysicalConnection)" href="#ankaflow.models.connections.PhysicalConnection">PhysicalConnection</a></code>, <code><a class="autorefs autorefs-internal" title="            VersionedConnection (ankaflow.models.connections.VersionedConnection)" href="#ankaflow.models.connections.VersionedConnection">VersionedConnection</a></code></p>


        











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.BigQueryConnection.data_mode" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">data_mode</span>


<a href="#ankaflow.models.BigQueryConnection.data_mode" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">data_mode</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Data mode for write operation. For Deltatable
valid options are:</p>
<ul>
<li><code>append</code> adds new data</li>
<li><code>overwrite</code> replaces all data</li>
<li><code>error</code> fails (table is read-only)</li>
</ul>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.BigQueryConnection.key" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">key</span>


<a href="#ankaflow.models.BigQueryConnection.key" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">key</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>List of versioned fields</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.BigQueryConnection.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.BigQueryConnection.kind" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;BigQuery&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.BigQueryConnection.partition" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">partition</span>


<a href="#ankaflow.models.BigQueryConnection.partition" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">partition</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If set then delta table is partitioned using
specified fields for faster reads</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.BigQueryConnection.schema_mode" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">schema_mode</span>


<a href="#ankaflow.models.BigQueryConnection.schema_mode" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">schema_mode</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Deltatable schema behaviour. If not set then write fails
with error in case the data schema does not match existing
table schema.</p>
<p>Schema evolution options:</p>
<ul>
<li><code>merge</code> adds new columns from data</li>
<li><code>overwrite</code> adds new columns, drops missing</li>
</ul>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.BigQueryConnection.version" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">version</span>


<a href="#ankaflow.models.BigQueryConnection.version" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">version</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Field for record version timestamp</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.BucketConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BucketConfig</span>


<a href="#ankaflow.models.BucketConfig" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>












  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.BucketConfig.bucket" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">bucket</span>


<a href="#ankaflow.models.BucketConfig.bucket" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">bucket</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Bucket name eg. <code>s3://my-bucket</code>
or local absolute path eg. <code>/data/path</code></p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.BucketConfig.data_prefix" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">data_prefix</span>


<a href="#ankaflow.models.BucketConfig.data_prefix" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">data_prefix</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Prefix for data files: <code>s3://my-bucket/&lt;prefix&gt;</code> or
<code>/data/path/&lt;prefix&gt;</code></p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.BucketConfig.locator_wildcard" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">locator_wildcard</span>


<a href="#ankaflow.models.BucketConfig.locator_wildcard" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">locator_wildcard</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.Tuple">Tuple</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Regular expression and wildcard to modify <code>locator</code>.
Useful in cases when you sink data to <code>data-YYYY.parquet</code>
but want to read <code>data-*.parquet</code>.
Provide tuple with patten as first element and replacement
as second one. Example:</p>
<pre><code>('-\d{4}-', '*')
</code></pre>
<p>This will create wildcard for <code>data-YYYY-base.parquet</code> as
<code>data*base.parquet</code>.</p>
<table>
<thead>
<tr>
<th>Wildcard</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>*</code></td>
<td>matches any number of any characters (including none)</td>
</tr>
<tr>
<td><code>**</code></td>
<td>matches any number of subdirectories (including none)</td>
</tr>
<tr>
<td><code>[abc]</code></td>
<td>matches one character given in the bracket</td>
</tr>
<tr>
<td><code>[a-z]</code></td>
<td>matches one character from the range given in the bracket</td>
</tr>
</tbody>
</table>
<p>Wildcard is automatically applied in tap and show_schema operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.BucketConfig.region" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">region</span>


<a href="#ankaflow.models.BucketConfig.region" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">region</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.CSVConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">CSVConnection</span>


<a href="#ankaflow.models.CSVConnection" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            PhysicalConnection (ankaflow.models.connections.PhysicalConnection)" href="#ankaflow.models.connections.PhysicalConnection">PhysicalConnection</a></code></p>


        











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.ClickhouseConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ClickhouseConfig</span>


<a href="#ankaflow.models.ClickhouseConfig" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            DatabaseConfig (ankaflow.models.configs.DatabaseConfig)" href="#ankaflow.models.configs.DatabaseConfig">DatabaseConfig</a></code></p>


        <p>Configuration for ClickHouse database, extending generic SQL config.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.ClickhouseConfig.blocksize" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">blocksize</span>


<a href="#ankaflow.models.ClickhouseConfig.blocksize" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">blocksize</span><span class="p">:</span> <span class="n"><span title="int">int</span></span> <span class="o">=</span> <span class="mi">50000</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Number of rows to process per block for batch operations.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.ClickhouseConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ClickhouseConnection</span>


<a href="#ankaflow.models.ClickhouseConnection" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            PhysicalConnection (ankaflow.models.connections.PhysicalConnection)" href="#ankaflow.models.connections.PhysicalConnection">PhysicalConnection</a></code>, <code><a class="autorefs autorefs-internal" title="            VersionedConnection (ankaflow.models.connections.VersionedConnection)" href="#ankaflow.models.connections.VersionedConnection">VersionedConnection</a></code></p>


        











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.ClickhouseConnection.key" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">key</span>


<a href="#ankaflow.models.ClickhouseConnection.key" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">key</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>List of versioned fields</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.ClickhouseConnection.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.ClickhouseConnection.kind" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;Clickhouse&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.ClickhouseConnection.version" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">version</span>


<a href="#ankaflow.models.ClickhouseConnection.version" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">version</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Field for record version timestamp</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.Column" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Column</span>


<a href="#ankaflow.models.Column" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Data column (equivalent to database column)</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Column.name" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">name</span>


<a href="#ankaflow.models.Column.name" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Column name must follow rules set to SQL engine column names</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Column.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


<a href="#ankaflow.models.Column.type" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Any data type support by SQL engine</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.Columns" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Columns</span>


<a href="#ankaflow.models.Columns" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.RootModel">RootModel</span>[<span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="            Column (ankaflow.models.components.Column)" href="#ankaflow.models.components.Column">Column</a>]]</code></p>


        <p>Iterable list-like collection of Fields.</p>











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.Connection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Connection</span>


<a href="#ankaflow.models.Connection" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>












  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Connection.config" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">config</span>


<a href="#ankaflow.models.Connection.config" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">config</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.configs.ConnectionConfiguration)" href="#ankaflow.models.configs.ConnectionConfiguration">ConnectionConfiguration</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Optional configuration for the current connection.
If not present then global configuration will be used.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Connection.create_statement" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">create_statement</span>


<a href="#ankaflow.models.Connection.create_statement" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">create_statement</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create statement for given table. Must be in requested dialect.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Connection.fields" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">fields</span>


<a href="#ankaflow.models.Connection.fields" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">fields</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Columns (ankaflow.models.components.Columns)" href="#ankaflow.models.components.Columns">Columns</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If set then schema is used to generate source structure
in case actual source does not provide data in which case
generation of ephemeral view fails.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Connection.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.Connection.kind" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Model type e.g. Deltatable, Bigquery, Clickhouse, Parquet, File
Custom connections can be loaded from module.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Connection.params" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">params</span>


<a href="#ankaflow.models.Connection.params" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">params</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="dict">dict</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><span title="dict">dict</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Any parameters that can be passed to connection.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Connection.show_schema" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">show_schema</span>


<a href="#ankaflow.models.Connection.show_schema" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">show_schema</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="bool">bool</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If true then schema is automatically detected from
the input data and logged
'</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.ConnectionConfiguration" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ConnectionConfiguration</span>


<a href="#ankaflow.models.ConnectionConfiguration" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Top-level container for all connection configurations in a pipeline.</p>
<p>Includes default configuration blocks for supported sources and sinks like:
- Local file systems
- S3 and GCS buckets
- BigQuery datasets
- ClickHouse databases</p>
<p>These can be customized per pipeline or extended with new sources.</p>


<details class="example" open>
  <summary>Example</summary>
  <p>To support MySQL, you can define a new model like this:</p>
<pre><code class="language-python">class MySQLConfig(DatabaseConfig):
    pass  # You can add MySQL-specific fields here if needed

class ExtendedConnectionConfiguration(ConnectionConfiguration):
    mysql: MySQLConfig = PydanticField(default_factory=MySQLConfig)
</code></pre>
<p>This will allow you to specify MySQL connection settings in your YAML:</p>
<pre><code class="language-yaml">connection:
  kind: MySQL
  config:
    host: localhost
    port: 3306
    database: sales
    username: admin
    password: secret
</code></pre>
</details>










  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.ConnectionConfiguration.bigquery" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">bigquery</span>


<a href="#ankaflow.models.ConnectionConfiguration.bigquery" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">bigquery</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            BigQueryConfig (ankaflow.models.configs.BigQueryConfig)" href="#ankaflow.models.configs.BigQueryConfig">BigQueryConfig</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span>
    <span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            BigQueryConfig (ankaflow.models.configs.BigQueryConfig)" href="#ankaflow.models.configs.BigQueryConfig">BigQueryConfig</a></span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>BigQuery connection configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.ConnectionConfiguration.clickhouse" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">clickhouse</span>


<a href="#ankaflow.models.ConnectionConfiguration.clickhouse" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">clickhouse</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            ClickhouseConfig (ankaflow.models.configs.ClickhouseConfig)" href="#ankaflow.models.configs.ClickhouseConfig">ClickhouseConfig</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span>
    <span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            ClickhouseConfig (ankaflow.models.configs.ClickhouseConfig)" href="#ankaflow.models.configs.ClickhouseConfig">ClickhouseConfig</a></span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Language model configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.ConnectionConfiguration.gs" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">gs</span>


<a href="#ankaflow.models.ConnectionConfiguration.gs" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">gs</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            GSConfig (ankaflow.models.configs.GSConfig)" href="#ankaflow.models.configs.GSConfig">GSConfig</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            GSConfig (ankaflow.models.configs.GSConfig)" href="#ankaflow.models.configs.GSConfig">GSConfig</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Google Cloud Storage configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.ConnectionConfiguration.llm" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">llm</span>


<a href="#ankaflow.models.ConnectionConfiguration.llm" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">llm</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            LLMConfig (ankaflow.models.llm.LLMConfig)" href="#ankaflow.models.llm.LLMConfig">LLMConfig</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            LLMConfig (ankaflow.models.llm.LLMConfig)" href="#ankaflow.models.llm.LLMConfig">LLMConfig</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Language model configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.ConnectionConfiguration.local" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">local</span>


<a href="#ankaflow.models.ConnectionConfiguration.local" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">local</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            BucketConfig (ankaflow.models.configs.BucketConfig)" href="#ankaflow.models.configs.BucketConfig">BucketConfig</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            BucketConfig (ankaflow.models.configs.BucketConfig)" href="#ankaflow.models.configs.BucketConfig">BucketConfig</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Local file system configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.ConnectionConfiguration.s3" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">s3</span>


<a href="#ankaflow.models.ConnectionConfiguration.s3" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">s3</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            S3Config (ankaflow.models.configs.S3Config)" href="#ankaflow.models.configs.S3Config">S3Config</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            S3Config (ankaflow.models.configs.S3Config)" href="#ankaflow.models.configs.S3Config">S3Config</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>S3 cloud storage configuration.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.CustomConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">CustomConnection</span>


<a href="#ankaflow.models.CustomConnection" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            PhysicalConnection (ankaflow.models.connections.PhysicalConnection)" href="#ankaflow.models.connections.PhysicalConnection">PhysicalConnection</a></code></p>


        <p>Custom connection provider. Custom connection may implement
its own logic but must derive from base Connection class, and expose
tap(), sink(), sql() and show_schema() even if they are no-op.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.CustomConnection.classname" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">classname</span>


<a href="#ankaflow.models.CustomConnection.classname" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">classname</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Name of the class to load from the module</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.CustomConnection.module" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">module</span>


<a href="#ankaflow.models.CustomConnection.module" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">module</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Python module where the connection class is defined</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.CustomConnection.params" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">params</span>


<a href="#ankaflow.models.CustomConnection.params" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">params</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="dict">dict</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><span title="dict">dict</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Free-form configuration parameters passed to the loaded class</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h4 id="ankaflow.models.CustomConnection.load" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">load</span>


<a href="#ankaflow.models.CustomConnection.load" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Type">Type</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Connection (ankaflow.models.connections.Connection)" href="#ankaflow.models.connections.Connection">Connection</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Dynamically load the connection class from the given module and member.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="            Connection (ankaflow.models.connections.Connection)" href="#ankaflow.models.connections.Connection">Connection</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A subclass of Connection.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ImportError">ImportError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the module or member can't be imported.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/models/connections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">Connection</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dynamically load the connection class from the given module and member.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A subclass of Connection.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ImportError: If the module or member can&#39;t be imported.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mod</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">classname</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Could not load &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">classname</span><span class="si">}</span><span class="s2">&#39; from module &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
    <span class="c1"># TODO: Refactor imports to facilitate this check early</span>
    <span class="c1"># if not issubclass(cls, Connection):</span>
    <span class="c1">#     raise TypeError(</span>
    <span class="c1">#         f&quot;{cls.__name__} is not a subclass of Connection&quot;</span>
    <span class="c1">#     )</span>

    <span class="k">return</span> <span class="bp">cls</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.DeltatableConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">DeltatableConnection</span>


<a href="#ankaflow.models.DeltatableConnection" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            PhysicalConnection (ankaflow.models.connections.PhysicalConnection)" href="#ankaflow.models.connections.PhysicalConnection">PhysicalConnection</a></code>, <code><a class="autorefs autorefs-internal" title="            VersionedConnection (ankaflow.models.connections.VersionedConnection)" href="#ankaflow.models.connections.VersionedConnection">VersionedConnection</a></code></p>


        











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.DeltatableConnection.data_mode" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">data_mode</span>


<a href="#ankaflow.models.DeltatableConnection.data_mode" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">data_mode</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Data mode for write operation. For Deltatable
valid options are:</p>
<ul>
<li><code>append</code> adds new data</li>
<li><code>overwrite</code> replaces all data</li>
<li><code>error</code> fails (table is read-only)</li>
</ul>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.DeltatableConnection.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.DeltatableConnection.kind" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;Deltatable&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.DeltatableConnection.optimize" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">optimize</span>


<a href="#ankaflow.models.DeltatableConnection.optimize" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">optimize</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="int">int</span></span><span class="p">]]</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Use with Deltatable and other engines whether to optimize
after each sink operation. With larger tables this may be a
lengthy synchronous operation.</p>
<p>Default value is optimize and vacuum with 7 day retention.</p>
<h5 id="ankaflow.models.DeltatableConnection.optimize--deltatable">Deltatable<a class="headerlink" href="#ankaflow.models.DeltatableConnection.optimize--deltatable" title="Permanent link">&para;</a></h5>
<p>Values are <code>optimize,vacuum,all,Literal[int]</code>.
  If value is literal int is provided then parts older than
  number of days will be removed. Note that this will override
  default retention days.</p>
<p>String options <code>vacuum,all</code> are equivalent to 0.</p>
<p>Delta connection also supports raw SQL optimization.
Pass statement as sql command:</p>
<p><code>OPTIMIZE Deltatable [COMPACT] [VACUUM] [AGE=&lt;int&gt;[d|h]] [DRY_RUN] [CLEANUP]</code></p>
<p><code>optimize deltatable</code>
→ compact + vacuum with default 7 days</p>
<p><code>optimize deltatable compact</code>
→ compact only</p>
<p><code>optimize deltatable vacuum age=36h dry_run</code>
→ list files older than 36 hours, don't delete</p>
<p><code>optimize deltatable compact vacuum age=1 cleanup</code>
→ compact, vacuum 1 day, then cleanup metadata</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.DeltatableConnection.partition" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">partition</span>


<a href="#ankaflow.models.DeltatableConnection.partition" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">partition</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If set then delta table is partitioned using
specified fields for faster reads</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.DeltatableConnection.schema_mode" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">schema_mode</span>


<a href="#ankaflow.models.DeltatableConnection.schema_mode" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">schema_mode</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Deltatable schema behaviour. If not set then write fails
with error in case the data schema does not match existing
table schema.</p>
<p>Schema evolution options:</p>
<ul>
<li><code>merge</code> adds new columns from data</li>
<li><code>overwrite</code> adds new columns, drops missing</li>
</ul>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.DeltatableConnection.writer_features" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">writer_features</span>


<a href="#ankaflow.models.DeltatableConnection.writer_features" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">writer_features</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.List">List</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Any supported Delta-rs parameters can be passed to the writer.
Example:</p>
<pre><code>writer_features: [TimestampWithoutTimezone]
</code></pre>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.Dimension" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Dimension</span>


<a href="#ankaflow.models.Dimension" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            EphemeralConnection (ankaflow.models.connections.EphemeralConnection)" href="../ankaflow.models/#ankaflow.models.EphemeralConnection">EphemeralConnection</a></code></p>












  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="ankaflow.models.Dimension.load" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">load</span>


<a href="#ankaflow.models.Dimension.load" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Type">Type</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Connection (ankaflow.models.connections.Connection)" href="#ankaflow.models.connections.Connection">Connection</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Dynamically load the connection class from the given module and member.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="            Connection (ankaflow.models.connections.Connection)" href="#ankaflow.models.connections.Connection">Connection</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A subclass of Connection.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ImportError">ImportError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the module or member can't be imported.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/models/connections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">Connection</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dynamically load the connection class from the given module and member.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A subclass of Connection.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ImportError: If the module or member can&#39;t be imported.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mod</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kind</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Could not load &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">kind</span><span class="si">}</span><span class="s2">&#39; from module &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">return</span> <span class="bp">cls</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.FileConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">FileConnection</span>


<a href="#ankaflow.models.FileConnection" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            PhysicalConnection (ankaflow.models.connections.PhysicalConnection)" href="#ankaflow.models.connections.PhysicalConnection">PhysicalConnection</a></code></p>


        











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.FlowContext" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">FlowContext</span>


<a href="#ankaflow.models.FlowContext" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="ankaflow.common.types.ImmutableMap">ImmutableMap</span></code></p>


        <p>Context dictionary can be used to supply arbitrary data
to pipeline that can be referenced in templates much
much like variables with the difference that they cannot
be modified at runtime.</p>
<p>Context can be initiated via dictionary:</p>
<p><code>context = FlowContext(**{'foo':'Bar'}])</code></p>
<p>Items can be reference using both bracket and dot notation:</p>
<p><code>context.foo == context['foo'] == 'Bar'</code></p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.GSConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">GSConfig</span>


<a href="#ankaflow.models.GSConfig" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            BucketConfig (ankaflow.models.configs.BucketConfig)" href="#ankaflow.models.configs.BucketConfig">BucketConfig</a></code></p>


        <p>Google Cloud Storage (GCS) configuration.</p>
<ul>
<li>HMAC credentials allow reading/writing Parquet, JSON, and CSV.</li>
<li>Delta table writes require a full service account credential file.</li>
</ul>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.GSConfig.credential_file" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">credential_file</span>


<a href="#ankaflow.models.GSConfig.credential_file" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">credential_file</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Path to GCP service account credential file (JSON).
Required for certain write operations (e.g., Delta tables).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.GSConfig.hmac_key" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">hmac_key</span>


<a href="#ankaflow.models.GSConfig.hmac_key" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">hmac_key</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>GCS HMAC key ID for authenticated access.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.GSConfig.hmac_secret" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">hmac_secret</span>


<a href="#ankaflow.models.GSConfig.hmac_secret" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">hmac_secret</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>GCS HMAC secret for authenticated access.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.JSONConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">JSONConnection</span>


<a href="#ankaflow.models.JSONConnection" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            PhysicalConnection (ankaflow.models.connections.PhysicalConnection)" href="#ankaflow.models.connections.PhysicalConnection">PhysicalConnection</a></code></p>


        











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.ParquetConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ParquetConnection</span>


<a href="#ankaflow.models.ParquetConnection" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            PhysicalConnection (ankaflow.models.connections.PhysicalConnection)" href="#ankaflow.models.connections.PhysicalConnection">PhysicalConnection</a></code></p>


        











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.PhysicalConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">PhysicalConnection</span>


<a href="#ankaflow.models.PhysicalConnection" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            Connection (ankaflow.models.connections.Connection)" href="#ankaflow.models.connections.Connection">Connection</a></code></p>












  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.PhysicalConnection.locator" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">locator</span>


<a href="#ankaflow.models.PhysicalConnection.locator" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">locator</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Table name or file name or URI, or other identifier
required by the connection.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.PhysicalConnection.raw_dispatch" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">raw_dispatch</span>


<a href="#ankaflow.models.PhysicalConnection.raw_dispatch" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">raw_dispatch</span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If True, sends the provided SQL query directly without altering
locators if fully qualified, or adding FROM clauses.
The query must be a valid SELECT statement.
Useful for full control over complex queries.</p>
<p>In Deltatable and Parquet connections supports rewriting
short locators as convenience.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.RestConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">RestConnection</span>


<a href="#ankaflow.models.RestConnection" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            EphemeralConnection (ankaflow.models.connections.EphemeralConnection)" href="../ankaflow.models/#ankaflow.models.EphemeralConnection">EphemeralConnection</a></code></p>


        <p>Configuration for a REST-based data connection.</p>
<p>This model defines how to configure and execute REST API requests
as part of a pipeline step. It includes the request definition,
client behavior (e.g., retries, headers), and optional schema discovery.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.RestConnection.client" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">client</span>


<a href="#ankaflow.models.RestConnection.client" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">client</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            RestClientConfig (ankaflow.models.rest.RestClientConfig)" href="#ankaflow.models.rest.RestClientConfig">RestClientConfig</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Configuration for the REST client (e.g., base URL, headers, auth).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.RestConnection.fields" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">fields</span>


<a href="#ankaflow.models.RestConnection.fields" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">fields</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Columns (ankaflow.models.components.Columns)" href="#ankaflow.models.components.Columns">Columns</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Optional schema definition used to validate or transform
response data.</p>
<p>It is recommended to manually specify the schema after initial
discovery. This ensures downstream pipeline stages remain stable,
even when the remote API returns no results (e.g., due to no updates
in an incremental fetch). Explicit schema prevents silent failures
or schema drift in such cases.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.RestConnection.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.RestConnection.kind" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;Rest&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Specifies the connection type as "Rest".</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.RestConnection.request" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">request</span>


<a href="#ankaflow.models.RestConnection.request" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">request</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Request (ankaflow.models.rest.Request)" href="#ankaflow.models.rest.Request">Request</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Request template specifying method, path, body, etc.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.RestConnection.show_schema" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">show_schema</span>


<a href="#ankaflow.models.RestConnection.show_schema" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">show_schema</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="bool">bool</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If True, the connector will attempt to infer
or display the response schema automatically.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.S3Config" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">S3Config</span>


<a href="#ankaflow.models.S3Config" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            BucketConfig (ankaflow.models.configs.BucketConfig)" href="#ankaflow.models.configs.BucketConfig">BucketConfig</a></code></p>


        <p>S3-specific bucket configuration including optional authentication.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.S3Config.access_key_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">access_key_id</span>


<a href="#ankaflow.models.S3Config.access_key_id" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">access_key_id</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>AWS access key ID for private S3 access.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.S3Config.secret_access_key" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">secret_access_key</span>


<a href="#ankaflow.models.S3Config.secret_access_key" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">secret_access_key</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>AWS secret access key for private S3 access.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.SQLGenConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">SQLGenConnection</span>


<a href="#ankaflow.models.SQLGenConnection" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            EphemeralConnection (ankaflow.models.connections.EphemeralConnection)" href="../ankaflow.models/#ankaflow.models.EphemeralConnection">EphemeralConnection</a></code></p>


        <p>SQLGen connection is intended for SQL code generation:</p>
<p>Prompt should instruct the model to generate SQL query and
and executes resutling a VIEW in the internal database.</p>
<p>Example:</p>
<pre><code>Stage 1: Name: ReadSomeParquetData

Stage 2: Name: CodeGen, query: Given SQL table `ReadSomeParquetData` generate SQL query to
    count number of rows in the table.

Inside stage 2 the following happens:

1. Prompt is sent to inferecne endpoint

2. Endpoint is expected to respond with valid SQL

3. Connection will execute a statement `CREATE OR REPLACE VIEW StageName AS &lt;received_select_statement&gt;`
    where statement in the exmaple is likely `SELECT COUNT() FROM ReadSomeParquetData`
</code></pre>
<p>.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.SQLGenConnection.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.SQLGenConnection.kind" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;SQLGen&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Specifies the <code>kind==SQLGen</code></p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.SQLGenConnection.variables" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">variables</span>


<a href="#ankaflow.models.SQLGenConnection.variables" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">variables</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Variables passed to Prompt. Prompt must be supplied in the
<code>query</code> field of the <code>Stage</code>.</p>
<p>Prompt may contain Jinja2-style placeholders:</p>


<details class="example" open>
  <summary>Example</summary>
  <p><code>Here's my name: {{name}}.</code></p>
<p>The connection will render the prompt template using <code>variables</code></p>
</details>
    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.Stage" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Stage</span>


<a href="#ankaflow.models.Stage" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>












  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Stage.connection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">connection</span>


<a href="#ankaflow.models.Stage.connection" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">connection</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span>
    <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            RestConnection (ankaflow.models.connections.RestConnection)" href="#ankaflow.models.connections.RestConnection">RestConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            VariableConnection (ankaflow.models.connections.VariableConnection)" href="#ankaflow.models.connections.VariableConnection">VariableConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            BigQueryConnection (ankaflow.models.connections.BigQueryConnection)" href="#ankaflow.models.connections.BigQueryConnection">BigQueryConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            DeltatableConnection (ankaflow.models.connections.DeltatableConnection)" href="#ankaflow.models.connections.DeltatableConnection">DeltatableConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            ParquetConnection (ankaflow.models.connections.ParquetConnection)" href="#ankaflow.models.connections.ParquetConnection">ParquetConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            ClickhouseConnection (ankaflow.models.connections.ClickhouseConnection)" href="#ankaflow.models.connections.ClickhouseConnection">ClickhouseConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            CustomConnection (ankaflow.models.connections.CustomConnection)" href="#ankaflow.models.connections.CustomConnection">CustomConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            JSONConnection (ankaflow.models.connections.JSONConnection)" href="#ankaflow.models.connections.JSONConnection">JSONConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            CSVConnection (ankaflow.models.connections.CSVConnection)" href="#ankaflow.models.connections.CSVConnection">CSVConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            FileConnection (ankaflow.models.connections.FileConnection)" href="#ankaflow.models.connections.FileConnection">FileConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            SQLGenConnection (ankaflow.models.connections.SQLGenConnection)" href="#ankaflow.models.connections.SQLGenConnection">SQLGenConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            Dimension (ankaflow.models.connections.Dimension)" href="#ankaflow.models.connections.Dimension">Dimension</a></span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">]</span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n"><span title="pydantic.Field(discriminator)">discriminator</span></span><span class="o">=</span><span class="s2">&quot;kind&quot;</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Defines how the data is read from / written to the target.</p>
<p>Connection fields may contain templates and they will be
recursively.</p>
<p>Special construct is JSON&gt; which allows dynamically generating
parameters as runtime:</p>
<pre><code>- kind: source
  name: source_name
  connection:
    kind: File
    params: &gt;
      JSON&gt;{
        &quot;key&quot;: &quot;value&quot;,
        &quot;dynkey&quot;: &lt;&lt;API.property&gt;&gt;,
      }
</code></pre>
<p>In the above app <code>params</code> are constructed as JSON string.
It is possible to even construct parameter keys dynamically:</p>
<pre><code>params: &gt;
  JSON&gt;
  {
    &lt;% for number in [1,2,3] %&gt;
    &quot;key_&lt;&lt; number &gt;&gt;&quot;:&lt;&lt; number &gt;&gt;&lt;% if not loop.last %&gt;,&lt;% endif %&gt;
    &lt;% endfor %&gt;
  }
</code></pre>
<p>Above example results the following:</p>
<pre><code>params: &gt;
  {
    &quot;key_1&quot;: 1,
    &quot;key_2&quot;: 2,
    &quot;key_3&quot;: 3
  }
</code></pre>
<p>JSON&gt; structure cannot contain nested JSON&gt; structures, the entire
string following the JSON&gt; header must result a valid JSON.</p>
<p>Inbuilt connections include:</p>
<ul>
<li>Deltatable (read)</li>
</ul>
<p><strong>If connection is <code>Deltatable</code> then query is required to narrow
  down data stored in the delta table. <code>FROM</code> clause must be <code>Deltatable</code>:</strong>
  <code>- kind: source
    name: delta_tap
    connection:
      kind: Deltatable
      locator: delta_table
    query: &gt;
      select * from Deltatable</code></p>
<ul>
<li>Deltatable (write)</li>
</ul>
<p><em>See also StorageOptions</em></p>
<p>The following example writes data from preceding stage
  to delta table, appending the data, partitions using
  <code>part</code> column, and optimizes and vacuums immediately without
  retention after write.
  <code>- kind: sink
    name: delta_sink
    connection:
      kind: Deltatable
      locator: delta_table
      optimize: 0
      data_mode: append
      partition:
      - part_field</code></p>
<ul>
<li>Parquet (read/write)</li>
<li>JSON (read/write; NOTE: write operation generates newline-delimited JSON)</li>
<li>CSV (read/write)</li>
<li>
<p>Variable (read/write)</p>
</li>
<li>
<p>File (read)</p>
</li>
</ul>
<p>File can be read from a connected filesystem (including s3). File name
  and file type must be specified in the pipeline context:</p>
<pre><code>- `context.FileName`: file name relative to `file_prefix`
- `context.FileType`: file type, one of CSV, XLSX, JSON, HTML
</code></pre>
<p>Any file reader configuration must be passed in <code>params</code>.</p>
<ul>
<li>Rest (bidirectional)</li>
</ul>
<p>Rest connections consist of two parts: Client and Request. Client contains
  base URL and authentication (basic, digest, header and oauth2 are supported).</p>
<p><code>- name: TheRest
    kind: source
    connection:
      kind: Rest
      client:
        base_url: https://api.example.com
        auth:  # Every request to given endpoint share the same authentication
          method: basic
          values:
            username: TheName
            password: ThePassword
      request:
        endpoint: /v1/some-path
        content_type: application/json
        method: post
        query:  # Query parameters
          date: &lt;&lt;API.dt(None).isoformat()&gt;&gt;
        body:  # JSON payload
          param: 1
        response:
          content_type: application/json
          locator: "JMESPath.to.data"</code></p>
<p>Any custom source (API) can be used as long as available via module.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Stage.context" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">context</span>


<a href="#ankaflow.models.Stage.context" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">context</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.core.FlowContext)" href="#ankaflow.models.core.FlowContext">FlowContext</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>@private
Global context passed to given stage</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Stage.explain" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">explain</span>


<a href="#ankaflow.models.Stage.explain" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">explain</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="bool">bool</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If set to true then SQL query explanation will be logged.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Stage.fields" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">fields</span>


<a href="#ankaflow.models.Stage.fields" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">fields</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Column (ankaflow.models.components.Column)" href="#ankaflow.models.components.Column">Column</a></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Explicitly defined output fields.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Stage.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.Stage.kind" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Defines which action will be performed:</p>
<ul>
<li>source</li>
<li>transform</li>
<li>sink</li>
<li>pipeline</li>
<li>sql</li>
</ul>
<h6 id="ankaflow.models.Stage.kind--sink">Sink<a class="headerlink" href="#ankaflow.models.Stage.kind--sink" title="Permanent link">&para;</a></h6>
<p>Sink reads output from previous stage and stores in specified
location.</p>
<p>NOTE: If query is supplied with the stage then sink uses output
of the query rather than preceding stage directly.
Subsequent sink will use preceding stage. If supplied query must
create either view or table with same name as current stage.</p>
<pre><code>- name: my_sink
kind: sink
connection:
    kind: Variable
query: &gt;
    CREATE VIEW my_sink AS
    SELECT
    1 as foo
</code></pre>
<h6 id="ankaflow.models.Stage.kind--pipeline">Pipeline<a class="headerlink" href="#ankaflow.models.Stage.kind--pipeline" title="Permanent link">&para;</a></h6>
<p>If pipeline is preceded by any stage then the subpipeline will be executed
as many times as there are rows in the previous stage output.
This is useful if you want to run same pipeline with different parameters.
Make sure the pipeline is preceded by source or transform producing
required number of rows. If you need to run subpipeline only once there
are two options:</p>
<ol>
<li>Place it to the top</li>
<li>Preced with tranform producing single row only</li>
</ol>
<p>Each row is then passed to subpipeline in a special variable.</p>
<p>Example pipeline iterating subpipeline 5 times:</p>
<ul>
<li>kind: transform
      name: generate_5
      # Generate 5 rows
      query: &gt;
          select unnest as current_variable from unnest(generate_series(1,5))
      show: 5</li>
<li>kind: pipeline
    name: looped_5x
    stages:
        - kind: transform
          name: inside_loop
          # In query we can reference the value passed from parent pipeline
          query: &gt;
              select 'Currently running iteration: {API.look('loop_control.current_variable', variables)}' as value
          show: 5</li>
</ul>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Stage.locator" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">locator</span>


<a href="#ankaflow.models.Stage.locator" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">locator</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Currently unused: Name for the connection configuration: name, or URI.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Stage.log_level" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">log_level</span>


<a href="#ankaflow.models.Stage.log_level" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">log_level</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            LogLevel (ankaflow.models.enums.LogLevel)" href="#ankaflow.models.enums.LogLevel">LogLevel</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set logging level. All stages after (including current) will log
with specified level. Possible values: INFO (default), DEBUG, WARNING.
Log level will be reset to INFO after each pipeline
(including nested pipelines).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Stage.name" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">name</span>


<a href="#ankaflow.models.Stage.name" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Name of the stage, must be unique across all stages in the pipeline
and conform to the rules: Must start with letter, may contain lowercase
letters, number and underscores.
Name is used to reference this stage by other subsequent stages.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Stage.on_error" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">on_error</span>


<a href="#ankaflow.models.Stage.on_error" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">on_error</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;fail&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If set to 'continue' then pipeline will not fail.
Subsequent stages referring to failed one must handle
missing data.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Stage.query" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">query</span>


<a href="#ankaflow.models.Stage.query" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">query</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>SQL Query or dictionary with custom source parameters.
May contain {dynamic variables}.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Stage.show" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">show</span>


<a href="#ankaflow.models.Stage.show" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">show</span><span class="p">:</span> <span class="n"><span title="int">int</span></span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If set to positive integer then given number of rows from
this stage will get logged. If set to -1 then all rows
will be loggged. Set to 0 to disable logging.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Stage.show_schema" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">show_schema</span>


<a href="#ankaflow.models.Stage.show_schema" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">show_schema</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="bool">bool</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If True then schema is logged</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Stage.skip_if" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">skip_if</span>


<a href="#ankaflow.models.Stage.skip_if" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">skip_if</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.Any">Any</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Any value that can evaluated using bool().
or template string e.g. <code>&lt;&lt; True &gt;&gt;</code>.
When the expression evaluates to True then the stage is skipped.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Stage.stages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">stages</span>


<a href="#ankaflow.models.Stage.stages" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">stages</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.core.Stages)" href="#ankaflow.models.core.Stages">Stages</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Used when kind is <code>Flow</code></p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="ankaflow.models.Stage.throttle" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">throttle</span>


<a href="#ankaflow.models.Stage.throttle" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">throttle</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="int">int</span></span><span class="p">,</span> <span class="n"><span title="float">float</span></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If set to positive value then flow execution will be paused
after the stage for given number of seconds.</p>
<p>Useful when dealing with rate limits or otherwise spreading the load
over time.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.Stages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Stages</span>


<a href="#ankaflow.models.Stages" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.RootModel">RootModel</span>[<span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a>]]</code></p>


        <p>A sequence of processing stages in a data pipeline.</p>
<p>Each <code>Datablock</code> in <code>root</code> represents one discrete step or transformation
in an end-to-end business workflow (e.g., tap, transform, sink, validate).</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="ankaflow.models.Stages.root">root</span></code></td>
            <td>
                  <code><span title="List">List</span>[<span title="Datablock">Datablock</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Ordered list of pipeline stages to execute.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="ankaflow.models.Stages.enumerate_steps" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">enumerate_steps</span>


<a href="#ankaflow.models.Stages.enumerate_steps" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">enumerate_steps</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Iterator">Iterator</span></span><span class="p">[</span><span class="n"><span title="tuple">tuple</span></span><span class="p">[</span><span class="n"><span title="int">int</span></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a></span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Yield each stage along with its 0-based position.</p>
<p>Use this when you need both the stage and its index for logging,
metrics, or conditional branching.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Iterator">Iterator</span>[<span title="tuple">tuple</span>[<span title="int">int</span>, <a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Iterator[Tuple[int, Datablock]]: Pairs of (index, stage).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/models/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">enumerate_steps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Stage</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Yield each stage along with its 0-based position.</span>

<span class="sd">    Use this when you need both the stage and its index for logging,</span>
<span class="sd">    metrics, or conditional branching.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Iterator[Tuple[int, Datablock]]: Pairs of (index, stage).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="ankaflow.models.Stages.load" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">load</span>


<a href="#ankaflow.models.Stages.load" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load</span><span class="p">(</span><span class="n">source</span><span class="p">:</span> <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="pathlib.Path">Path</span></span><span class="p">,</span> <span class="n"><span title="typing.IO">IO</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">],</span> <span class="n"><span title="ankaflow.models.core.Loadable">Loadable</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.core.Stages)" href="#ankaflow.models.core.Stages">Stages</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Load a pipeline from YAML (path, YAML-string, file-like or Loadable).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>source</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="pathlib.Path">Path</span> | <span title="IO">IO</span>[<span title="str">str</span>] | <span title="ankaflow.models.core.Loadable">Loadable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>Path to a .yaml file</li>
<li>Raw YAML content</li>
<li>File-like object returning YAML</li>
<li>Any object with a <code>.load()</code> method returning Python data</li>
</ul>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Stages</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.core.Stages)" href="#ankaflow.models.core.Stages">Stages</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a validated <code>Stages</code> instance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/models/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">source</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">IO</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Loadable</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Stages&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a pipeline from YAML (path, YAML-string, file-like or Loadable).</span>

<span class="sd">    Args:</span>
<span class="sd">        source (str | Path | IO[str] | Loadable):</span>
<span class="sd">            - Path to a .yaml file</span>
<span class="sd">            - Raw YAML content</span>
<span class="sd">            - File-like object returning YAML</span>
<span class="sd">            - Any object with a `.load()` method returning Python data</span>

<span class="sd">    Returns:</span>
<span class="sd">        Stages: a validated `Stages` instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># 1) If it’s a loader-object, pull Python data directly</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">Loadable</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># 2) Read text for YAML parsing:</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">):</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">IO</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">source</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

        <span class="c1"># 3) First, try parsing as raw YAML</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">yaml</span><span class="o">.</span><span class="n">YAMLError</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># 4) Only if that parse returned a `str` we treat it as a filename</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">OSError</span><span class="p">,</span> <span class="n">yaml</span><span class="o">.</span><span class="n">YAMLError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Could not interpret </span><span class="si">{</span><span class="n">data</span><span class="si">!r}</span><span class="s2"> as YAML or file path&quot;</span>
                <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="c1"># 5) Validate final shape</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Expected a list of pipeline stages, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="c1"># 5) Finally, validate into our model</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="ankaflow.models.Stages.steps" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">steps</span>


<a href="#ankaflow.models.Stages.steps" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">steps</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Iterator">Iterator</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Yield each stage in execution order.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Iterator">Iterator</span>[<a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Iterator[Datablock]: An iterator over the stages,</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Iterator">Iterator</span>[<a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>from first to last.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/models/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">steps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="n">Stage</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Yield each stage in execution order.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Iterator[Datablock]: An iterator over the stages,</span>
<span class="sd">        from first to last.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="ankaflow.models.Variables" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Variables</span>


<a href="#ankaflow.models.Variables" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="dict">dict</span></code></p>


        <p>Variables is a <code>dict</code>-based collection
storing arbitrary data under keys. Variable can be populated via:</p>
<ul>
<li>Dictionary passed to pipeline:
  <code>Flow(defs, context, variables={'foo': 'bar'})</code></li>
<li>Sink operation:<pre><code>- kind: sink

    name: my_sink

    connection:

        kind: Variable

        locator: variable_name
</code></pre>
</li>
</ul>
<p>This step will place a list of records from preceding step in
  variables as <code>{'variable_name': t.List[dict]}</code></p>
<p>In most cases sainking to variable is not needed as all preceding stages
in a pipeline can be referenced via <code>name</code>. Sinking to variable is
useful when you need to share data with subpipeline.</p>
<p>Special variable is <code>loop_control</code> which is populated
dynamically from previous step and current stage type is pipeline.
In case previous step generates multiple records then the new pipeline
is called for each record, and control variable holds a <code>dict</code>
representing the current record.</p>









    </div>

</div>



<div class="doc doc-object doc-module">



<h3 id="ankaflow.models.components" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">components</span>


<a href="#ankaflow.models.components" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.components.Column" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Column</span>


<a href="#ankaflow.models.components.Column" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Data column (equivalent to database column)</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.components.Column.name" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">name</span>


<a href="#ankaflow.models.components.Column.name" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Column name must follow rules set to SQL engine column names</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.components.Column.type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">type</span>


<a href="#ankaflow.models.components.Column.type" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nb">type</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Any data type support by SQL engine</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.components.Columns" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Columns</span>


<a href="#ankaflow.models.components.Columns" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.RootModel">RootModel</span>[<span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="            Column (ankaflow.models.components.Column)" href="#ankaflow.models.components.Column">Column</a>]]</code></p>


        <p>Iterable list-like collection of Fields.</p>











  <div class="doc doc-children">












  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="ankaflow.models.configs" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">configs</span>


<a href="#ankaflow.models.configs" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.configs.BigQueryConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BigQueryConfig</span>


<a href="#ankaflow.models.configs.BigQueryConfig" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Configuration for accessing BigQuery datasets.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.BigQueryConfig.credential_file" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">credential_file</span>


<a href="#ankaflow.models.configs.BigQueryConfig.credential_file" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">credential_file</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Path to service account JSON credentials for BigQuery access.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.BigQueryConfig.dataset" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">dataset</span>


<a href="#ankaflow.models.configs.BigQueryConfig.dataset" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">dataset</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>BigQuery dataset name.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.BigQueryConfig.project" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">project</span>


<a href="#ankaflow.models.configs.BigQueryConfig.project" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">project</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>GCP project ID containing the BigQuery dataset.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.BigQueryConfig.region" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">region</span>


<a href="#ankaflow.models.configs.BigQueryConfig.region" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">region</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>BigQuery region (e.g., "us-central1").</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.configs.BucketConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BucketConfig</span>


<a href="#ankaflow.models.configs.BucketConfig" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>












  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.BucketConfig.bucket" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">bucket</span>


<a href="#ankaflow.models.configs.BucketConfig.bucket" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">bucket</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Bucket name eg. <code>s3://my-bucket</code>
or local absolute path eg. <code>/data/path</code></p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.BucketConfig.data_prefix" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">data_prefix</span>


<a href="#ankaflow.models.configs.BucketConfig.data_prefix" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">data_prefix</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Prefix for data files: <code>s3://my-bucket/&lt;prefix&gt;</code> or
<code>/data/path/&lt;prefix&gt;</code></p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.BucketConfig.locator_wildcard" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">locator_wildcard</span>


<a href="#ankaflow.models.configs.BucketConfig.locator_wildcard" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">locator_wildcard</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.Tuple">Tuple</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Regular expression and wildcard to modify <code>locator</code>.
Useful in cases when you sink data to <code>data-YYYY.parquet</code>
but want to read <code>data-*.parquet</code>.
Provide tuple with patten as first element and replacement
as second one. Example:</p>
<pre><code>('-\d{4}-', '*')
</code></pre>
<p>This will create wildcard for <code>data-YYYY-base.parquet</code> as
<code>data*base.parquet</code>.</p>
<table>
<thead>
<tr>
<th>Wildcard</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>*</code></td>
<td>matches any number of any characters (including none)</td>
</tr>
<tr>
<td><code>**</code></td>
<td>matches any number of subdirectories (including none)</td>
</tr>
<tr>
<td><code>[abc]</code></td>
<td>matches one character given in the bracket</td>
</tr>
<tr>
<td><code>[a-z]</code></td>
<td>matches one character from the range given in the bracket</td>
</tr>
</tbody>
</table>
<p>Wildcard is automatically applied in tap and show_schema operations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.BucketConfig.region" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">region</span>


<a href="#ankaflow.models.configs.BucketConfig.region" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">region</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.configs.ClickhouseConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ClickhouseConfig</span>


<a href="#ankaflow.models.configs.ClickhouseConfig" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            DatabaseConfig (ankaflow.models.configs.DatabaseConfig)" href="#ankaflow.models.configs.DatabaseConfig">DatabaseConfig</a></code></p>


        <p>Configuration for ClickHouse database, extending generic SQL config.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.ClickhouseConfig.blocksize" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">blocksize</span>


<a href="#ankaflow.models.configs.ClickhouseConfig.blocksize" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">blocksize</span><span class="p">:</span> <span class="n"><span title="int">int</span></span> <span class="o">=</span> <span class="mi">50000</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Number of rows to process per block for batch operations.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.configs.ConnectionConfiguration" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ConnectionConfiguration</span>


<a href="#ankaflow.models.configs.ConnectionConfiguration" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Top-level container for all connection configurations in a pipeline.</p>
<p>Includes default configuration blocks for supported sources and sinks like:
- Local file systems
- S3 and GCS buckets
- BigQuery datasets
- ClickHouse databases</p>
<p>These can be customized per pipeline or extended with new sources.</p>


<details class="example" open>
  <summary>Example</summary>
  <p>To support MySQL, you can define a new model like this:</p>
<pre><code class="language-python">class MySQLConfig(DatabaseConfig):
    pass  # You can add MySQL-specific fields here if needed

class ExtendedConnectionConfiguration(ConnectionConfiguration):
    mysql: MySQLConfig = PydanticField(default_factory=MySQLConfig)
</code></pre>
<p>This will allow you to specify MySQL connection settings in your YAML:</p>
<pre><code class="language-yaml">connection:
  kind: MySQL
  config:
    host: localhost
    port: 3306
    database: sales
    username: admin
    password: secret
</code></pre>
</details>










  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.ConnectionConfiguration.bigquery" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">bigquery</span>


<a href="#ankaflow.models.configs.ConnectionConfiguration.bigquery" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">bigquery</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            BigQueryConfig (ankaflow.models.configs.BigQueryConfig)" href="#ankaflow.models.configs.BigQueryConfig">BigQueryConfig</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span>
    <span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            BigQueryConfig (ankaflow.models.configs.BigQueryConfig)" href="#ankaflow.models.configs.BigQueryConfig">BigQueryConfig</a></span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>BigQuery connection configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.ConnectionConfiguration.clickhouse" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">clickhouse</span>


<a href="#ankaflow.models.configs.ConnectionConfiguration.clickhouse" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">clickhouse</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            ClickhouseConfig (ankaflow.models.configs.ClickhouseConfig)" href="#ankaflow.models.configs.ClickhouseConfig">ClickhouseConfig</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span>
    <span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            ClickhouseConfig (ankaflow.models.configs.ClickhouseConfig)" href="#ankaflow.models.configs.ClickhouseConfig">ClickhouseConfig</a></span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Language model configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.ConnectionConfiguration.gs" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">gs</span>


<a href="#ankaflow.models.configs.ConnectionConfiguration.gs" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">gs</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            GSConfig (ankaflow.models.configs.GSConfig)" href="#ankaflow.models.configs.GSConfig">GSConfig</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            GSConfig (ankaflow.models.configs.GSConfig)" href="#ankaflow.models.configs.GSConfig">GSConfig</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Google Cloud Storage configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.ConnectionConfiguration.llm" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">llm</span>


<a href="#ankaflow.models.configs.ConnectionConfiguration.llm" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">llm</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            LLMConfig (ankaflow.models.llm.LLMConfig)" href="#ankaflow.models.llm.LLMConfig">LLMConfig</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            LLMConfig (ankaflow.models.llm.LLMConfig)" href="#ankaflow.models.llm.LLMConfig">LLMConfig</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Language model configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.ConnectionConfiguration.local" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">local</span>


<a href="#ankaflow.models.configs.ConnectionConfiguration.local" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">local</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            BucketConfig (ankaflow.models.configs.BucketConfig)" href="#ankaflow.models.configs.BucketConfig">BucketConfig</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            BucketConfig (ankaflow.models.configs.BucketConfig)" href="#ankaflow.models.configs.BucketConfig">BucketConfig</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Local file system configuration.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.ConnectionConfiguration.s3" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">s3</span>


<a href="#ankaflow.models.configs.ConnectionConfiguration.s3" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">s3</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            S3Config (ankaflow.models.configs.S3Config)" href="#ankaflow.models.configs.S3Config">S3Config</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            S3Config (ankaflow.models.configs.S3Config)" href="#ankaflow.models.configs.S3Config">S3Config</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>S3 cloud storage configuration.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.configs.DatabaseConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">DatabaseConfig</span>


<a href="#ankaflow.models.configs.DatabaseConfig" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Base class for SQL database connection configurations.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.DatabaseConfig.cluster" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">cluster</span>


<a href="#ankaflow.models.configs.DatabaseConfig.cluster" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">cluster</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Optional cluster name or identifier
(used in ClickHouse and other distributed systems).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.DatabaseConfig.database" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">database</span>


<a href="#ankaflow.models.configs.DatabaseConfig.database" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">database</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Database name.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.DatabaseConfig.host" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">host</span>


<a href="#ankaflow.models.configs.DatabaseConfig.host" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">host</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Hostname or IP address of the database server.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.DatabaseConfig.password" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">password</span>


<a href="#ankaflow.models.configs.DatabaseConfig.password" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">password</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Password for authentication.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.DatabaseConfig.port" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">port</span>


<a href="#ankaflow.models.configs.DatabaseConfig.port" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">port</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="int">int</span></span> <span class="o">|</span> <span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Database port.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.DatabaseConfig.username" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">username</span>


<a href="#ankaflow.models.configs.DatabaseConfig.username" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">username</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Username for authentication.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.configs.GSConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">GSConfig</span>


<a href="#ankaflow.models.configs.GSConfig" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            BucketConfig (ankaflow.models.configs.BucketConfig)" href="#ankaflow.models.configs.BucketConfig">BucketConfig</a></code></p>


        <p>Google Cloud Storage (GCS) configuration.</p>
<ul>
<li>HMAC credentials allow reading/writing Parquet, JSON, and CSV.</li>
<li>Delta table writes require a full service account credential file.</li>
</ul>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.GSConfig.credential_file" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">credential_file</span>


<a href="#ankaflow.models.configs.GSConfig.credential_file" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">credential_file</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Path to GCP service account credential file (JSON).
Required for certain write operations (e.g., Delta tables).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.GSConfig.hmac_key" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">hmac_key</span>


<a href="#ankaflow.models.configs.GSConfig.hmac_key" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">hmac_key</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>GCS HMAC key ID for authenticated access.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.GSConfig.hmac_secret" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">hmac_secret</span>


<a href="#ankaflow.models.configs.GSConfig.hmac_secret" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">hmac_secret</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>GCS HMAC secret for authenticated access.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.configs.S3Config" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">S3Config</span>


<a href="#ankaflow.models.configs.S3Config" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            BucketConfig (ankaflow.models.configs.BucketConfig)" href="#ankaflow.models.configs.BucketConfig">BucketConfig</a></code></p>


        <p>S3-specific bucket configuration including optional authentication.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.S3Config.access_key_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">access_key_id</span>


<a href="#ankaflow.models.configs.S3Config.access_key_id" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">access_key_id</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>AWS access key ID for private S3 access.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.configs.S3Config.secret_access_key" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">secret_access_key</span>


<a href="#ankaflow.models.configs.S3Config.secret_access_key" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">secret_access_key</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>AWS secret access key for private S3 access.</p>

    </div>

</div>






  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="ankaflow.models.connections" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">connections</span>


<a href="#ankaflow.models.connections" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.connections.BigQueryConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BigQueryConnection</span>


<a href="#ankaflow.models.connections.BigQueryConnection" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            PhysicalConnection (ankaflow.models.connections.PhysicalConnection)" href="#ankaflow.models.connections.PhysicalConnection">PhysicalConnection</a></code>, <code><a class="autorefs autorefs-internal" title="            VersionedConnection (ankaflow.models.connections.VersionedConnection)" href="#ankaflow.models.connections.VersionedConnection">VersionedConnection</a></code></p>


        











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.BigQueryConnection.data_mode" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">data_mode</span>


<a href="#ankaflow.models.connections.BigQueryConnection.data_mode" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">data_mode</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Data mode for write operation. For Deltatable
valid options are:</p>
<ul>
<li><code>append</code> adds new data</li>
<li><code>overwrite</code> replaces all data</li>
<li><code>error</code> fails (table is read-only)</li>
</ul>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.BigQueryConnection.key" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">key</span>


<a href="#ankaflow.models.connections.BigQueryConnection.key" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">key</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>List of versioned fields</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.BigQueryConnection.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.connections.BigQueryConnection.kind" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;BigQuery&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.BigQueryConnection.partition" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">partition</span>


<a href="#ankaflow.models.connections.BigQueryConnection.partition" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">partition</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If set then delta table is partitioned using
specified fields for faster reads</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.BigQueryConnection.schema_mode" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">schema_mode</span>


<a href="#ankaflow.models.connections.BigQueryConnection.schema_mode" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">schema_mode</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Deltatable schema behaviour. If not set then write fails
with error in case the data schema does not match existing
table schema.</p>
<p>Schema evolution options:</p>
<ul>
<li><code>merge</code> adds new columns from data</li>
<li><code>overwrite</code> adds new columns, drops missing</li>
</ul>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.BigQueryConnection.version" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">version</span>


<a href="#ankaflow.models.connections.BigQueryConnection.version" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">version</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Field for record version timestamp</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.connections.CSVConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">CSVConnection</span>


<a href="#ankaflow.models.connections.CSVConnection" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            PhysicalConnection (ankaflow.models.connections.PhysicalConnection)" href="#ankaflow.models.connections.PhysicalConnection">PhysicalConnection</a></code></p>


        











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.connections.ClickhouseConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ClickhouseConnection</span>


<a href="#ankaflow.models.connections.ClickhouseConnection" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            PhysicalConnection (ankaflow.models.connections.PhysicalConnection)" href="#ankaflow.models.connections.PhysicalConnection">PhysicalConnection</a></code>, <code><a class="autorefs autorefs-internal" title="            VersionedConnection (ankaflow.models.connections.VersionedConnection)" href="#ankaflow.models.connections.VersionedConnection">VersionedConnection</a></code></p>


        











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.ClickhouseConnection.key" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">key</span>


<a href="#ankaflow.models.connections.ClickhouseConnection.key" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">key</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>List of versioned fields</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.ClickhouseConnection.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.connections.ClickhouseConnection.kind" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;Clickhouse&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.ClickhouseConnection.version" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">version</span>


<a href="#ankaflow.models.connections.ClickhouseConnection.version" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">version</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Field for record version timestamp</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.connections.Connection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Connection</span>


<a href="#ankaflow.models.connections.Connection" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>












  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.Connection.config" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">config</span>


<a href="#ankaflow.models.connections.Connection.config" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">config</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            ConnectionConfiguration (ankaflow.models.configs.ConnectionConfiguration)" href="#ankaflow.models.configs.ConnectionConfiguration">ConnectionConfiguration</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Optional configuration for the current connection.
If not present then global configuration will be used.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.Connection.create_statement" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">create_statement</span>


<a href="#ankaflow.models.connections.Connection.create_statement" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">create_statement</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create statement for given table. Must be in requested dialect.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.Connection.fields" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">fields</span>


<a href="#ankaflow.models.connections.Connection.fields" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">fields</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Columns (ankaflow.models.components.Columns)" href="#ankaflow.models.components.Columns">Columns</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If set then schema is used to generate source structure
in case actual source does not provide data in which case
generation of ephemeral view fails.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.Connection.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.connections.Connection.kind" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Model type e.g. Deltatable, Bigquery, Clickhouse, Parquet, File
Custom connections can be loaded from module.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.Connection.params" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">params</span>


<a href="#ankaflow.models.connections.Connection.params" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">params</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="dict">dict</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><span title="dict">dict</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Any parameters that can be passed to connection.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.Connection.show_schema" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">show_schema</span>


<a href="#ankaflow.models.connections.Connection.show_schema" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">show_schema</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="bool">bool</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If true then schema is automatically detected from
the input data and logged
'</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.connections.CustomConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">CustomConnection</span>


<a href="#ankaflow.models.connections.CustomConnection" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            PhysicalConnection (ankaflow.models.connections.PhysicalConnection)" href="#ankaflow.models.connections.PhysicalConnection">PhysicalConnection</a></code></p>


        <p>Custom connection provider. Custom connection may implement
its own logic but must derive from base Connection class, and expose
tap(), sink(), sql() and show_schema() even if they are no-op.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.CustomConnection.classname" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">classname</span>


<a href="#ankaflow.models.connections.CustomConnection.classname" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">classname</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Name of the class to load from the module</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.CustomConnection.module" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">module</span>


<a href="#ankaflow.models.connections.CustomConnection.module" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">module</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Python module where the connection class is defined</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.CustomConnection.params" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">params</span>


<a href="#ankaflow.models.connections.CustomConnection.params" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">params</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="dict">dict</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><span title="dict">dict</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Free-form configuration parameters passed to the loaded class</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h5 id="ankaflow.models.connections.CustomConnection.load" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">load</span>


<a href="#ankaflow.models.connections.CustomConnection.load" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Type">Type</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Connection (ankaflow.models.connections.Connection)" href="#ankaflow.models.connections.Connection">Connection</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Dynamically load the connection class from the given module and member.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="            Connection (ankaflow.models.connections.Connection)" href="#ankaflow.models.connections.Connection">Connection</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A subclass of Connection.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ImportError">ImportError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the module or member can't be imported.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/models/connections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">Connection</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dynamically load the connection class from the given module and member.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A subclass of Connection.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ImportError: If the module or member can&#39;t be imported.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mod</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">classname</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Could not load &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">classname</span><span class="si">}</span><span class="s2">&#39; from module &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
    <span class="c1"># TODO: Refactor imports to facilitate this check early</span>
    <span class="c1"># if not issubclass(cls, Connection):</span>
    <span class="c1">#     raise TypeError(</span>
    <span class="c1">#         f&quot;{cls.__name__} is not a subclass of Connection&quot;</span>
    <span class="c1">#     )</span>

    <span class="k">return</span> <span class="bp">cls</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.connections.DeltatableConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">DeltatableConnection</span>


<a href="#ankaflow.models.connections.DeltatableConnection" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            PhysicalConnection (ankaflow.models.connections.PhysicalConnection)" href="#ankaflow.models.connections.PhysicalConnection">PhysicalConnection</a></code>, <code><a class="autorefs autorefs-internal" title="            VersionedConnection (ankaflow.models.connections.VersionedConnection)" href="#ankaflow.models.connections.VersionedConnection">VersionedConnection</a></code></p>


        











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.DeltatableConnection.data_mode" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">data_mode</span>


<a href="#ankaflow.models.connections.DeltatableConnection.data_mode" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">data_mode</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;error&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Data mode for write operation. For Deltatable
valid options are:</p>
<ul>
<li><code>append</code> adds new data</li>
<li><code>overwrite</code> replaces all data</li>
<li><code>error</code> fails (table is read-only)</li>
</ul>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.DeltatableConnection.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.connections.DeltatableConnection.kind" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;Deltatable&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.DeltatableConnection.optimize" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">optimize</span>


<a href="#ankaflow.models.connections.DeltatableConnection.optimize" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">optimize</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="int">int</span></span><span class="p">]]</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Use with Deltatable and other engines whether to optimize
after each sink operation. With larger tables this may be a
lengthy synchronous operation.</p>
<p>Default value is optimize and vacuum with 7 day retention.</p>
<h6 id="ankaflow.models.connections.DeltatableConnection.optimize--deltatable">Deltatable<a class="headerlink" href="#ankaflow.models.connections.DeltatableConnection.optimize--deltatable" title="Permanent link">&para;</a></h6>
<p>Values are <code>optimize,vacuum,all,Literal[int]</code>.
  If value is literal int is provided then parts older than
  number of days will be removed. Note that this will override
  default retention days.</p>
<p>String options <code>vacuum,all</code> are equivalent to 0.</p>
<p>Delta connection also supports raw SQL optimization.
Pass statement as sql command:</p>
<p><code>OPTIMIZE Deltatable [COMPACT] [VACUUM] [AGE=&lt;int&gt;[d|h]] [DRY_RUN] [CLEANUP]</code></p>
<p><code>optimize deltatable</code>
→ compact + vacuum with default 7 days</p>
<p><code>optimize deltatable compact</code>
→ compact only</p>
<p><code>optimize deltatable vacuum age=36h dry_run</code>
→ list files older than 36 hours, don't delete</p>
<p><code>optimize deltatable compact vacuum age=1 cleanup</code>
→ compact, vacuum 1 day, then cleanup metadata</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.DeltatableConnection.partition" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">partition</span>


<a href="#ankaflow.models.connections.DeltatableConnection.partition" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">partition</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If set then delta table is partitioned using
specified fields for faster reads</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.DeltatableConnection.schema_mode" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">schema_mode</span>


<a href="#ankaflow.models.connections.DeltatableConnection.schema_mode" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">schema_mode</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Deltatable schema behaviour. If not set then write fails
with error in case the data schema does not match existing
table schema.</p>
<p>Schema evolution options:</p>
<ul>
<li><code>merge</code> adds new columns from data</li>
<li><code>overwrite</code> adds new columns, drops missing</li>
</ul>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.DeltatableConnection.writer_features" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">writer_features</span>


<a href="#ankaflow.models.connections.DeltatableConnection.writer_features" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">writer_features</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.List">List</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Any supported Delta-rs parameters can be passed to the writer.
Example:</p>
<pre><code>writer_features: [TimestampWithoutTimezone]
</code></pre>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.connections.Dimension" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Dimension</span>


<a href="#ankaflow.models.connections.Dimension" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            EphemeralConnection (ankaflow.models.connections.EphemeralConnection)" href="../ankaflow.models/#ankaflow.models.EphemeralConnection">EphemeralConnection</a></code></p>












  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.models.connections.Dimension.load" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">load</span>


<a href="#ankaflow.models.connections.Dimension.load" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Type">Type</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Connection (ankaflow.models.connections.Connection)" href="#ankaflow.models.connections.Connection">Connection</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Dynamically load the connection class from the given module and member.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="            Connection (ankaflow.models.connections.Connection)" href="#ankaflow.models.connections.Connection">Connection</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A subclass of Connection.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ImportError">ImportError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the module or member can't be imported.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/models/connections.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">Connection</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dynamically load the connection class from the given module and member.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A subclass of Connection.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ImportError: If the module or member can&#39;t be imported.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mod</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kind</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Could not load &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">kind</span><span class="si">}</span><span class="s2">&#39; from module &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">return</span> <span class="bp">cls</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.connections.FileConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">FileConnection</span>


<a href="#ankaflow.models.connections.FileConnection" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            PhysicalConnection (ankaflow.models.connections.PhysicalConnection)" href="#ankaflow.models.connections.PhysicalConnection">PhysicalConnection</a></code></p>


        











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.connections.JSONConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">JSONConnection</span>


<a href="#ankaflow.models.connections.JSONConnection" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            PhysicalConnection (ankaflow.models.connections.PhysicalConnection)" href="#ankaflow.models.connections.PhysicalConnection">PhysicalConnection</a></code></p>


        











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.connections.ParquetConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ParquetConnection</span>


<a href="#ankaflow.models.connections.ParquetConnection" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            PhysicalConnection (ankaflow.models.connections.PhysicalConnection)" href="#ankaflow.models.connections.PhysicalConnection">PhysicalConnection</a></code></p>


        











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.connections.PhysicalConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">PhysicalConnection</span>


<a href="#ankaflow.models.connections.PhysicalConnection" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            Connection (ankaflow.models.connections.Connection)" href="#ankaflow.models.connections.Connection">Connection</a></code></p>












  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.PhysicalConnection.locator" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">locator</span>


<a href="#ankaflow.models.connections.PhysicalConnection.locator" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">locator</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Table name or file name or URI, or other identifier
required by the connection.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.PhysicalConnection.raw_dispatch" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">raw_dispatch</span>


<a href="#ankaflow.models.connections.PhysicalConnection.raw_dispatch" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">raw_dispatch</span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If True, sends the provided SQL query directly without altering
locators if fully qualified, or adding FROM clauses.
The query must be a valid SELECT statement.
Useful for full control over complex queries.</p>
<p>In Deltatable and Parquet connections supports rewriting
short locators as convenience.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.connections.RestConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">RestConnection</span>


<a href="#ankaflow.models.connections.RestConnection" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            EphemeralConnection (ankaflow.models.connections.EphemeralConnection)" href="../ankaflow.models/#ankaflow.models.EphemeralConnection">EphemeralConnection</a></code></p>


        <p>Configuration for a REST-based data connection.</p>
<p>This model defines how to configure and execute REST API requests
as part of a pipeline step. It includes the request definition,
client behavior (e.g., retries, headers), and optional schema discovery.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.RestConnection.client" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">client</span>


<a href="#ankaflow.models.connections.RestConnection.client" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">client</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            RestClientConfig (ankaflow.models.rest.RestClientConfig)" href="#ankaflow.models.rest.RestClientConfig">RestClientConfig</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Configuration for the REST client (e.g., base URL, headers, auth).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.RestConnection.fields" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">fields</span>


<a href="#ankaflow.models.connections.RestConnection.fields" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">fields</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Columns (ankaflow.models.components.Columns)" href="#ankaflow.models.components.Columns">Columns</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Optional schema definition used to validate or transform
response data.</p>
<p>It is recommended to manually specify the schema after initial
discovery. This ensures downstream pipeline stages remain stable,
even when the remote API returns no results (e.g., due to no updates
in an incremental fetch). Explicit schema prevents silent failures
or schema drift in such cases.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.RestConnection.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.connections.RestConnection.kind" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;Rest&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Specifies the connection type as "Rest".</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.RestConnection.request" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">request</span>


<a href="#ankaflow.models.connections.RestConnection.request" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">request</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Request (ankaflow.models.rest.Request)" href="#ankaflow.models.rest.Request">Request</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Request template specifying method, path, body, etc.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.RestConnection.show_schema" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">show_schema</span>


<a href="#ankaflow.models.connections.RestConnection.show_schema" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">show_schema</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="bool">bool</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If True, the connector will attempt to infer
or display the response schema automatically.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.connections.SQLGenConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">SQLGenConnection</span>


<a href="#ankaflow.models.connections.SQLGenConnection" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            EphemeralConnection (ankaflow.models.connections.EphemeralConnection)" href="../ankaflow.models/#ankaflow.models.EphemeralConnection">EphemeralConnection</a></code></p>


        <p>SQLGen connection is intended for SQL code generation:</p>
<p>Prompt should instruct the model to generate SQL query and
and executes resutling a VIEW in the internal database.</p>
<p>Example:</p>
<pre><code>Stage 1: Name: ReadSomeParquetData

Stage 2: Name: CodeGen, query: Given SQL table `ReadSomeParquetData` generate SQL query to
    count number of rows in the table.

Inside stage 2 the following happens:

1. Prompt is sent to inferecne endpoint

2. Endpoint is expected to respond with valid SQL

3. Connection will execute a statement `CREATE OR REPLACE VIEW StageName AS &lt;received_select_statement&gt;`
    where statement in the exmaple is likely `SELECT COUNT() FROM ReadSomeParquetData`
</code></pre>
<p>.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.SQLGenConnection.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.connections.SQLGenConnection.kind" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;SQLGen&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Specifies the <code>kind==SQLGen</code></p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.SQLGenConnection.variables" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">variables</span>


<a href="#ankaflow.models.connections.SQLGenConnection.variables" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">variables</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Variables passed to Prompt. Prompt must be supplied in the
<code>query</code> field of the <code>Stage</code>.</p>
<p>Prompt may contain Jinja2-style placeholders:</p>


<details class="example" open>
  <summary>Example</summary>
  <p><code>Here's my name: {{name}}.</code></p>
<p>The connection will render the prompt template using <code>variables</code></p>
</details>
    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.connections.VariableConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">VariableConnection</span>


<a href="#ankaflow.models.connections.VariableConnection" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            PhysicalConnection (ankaflow.models.connections.PhysicalConnection)" href="#ankaflow.models.connections.PhysicalConnection">PhysicalConnection</a></code></p>


        











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.connections.VersionedConnection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">VersionedConnection</span>


<a href="#ankaflow.models.connections.VersionedConnection" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>












  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.VersionedConnection.key" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">key</span>


<a href="#ankaflow.models.connections.VersionedConnection.key" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">key</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>List of versioned fields</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.connections.VersionedConnection.version" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">version</span>


<a href="#ankaflow.models.connections.VersionedConnection.version" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">version</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Field for record version timestamp</p>

    </div>

</div>






  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="ankaflow.models.core" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">core</span>


<a href="#ankaflow.models.core" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.core.FlowContext" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">FlowContext</span>


<a href="#ankaflow.models.core.FlowContext" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="ankaflow.common.types.ImmutableMap">ImmutableMap</span></code></p>


        <p>Context dictionary can be used to supply arbitrary data
to pipeline that can be referenced in templates much
much like variables with the difference that they cannot
be modified at runtime.</p>
<p>Context can be initiated via dictionary:</p>
<p><code>context = FlowContext(**{'foo':'Bar'}])</code></p>
<p>Items can be reference using both bracket and dot notation:</p>
<p><code>context.foo == context['foo'] == 'Bar'</code></p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.core.Stage" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Stage</span>


<a href="#ankaflow.models.core.Stage" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>












  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.core.Stage.connection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">connection</span>


<a href="#ankaflow.models.core.Stage.connection" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">connection</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span>
    <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            RestConnection (ankaflow.models.connections.RestConnection)" href="#ankaflow.models.connections.RestConnection">RestConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            VariableConnection (ankaflow.models.connections.VariableConnection)" href="#ankaflow.models.connections.VariableConnection">VariableConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            BigQueryConnection (ankaflow.models.connections.BigQueryConnection)" href="#ankaflow.models.connections.BigQueryConnection">BigQueryConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            DeltatableConnection (ankaflow.models.connections.DeltatableConnection)" href="#ankaflow.models.connections.DeltatableConnection">DeltatableConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            ParquetConnection (ankaflow.models.connections.ParquetConnection)" href="#ankaflow.models.connections.ParquetConnection">ParquetConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            ClickhouseConnection (ankaflow.models.connections.ClickhouseConnection)" href="#ankaflow.models.connections.ClickhouseConnection">ClickhouseConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            CustomConnection (ankaflow.models.connections.CustomConnection)" href="#ankaflow.models.connections.CustomConnection">CustomConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            JSONConnection (ankaflow.models.connections.JSONConnection)" href="#ankaflow.models.connections.JSONConnection">JSONConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            CSVConnection (ankaflow.models.connections.CSVConnection)" href="#ankaflow.models.connections.CSVConnection">CSVConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            FileConnection (ankaflow.models.connections.FileConnection)" href="#ankaflow.models.connections.FileConnection">FileConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            SQLGenConnection (ankaflow.models.connections.SQLGenConnection)" href="#ankaflow.models.connections.SQLGenConnection">SQLGenConnection</a></span><span class="p">,</span>
        <span class="n"><a class="autorefs autorefs-internal" title="            Dimension (ankaflow.models.connections.Dimension)" href="#ankaflow.models.connections.Dimension">Dimension</a></span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">]</span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n"><span title="pydantic.Field(discriminator)">discriminator</span></span><span class="o">=</span><span class="s2">&quot;kind&quot;</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Defines how the data is read from / written to the target.</p>
<p>Connection fields may contain templates and they will be
recursively.</p>
<p>Special construct is JSON&gt; which allows dynamically generating
parameters as runtime:</p>
<pre><code>- kind: source
  name: source_name
  connection:
    kind: File
    params: &gt;
      JSON&gt;{
        &quot;key&quot;: &quot;value&quot;,
        &quot;dynkey&quot;: &lt;&lt;API.property&gt;&gt;,
      }
</code></pre>
<p>In the above app <code>params</code> are constructed as JSON string.
It is possible to even construct parameter keys dynamically:</p>
<pre><code>params: &gt;
  JSON&gt;
  {
    &lt;% for number in [1,2,3] %&gt;
    &quot;key_&lt;&lt; number &gt;&gt;&quot;:&lt;&lt; number &gt;&gt;&lt;% if not loop.last %&gt;,&lt;% endif %&gt;
    &lt;% endfor %&gt;
  }
</code></pre>
<p>Above example results the following:</p>
<pre><code>params: &gt;
  {
    &quot;key_1&quot;: 1,
    &quot;key_2&quot;: 2,
    &quot;key_3&quot;: 3
  }
</code></pre>
<p>JSON&gt; structure cannot contain nested JSON&gt; structures, the entire
string following the JSON&gt; header must result a valid JSON.</p>
<p>Inbuilt connections include:</p>
<ul>
<li>Deltatable (read)</li>
</ul>
<p><strong>If connection is <code>Deltatable</code> then query is required to narrow
  down data stored in the delta table. <code>FROM</code> clause must be <code>Deltatable</code>:</strong>
  <code>- kind: source
    name: delta_tap
    connection:
      kind: Deltatable
      locator: delta_table
    query: &gt;
      select * from Deltatable</code></p>
<ul>
<li>Deltatable (write)</li>
</ul>
<p><em>See also StorageOptions</em></p>
<p>The following example writes data from preceding stage
  to delta table, appending the data, partitions using
  <code>part</code> column, and optimizes and vacuums immediately without
  retention after write.
  <code>- kind: sink
    name: delta_sink
    connection:
      kind: Deltatable
      locator: delta_table
      optimize: 0
      data_mode: append
      partition:
      - part_field</code></p>
<ul>
<li>Parquet (read/write)</li>
<li>JSON (read/write; NOTE: write operation generates newline-delimited JSON)</li>
<li>CSV (read/write)</li>
<li>
<p>Variable (read/write)</p>
</li>
<li>
<p>File (read)</p>
</li>
</ul>
<p>File can be read from a connected filesystem (including s3). File name
  and file type must be specified in the pipeline context:</p>
<pre><code>- `context.FileName`: file name relative to `file_prefix`
- `context.FileType`: file type, one of CSV, XLSX, JSON, HTML
</code></pre>
<p>Any file reader configuration must be passed in <code>params</code>.</p>
<ul>
<li>Rest (bidirectional)</li>
</ul>
<p>Rest connections consist of two parts: Client and Request. Client contains
  base URL and authentication (basic, digest, header and oauth2 are supported).</p>
<p><code>- name: TheRest
    kind: source
    connection:
      kind: Rest
      client:
        base_url: https://api.example.com
        auth:  # Every request to given endpoint share the same authentication
          method: basic
          values:
            username: TheName
            password: ThePassword
      request:
        endpoint: /v1/some-path
        content_type: application/json
        method: post
        query:  # Query parameters
          date: &lt;&lt;API.dt(None).isoformat()&gt;&gt;
        body:  # JSON payload
          param: 1
        response:
          content_type: application/json
          locator: "JMESPath.to.data"</code></p>
<p>Any custom source (API) can be used as long as available via module.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.core.Stage.context" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">context</span>


<a href="#ankaflow.models.core.Stage.context" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">context</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            FlowContext (ankaflow.models.core.FlowContext)" href="#ankaflow.models.core.FlowContext">FlowContext</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>@private
Global context passed to given stage</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.core.Stage.explain" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">explain</span>


<a href="#ankaflow.models.core.Stage.explain" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">explain</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="bool">bool</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If set to true then SQL query explanation will be logged.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.core.Stage.fields" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">fields</span>


<a href="#ankaflow.models.core.Stage.fields" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">fields</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Column (ankaflow.models.components.Column)" href="#ankaflow.models.components.Column">Column</a></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Explicitly defined output fields.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.core.Stage.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.core.Stage.kind" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Defines which action will be performed:</p>
<ul>
<li>source</li>
<li>transform</li>
<li>sink</li>
<li>pipeline</li>
<li>sql</li>
</ul>
<h6 id="ankaflow.models.core.Stage.kind--sink">Sink<a class="headerlink" href="#ankaflow.models.core.Stage.kind--sink" title="Permanent link">&para;</a></h6>
<p>Sink reads output from previous stage and stores in specified
location.</p>
<p>NOTE: If query is supplied with the stage then sink uses output
of the query rather than preceding stage directly.
Subsequent sink will use preceding stage. If supplied query must
create either view or table with same name as current stage.</p>
<pre><code>- name: my_sink
kind: sink
connection:
    kind: Variable
query: &gt;
    CREATE VIEW my_sink AS
    SELECT
    1 as foo
</code></pre>
<h6 id="ankaflow.models.core.Stage.kind--pipeline">Pipeline<a class="headerlink" href="#ankaflow.models.core.Stage.kind--pipeline" title="Permanent link">&para;</a></h6>
<p>If pipeline is preceded by any stage then the subpipeline will be executed
as many times as there are rows in the previous stage output.
This is useful if you want to run same pipeline with different parameters.
Make sure the pipeline is preceded by source or transform producing
required number of rows. If you need to run subpipeline only once there
are two options:</p>
<ol>
<li>Place it to the top</li>
<li>Preced with tranform producing single row only</li>
</ol>
<p>Each row is then passed to subpipeline in a special variable.</p>
<p>Example pipeline iterating subpipeline 5 times:</p>
<ul>
<li>kind: transform
      name: generate_5
      # Generate 5 rows
      query: &gt;
          select unnest as current_variable from unnest(generate_series(1,5))
      show: 5</li>
<li>kind: pipeline
    name: looped_5x
    stages:
        - kind: transform
          name: inside_loop
          # In query we can reference the value passed from parent pipeline
          query: &gt;
              select 'Currently running iteration: {API.look('loop_control.current_variable', variables)}' as value
          show: 5</li>
</ul>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.core.Stage.locator" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">locator</span>


<a href="#ankaflow.models.core.Stage.locator" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">locator</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Currently unused: Name for the connection configuration: name, or URI.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.core.Stage.log_level" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">log_level</span>


<a href="#ankaflow.models.core.Stage.log_level" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">log_level</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            LogLevel (ankaflow.models.enums.LogLevel)" href="#ankaflow.models.enums.LogLevel">LogLevel</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set logging level. All stages after (including current) will log
with specified level. Possible values: INFO (default), DEBUG, WARNING.
Log level will be reset to INFO after each pipeline
(including nested pipelines).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.core.Stage.name" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">name</span>


<a href="#ankaflow.models.core.Stage.name" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Name of the stage, must be unique across all stages in the pipeline
and conform to the rules: Must start with letter, may contain lowercase
letters, number and underscores.
Name is used to reference this stage by other subsequent stages.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.core.Stage.on_error" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">on_error</span>


<a href="#ankaflow.models.core.Stage.on_error" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">on_error</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;fail&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If set to 'continue' then pipeline will not fail.
Subsequent stages referring to failed one must handle
missing data.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.core.Stage.query" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">query</span>


<a href="#ankaflow.models.core.Stage.query" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">query</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>SQL Query or dictionary with custom source parameters.
May contain {dynamic variables}.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.core.Stage.show" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">show</span>


<a href="#ankaflow.models.core.Stage.show" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">show</span><span class="p">:</span> <span class="n"><span title="int">int</span></span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If set to positive integer then given number of rows from
this stage will get logged. If set to -1 then all rows
will be loggged. Set to 0 to disable logging.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.core.Stage.show_schema" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">show_schema</span>


<a href="#ankaflow.models.core.Stage.show_schema" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">show_schema</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="bool">bool</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If True then schema is logged</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.core.Stage.skip_if" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">skip_if</span>


<a href="#ankaflow.models.core.Stage.skip_if" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">skip_if</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.Any">Any</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Any value that can evaluated using bool().
or template string e.g. <code>&lt;&lt; True &gt;&gt;</code>.
When the expression evaluates to True then the stage is skipped.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.core.Stage.stages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">stages</span>


<a href="#ankaflow.models.core.Stage.stages" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">stages</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.core.Stages)" href="#ankaflow.models.core.Stages">Stages</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Used when kind is <code>Flow</code></p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.core.Stage.throttle" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">throttle</span>


<a href="#ankaflow.models.core.Stage.throttle" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">throttle</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="int">int</span></span><span class="p">,</span> <span class="n"><span title="float">float</span></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If set to positive value then flow execution will be paused
after the stage for given number of seconds.</p>
<p>Useful when dealing with rate limits or otherwise spreading the load
over time.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.core.Stages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Stages</span>


<a href="#ankaflow.models.core.Stages" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.RootModel">RootModel</span>[<span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a>]]</code></p>


        <p>A sequence of processing stages in a data pipeline.</p>
<p>Each <code>Datablock</code> in <code>root</code> represents one discrete step or transformation
in an end-to-end business workflow (e.g., tap, transform, sink, validate).</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="ankaflow.models.core.Stages.root">root</span></code></td>
            <td>
                  <code><span title="List">List</span>[<span title="Datablock">Datablock</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Ordered list of pipeline stages to execute.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="ankaflow.models.core.Stages.enumerate_steps" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">enumerate_steps</span>


<a href="#ankaflow.models.core.Stages.enumerate_steps" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">enumerate_steps</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Iterator">Iterator</span></span><span class="p">[</span><span class="n"><span title="tuple">tuple</span></span><span class="p">[</span><span class="n"><span title="int">int</span></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a></span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Yield each stage along with its 0-based position.</p>
<p>Use this when you need both the stage and its index for logging,
metrics, or conditional branching.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Iterator">Iterator</span>[<span title="tuple">tuple</span>[<span title="int">int</span>, <a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Iterator[Tuple[int, Datablock]]: Pairs of (index, stage).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/models/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">enumerate_steps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Stage</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Yield each stage along with its 0-based position.</span>

<span class="sd">    Use this when you need both the stage and its index for logging,</span>
<span class="sd">    metrics, or conditional branching.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Iterator[Tuple[int, Datablock]]: Pairs of (index, stage).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.models.core.Stages.load" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">load</span>


<a href="#ankaflow.models.core.Stages.load" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load</span><span class="p">(</span><span class="n">source</span><span class="p">:</span> <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="pathlib.Path">Path</span></span><span class="p">,</span> <span class="n"><span title="typing.IO">IO</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">],</span> <span class="n"><span title="ankaflow.models.core.Loadable">Loadable</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.core.Stages)" href="#ankaflow.models.core.Stages">Stages</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Load a pipeline from YAML (path, YAML-string, file-like or Loadable).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>source</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="pathlib.Path">Path</span> | <span title="IO">IO</span>[<span title="str">str</span>] | <span title="ankaflow.models.core.Loadable">Loadable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>Path to a .yaml file</li>
<li>Raw YAML content</li>
<li>File-like object returning YAML</li>
<li>Any object with a <code>.load()</code> method returning Python data</li>
</ul>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Stages</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="            Stages (ankaflow.models.core.Stages)" href="#ankaflow.models.core.Stages">Stages</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a validated <code>Stages</code> instance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/models/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">source</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">IO</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Loadable</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Stages&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a pipeline from YAML (path, YAML-string, file-like or Loadable).</span>

<span class="sd">    Args:</span>
<span class="sd">        source (str | Path | IO[str] | Loadable):</span>
<span class="sd">            - Path to a .yaml file</span>
<span class="sd">            - Raw YAML content</span>
<span class="sd">            - File-like object returning YAML</span>
<span class="sd">            - Any object with a `.load()` method returning Python data</span>

<span class="sd">    Returns:</span>
<span class="sd">        Stages: a validated `Stages` instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># 1) If it’s a loader-object, pull Python data directly</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">Loadable</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># 2) Read text for YAML parsing:</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">):</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">IO</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">source</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

        <span class="c1"># 3) First, try parsing as raw YAML</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">yaml</span><span class="o">.</span><span class="n">YAMLError</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># 4) Only if that parse returned a `str` we treat it as a filename</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">OSError</span><span class="p">,</span> <span class="n">yaml</span><span class="o">.</span><span class="n">YAMLError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Could not interpret </span><span class="si">{</span><span class="n">data</span><span class="si">!r}</span><span class="s2"> as YAML or file path&quot;</span>
                <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="c1"># 5) Validate final shape</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Expected a list of pipeline stages, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="c1"># 5) Finally, validate into our model</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="ankaflow.models.core.Stages.steps" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">steps</span>


<a href="#ankaflow.models.core.Stages.steps" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">steps</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Iterator">Iterator</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Yield each stage in execution order.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Iterator">Iterator</span>[<a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Iterator[Datablock]: An iterator over the stages,</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Iterator">Iterator</span>[<a class="autorefs autorefs-internal" title="            Stage (ankaflow.models.core.Stage)" href="#ankaflow.models.core.Stage">Stage</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>from first to last.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>ankaflow/models/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">steps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="n">Stage</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Yield each stage in execution order.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Iterator[Datablock]: An iterator over the stages,</span>
<span class="sd">        from first to last.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.core.Variables" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Variables</span>


<a href="#ankaflow.models.core.Variables" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="dict">dict</span></code></p>


        <p>Variables is a <code>dict</code>-based collection
storing arbitrary data under keys. Variable can be populated via:</p>
<ul>
<li>Dictionary passed to pipeline:
  <code>Flow(defs, context, variables={'foo': 'bar'})</code></li>
<li>Sink operation:<pre><code>- kind: sink

    name: my_sink

    connection:

        kind: Variable

        locator: variable_name
</code></pre>
</li>
</ul>
<p>This step will place a list of records from preceding step in
  variables as <code>{'variable_name': t.List[dict]}</code></p>
<p>In most cases sainking to variable is not needed as all preceding stages
in a pipeline can be referenced via <code>name</code>. Sinking to variable is
useful when you need to share data with subpipeline.</p>
<p>Special variable is <code>loop_control</code> which is populated
dynamically from previous step and current stage type is pipeline.
In case previous step generates multiple records then the new pipeline
is called for each record, and control variable holds a <code>dict</code>
representing the current record.</p>









    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="ankaflow.models.enums" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">enums</span>


<a href="#ankaflow.models.enums" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.enums.AuthType" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AuthType</span>


<a href="#ankaflow.models.enums.AuthType" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.enums.ContentType" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ContentType</span>


<a href="#ankaflow.models.enums.ContentType" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.enums.DataType" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">DataType</span>


<a href="#ankaflow.models.enums.DataType" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.enums.LogLevel" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">LogLevel</span>


<a href="#ankaflow.models.enums.LogLevel" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.enums.ModelType" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ModelType</span>


<a href="#ankaflow.models.enums.ModelType" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.enums.ParameterDisposition" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ParameterDisposition</span>


<a href="#ankaflow.models.enums.ParameterDisposition" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.enums.RequestMethod" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">RequestMethod</span>


<a href="#ankaflow.models.enums.RequestMethod" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        











  <div class="doc doc-children">












  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="ankaflow.models.llm" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">llm</span>


<a href="#ankaflow.models.llm" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.llm.LLMConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">LLMConfig</span>


<a href="#ankaflow.models.llm.LLMConfig" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Confuration for Language Model</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.llm.LLMConfig.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.llm.LLMConfig.kind" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            LLMKind (ankaflow.models.llm.LLMKind)" href="#ankaflow.models.llm.LLMKind">LLMKind</a></span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="            MOCK (ankaflow.models.llm.LLMKind.MOCK)" href="#ankaflow.models.llm.LLMKind.MOCK">MOCK</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Language model provider: <code>mock</code>(default)|<code>openai</code></p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.llm.LLMConfig.model" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">model</span>


<a href="#ankaflow.models.llm.LLMConfig.model" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">model</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Language model, if not set then uses default</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.llm.LLMConfig.proxy" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">proxy</span>


<a href="#ankaflow.models.llm.LLMConfig.proxy" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">proxy</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            LLMProxy (ankaflow.models.llm.LLMProxy)" href="#ankaflow.models.llm.LLMProxy">LLMProxy</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Reverse proxy used to connect to provider (optional)</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.llm.LLMKind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">LLMKind</span>


<a href="#ankaflow.models.llm.LLMKind" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="str">str</span></code>, <code><span title="enum.Enum">Enum</span></code></p>


        <p>Supported LLM protocol backends.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.llm.LLMKind.MOCK" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">MOCK</span>


<a href="#ankaflow.models.llm.LLMKind.MOCK" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">MOCK</span> <span class="o">=</span> <span class="s1">&#39;mock&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.llm.LLMKind.OPENAI" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">OPENAI</span>


<a href="#ankaflow.models.llm.LLMKind.OPENAI" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">OPENAI</span> <span class="o">=</span> <span class="s1">&#39;openai&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.llm.LLMProxy" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">LLMProxy</span>


<a href="#ankaflow.models.llm.LLMProxy" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Configuration for proxy-based LLM usage.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.llm.LLMProxy.client" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">client</span>


<a href="#ankaflow.models.llm.LLMProxy.client" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">client</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            RestClientConfig (ankaflow.models.rest.RestClientConfig)" href="#ankaflow.models.rest.RestClientConfig">RestClientConfig</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.llm.LLMProxy.request" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">request</span>


<a href="#ankaflow.models.llm.LLMProxy.request" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">request</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Request (ankaflow.models.rest.Request)" href="#ankaflow.models.rest.Request">Request</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>






  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="ankaflow.models.rest" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">rest</span>


<a href="#ankaflow.models.rest" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.rest.BasicHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BasicHandler</span>


<a href="#ankaflow.models.rest.BasicHandler" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>A no-op response handler used when no special processing
(like pagination or transformation) is required.</p>
<p>Typically used for single-response REST endpoints where the
entire payload is returned in one request.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="            kind (ankaflow.models.rest.BasicHandler.kind)" href="#ankaflow.models.rest.BasicHandler.kind">kind</a></code></td>
            <td>
                  <code><span title="Literal">Literal</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Specifies the handler type as BASIC.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.BasicHandler.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.rest.BasicHandler.kind" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="n"><span title="ankaflow.models.rest.ResponseHandlerTypes.BASIC">BASIC</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Specifies the handler type as Basic.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.rest.Paginator" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Paginator</span>


<a href="#ankaflow.models.rest.Paginator" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>A response handler for paginated REST APIs.</p>
<p>This handler generates repeated requests by incrementing a
page-related parameter until no more data is available.
The stopping condition is usually inferred from the number
of records in the response being less than <code>page_size</code>, or
from a total record count field.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.Paginator.increment" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">increment</span>


<a href="#ankaflow.models.rest.Paginator.increment" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">increment</span><span class="p">:</span> <span class="n"><span title="int">int</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Page parameter increment. Original request configuration
should include initial value e.g. <code>page_no=1</code></p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.Paginator.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.rest.Paginator.kind" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="n"><span title="ankaflow.models.rest.ResponseHandlerTypes.PAGINATOR">PAGINATOR</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Specifies the handler type as Paginator.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.Paginator.page_param" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">page_param</span>


<a href="#ankaflow.models.rest.Paginator.page_param" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">page_param</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Page parameter in the request (query or body)
This will be incremented from request to request</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.Paginator.page_size" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">page_size</span>


<a href="#ankaflow.models.rest.Paginator.page_size" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">page_size</span><span class="p">:</span> <span class="n"><span title="int">int</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Page size should be explicitly defined. If response contains
less records it is considered to be last page</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.Paginator.param_locator" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">param_locator</span>


<a href="#ankaflow.models.rest.Paginator.param_locator" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">param_locator</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            ParameterDisposition (ankaflow.models.enums.ParameterDisposition)" href="#ankaflow.models.enums.ParameterDisposition">ParameterDisposition</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Define where the parameter is located: body or query</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.Paginator.throttle" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">throttle</span>


<a href="#ankaflow.models.rest.Paginator.throttle" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">throttle</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="int">int</span></span><span class="p">,</span> <span class="n"><span title="float">float</span></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>If set to positive value then each page request is throttled
given number of seconds.</p>
<p>Useful when dealing with rate limits or otherwise spreading the load
over time.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.Paginator.total_records" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">total_records</span>


<a href="#ankaflow.models.rest.Paginator.total_records" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">total_records</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>JMESPath to total records count in the response.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.rest.Request" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Request</span>


<a href="#ankaflow.models.rest.Request" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>












  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.Request.body" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">body</span>


<a href="#ankaflow.models.rest.Request.body" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">body</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="typing.Dict">Dict</span></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Request body parameters.</p>
<p>This field accepts either:
- A Python <code>dict</code> representing a direct key-value mapping, or
- A Jinja-templated JSON string with magic <code>@json</code> prefix, e.g.:
<code>@json{"parameter": "value"}</code></p>
<p>The template will be rendered using the following custom delimiters:
- <code>&lt;&lt; ... &gt;&gt;</code> for variable interpolation
- <code>&lt;% ... %&gt;</code> for logic/control flow (e.g., for-loops)
- <code>&lt;# ... #&gt;</code> for inline comments</p>
<p>The template will be rendered before being parsed into a valid JSON object.
This allows the use of dynamic expressions, filters, and control flow
such as loops.</p>
<h6 id="ankaflow.models.rest.Request.body--example-with-looping">Example with looping<a class="headerlink" href="#ankaflow.models.rest.Request.body--example-with-looping" title="Permanent link">&para;</a></h6>
<p>Given:</p>
<pre><code class="language-python">variables = {
    &quot;MyList&quot;: [
        {&quot;id&quot;: 1, &quot;value&quot;: 10},
        {&quot;id&quot;: 2, &quot;value&quot;: 20}
    ]
}
</code></pre>
<p>You can generate a dynamic body with:</p>
<pre><code>body: &gt;
@json[
    &lt;% for row in API.look(&quot;MyTable&quot;, variables) %&gt;
        { &quot;id&quot;: &lt;&lt; row.id &gt;&gt;, &quot;value&quot;: &lt;&lt; row.value &gt;&gt; }&lt;% if not loop.last %&gt;,&lt;% endif %&gt;
    &lt;% endfor %&gt;
]
</code></pre>
<p>This will render to a proper JSON list:</p>
<pre><code>[
    { &quot;id&quot;: 1, &quot;value&quot;: 10 },
    { &quot;id&quot;: 2, &quot;value&quot;: 20 }
]
</code></pre>
<p>Notes:
- When using @json, the entire string is rendered as a Jinja template
    and then parsed with json.loads().
- Nested @json blocks are not supported.
- Newlines and whitespace are automatically collapsed during rendering.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.Request.content_type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">content_type</span>


<a href="#ankaflow.models.rest.Request.content_type" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">content_type</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            ContentType (ankaflow.models.enums.ContentType)" href="#ankaflow.models.enums.ContentType">ContentType</a></span> <span class="o">=</span> <span class="n"><span title="ankaflow.models.enums.ContentType.JSON">JSON</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Request content type</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.Request.endpoint" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">endpoint</span>


<a href="#ankaflow.models.rest.Request.endpoint" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">endpoint</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Request endpoint e.g. <code>get/data</code> under base url:</p>
<p>Example <code>https://api.example.com/v1</code> + <code>get/data</code></p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.Request.errorhandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">errorhandler</span>


<a href="#ankaflow.models.rest.Request.errorhandler" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">errorhandler</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            RestErrorHandler (ankaflow.models.rest.RestErrorHandler)" href="#ankaflow.models.rest.RestErrorHandler">RestErrorHandler</a></span> <span class="o">=</span> <span class="n"><span title="pydantic.Field">Field</span></span><span class="p">(</span>
    <span class="n"><span title="pydantic.Field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><a class="autorefs autorefs-internal" title="            RestErrorHandler (ankaflow.models.rest.RestErrorHandler)" href="#ankaflow.models.rest.RestErrorHandler">RestErrorHandler</a></span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Custom error handler e.g. for searching conditions in response
or custom status codes</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.Request.initial_backoff" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">initial_backoff</span>


<a href="#ankaflow.models.rest.Request.initial_backoff" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">initial_backoff</span><span class="p">:</span> <span class="n"><span title="float">float</span></span> <span class="o">=</span> <span class="mf">0.5</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initial backoff time in seconds.
Will be multiplied exponentially for subsequent retries (2^n).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.Request.max_retries" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">max_retries</span>


<a href="#ankaflow.models.rest.Request.max_retries" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">max_retries</span><span class="p">:</span> <span class="n"><span title="int">int</span></span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Maximum number of retries on transport errors.
Default is 0 (no retry).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.Request.method" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">method</span>


<a href="#ankaflow.models.rest.Request.method" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">method</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            RequestMethod (ankaflow.models.enums.RequestMethod)" href="#ankaflow.models.enums.RequestMethod">RequestMethod</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Request method e.g. <code>post,get,put</code></p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.Request.query" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">query</span>


<a href="#ankaflow.models.rest.Request.query" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">query</span><span class="p">:</span> <span class="n"><span title="typing.Dict">Dict</span></span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Query parameters. Parameters may contain template variables.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.Request.response" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">response</span>


<a href="#ankaflow.models.rest.Request.response" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">response</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            RestResponse (ankaflow.models.rest.RestResponse)" href="#ankaflow.models.rest.RestResponse">RestResponse</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Response handling configuration</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.rest.ResponseHandlerTypes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ResponseHandlerTypes</span>


<a href="#ankaflow.models.rest.ResponseHandlerTypes" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">


        











  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.rest.RestAuth" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">RestAuth</span>


<a href="#ankaflow.models.rest.RestAuth" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Authenctication configuration for Rest connection.</p>
<p>NOTE: Not all authentication methods may not work
in browser due to limitations in the network API.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.RestAuth.method" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">method</span>


<a href="#ankaflow.models.rest.RestAuth.method" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">method</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            AuthType (ankaflow.models.enums.AuthType)" href="#ankaflow.models.enums.AuthType">AuthType</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Specifies authentiation type.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.RestAuth.values" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">values</span>


<a href="#ankaflow.models.rest.RestAuth.values" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">values</span><span class="p">:</span> <span class="n"><span title="ankaflow.common.types.StringDict">StringDict</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Mapping of parameter names and values.</p>
<p>{
    'X-Auth-Token': '<The Token>'
}</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h5 id="ankaflow.models.rest.RestAuth.coerce_to_stringdict" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">coerce_to_stringdict</span>


<a href="#ankaflow.models.rest.RestAuth.coerce_to_stringdict" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">coerce_to_stringdict</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Rest header values must be strings.
This convenience validator  automatically
converts regiular dictionary to StringDict.</p>


            <details class="quote">
              <summary>Source code in <code>ankaflow/models/rest.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;values&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
<span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">coerce_to_stringdict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Rest header values must be strings.</span>
<span class="sd">    This convenience validator  automatically</span>
<span class="sd">    converts regiular dictionary to StringDict.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">StringDict</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">v</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">StringDict</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Expected a StringDict or a dict for `values`&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.rest.RestClientConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">RestClientConfig</span>


<a href="#ankaflow.models.rest.RestClientConfig" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Rest client for given base URL.
Includes transport and authentication
configuration</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.RestClientConfig.base_url" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">base_url</span>


<a href="#ankaflow.models.rest.RestClientConfig.base_url" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">base_url</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Base URL, typically server or API root.
All endpoints with the same base URL share the
same authentication.</p>
<p>Example: <code>https://api.example.com/v1</code></p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.RestClientConfig.timeout" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">timeout</span>


<a href="#ankaflow.models.rest.RestClientConfig.timeout" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">timeout</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="float">float</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Request timeout in seconds. Default is 5.
Set 0 to disable timout.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.rest.RestErrorHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">RestErrorHandler</span>


<a href="#ankaflow.models.rest.RestErrorHandler" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>












  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.RestErrorHandler.condition" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">condition</span>


<a href="#ankaflow.models.rest.RestErrorHandler.condition" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">condition</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>JMESPath expression to look for in the response body.
Error will be generated if expression evaluates to True</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.RestErrorHandler.error_status_codes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">error_status_codes</span>


<a href="#ankaflow.models.rest.RestErrorHandler.error_status_codes" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">error_status_codes</span><span class="p">:</span> <span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="int">int</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>List of HTTP status codes to be treated as errors.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.RestErrorHandler.message" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">message</span>


<a href="#ankaflow.models.rest.RestErrorHandler.message" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">message</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>JMESPath expression to extract error message from respose.
If omitted entire response will be included in error.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.rest.RestResponse" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">RestResponse</span>


<a href="#ankaflow.models.rest.RestResponse" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Response configuration. Response can be paged,
polled URL or in body.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.RestResponse.content_type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">content_type</span>


<a href="#ankaflow.models.rest.RestResponse.content_type" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">content_type</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            DataType (ankaflow.models.enums.DataType)" href="#ankaflow.models.enums.DataType">DataType</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returned data type</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.RestResponse.locator" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">locator</span>


<a href="#ankaflow.models.rest.RestResponse.locator" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">locator</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>JMESPath to read data from JSON body.
If not set then entire body is treated as data.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.rest.StatePoller" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">StatePoller</span>


<a href="#ankaflow.models.rest.StatePoller" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>A response handler for state-based polling APIs.</p>
<p>This handler is designed for asynchronous workflows where the
client repeatedly polls an endpoint until a certain state is reached
(e.g., job completion, resource readiness). Once the condition is met,
the pipeline continues by reading from the final data <code>locator</code>.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.StatePoller.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.rest.StatePoller.kind" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="n"><span title="ankaflow.models.rest.ResponseHandlerTypes.STATEPOLLING">STATEPOLLING</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Specifies the handler type as StatePolling.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.StatePoller.ready_status" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">ready_status</span>


<a href="#ankaflow.models.rest.StatePoller.ready_status" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">ready_status</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>JMESPath to read status from response. If the value at path
evaluates to True then no more requests are made, and
the API tries to read data from URL specified by <code>locator</code>.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="ankaflow.models.rest.URLPoller" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">URLPoller</span>


<a href="#ankaflow.models.rest.URLPoller" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>URL Poller makes request(s) to remote API
until an URL is returned</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.URLPoller.kind" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kind</span>


<a href="#ankaflow.models.rest.URLPoller.kind" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kind</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="n"><span title="ankaflow.models.rest.ResponseHandlerTypes.URLPOLLING">URLPOLLING</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Specifies the handler type as URLPolling.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="ankaflow.models.rest.URLPoller.ready_status" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">ready_status</span>


<a href="#ankaflow.models.rest.URLPoller.ready_status" class="headerlink" title="Permanent link">&para;</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">ready_status</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>JMESPath to read status from response. If the value at path
evaluates to True then no more requests are made, and
the API tries to read data from URL specified by <code>locator</code>.</p>

    </div>

</div>






  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="ankaflow.tests" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">tests</span>


<a href="#ankaflow.tests" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">










  <div class="doc doc-children">












  </div>

    </div>

</div>


  </div>

    </div>

</div>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>